{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Webov\u00e1 kartografie","text":"<p>Tento povinn\u011b-voliteln\u00fd p\u0159edm\u011bt seznamuje se z\u00e1klady fungov\u00e1n\u00ed a vytv\u00e1\u0159en\u00ed mapov\u00fdch aplikac\u00ed ve webov\u00e9m prost\u0159ed\u00ed.</p> <p>Za\u010d\u00edn\u00e1 se sezn\u00e1men\u00edm s jazykem JavaScript a jeho mo\u017enostmi, p\u0159i\u010dem\u017e je zm\u00edn\u011bno fungov\u00e1n\u00ed webov\u00fdch str\u00e1nek a server\u016f, problematika DNS a dom\u00e9n a hostov\u00e1n\u00ed webov\u00e9ho obsahu. Mapov\u00e9 v\u00fdstupy jsou pak vytv\u00e1\u0159eny u\u017eit\u00edm dvou metod \u2013 pomoc\u00ed open-source mapov\u00e9 knihovny (vyu\u017e\u00edv\u00e1me  Leaflet) a pomoc\u00ed API rozhran\u00ed pokro\u010dil\u00e9ho kartografick\u00e9ho cloudu (vyu\u017e\u00edv\u00e1me  ArcGIS Online).</p> <p>Jako \u00fa\u010dastn\u00edci kurzu se nau\u010d\u00edte naprogramovat mapov\u00e9 aplikace vyu\u017e\u00edvaj\u00edc\u00ed \u0161irokou \u0161k\u00e1lu funkcionality, od rastrov\u00fdch a vektorov\u00fdch podkladov\u00fdch vrstev, p\u0159es stylov\u00e1n\u00ed, tvorbu pop-up\u016f, graf\u016f a tematick\u00fdch v\u00fdstup\u016f po propojen\u00ed mapy s grafikou \u010di dal\u0161\u00edm obsahem. Pomoc\u00ed ArcGIS API for Javascript si roz\u0161\u00ed\u0159\u00edte znalosti o tvorb\u011b webov\u00fdch mapov\u00fdch aplikac\u00ed v prost\u0159ed\u00ed Esri, kde tento p\u0159edm\u011bt navazuje na z\u00e1klady prob\u00edran\u00e9 v Kartografii 3.</p> Nau\u010d\u00edte se <ul> <li> <p></p> <p>z\u00e1klady HTML, CSS a JavaScriptu</p> </li> <li> <p></p> <p>vyv\u00edjet interaktivn\u00ed webov\u00e9 mapov\u00e9 aplikace</p> </li> <li> <p></p> <p>vyu\u017e\u00edvat open-source mapov\u00e9 knihovny jako t\u0159eba Leaflet \u010di OpenLayers</p> </li> <li> <p></p> <p>vizualizovat geoprostorov\u00e1 data na webu</p> </li> <li> <p></p> <p>pochopit fungov\u00e1n\u00ed webov\u00fdch server\u016f</p> </li> <li> <p></p> <p>vytvo\u0159it interaktivn\u00ed infografiku a propojit j\u00ed s mapou</p> </li> <li> <p></p> <p>sd\u00edlet data prost\u0159ednictv\u00edm webu (syst\u00e9m ArcGIS Online, webov\u00e9 mapov\u00e9 aplikace)</p> </li> <li> <p></p> <p>publikovat webov\u00e9 mapov\u00e9 aplikace s vyu\u017eit\u00ed open-source softwaru QGIS</p> </li> </ul> <p> </p>"},{"location":"#doporucena-literatura","title":"Doporu\u010den\u00e1 literatura","text":"<ul> <li>N\u00e9tek, R. (2020): Webov\u00e1 kartografie: Specifika tvorby interaktivn\u00edch map na webu. Univerzita Palack\u00e9ho v Olomouci.</li> <li>Mikl\u00edn, J. a kol (2018): Tvorba map. Ostravsk\u00e1 univerzita.</li> <li>Leaflet: An Open-Source JavaScript Library for Interactive Maps.</li> <li>ArcGIS Maps SDK for JavaScript. Esri.</li> </ul>"},{"location":"#prednasky","title":"P\u0159edn\u00e1\u0161ky","text":"<p>jsou sp\u00ed\u0161e formou workshopu a bezprost\u0159edn\u011b p\u0159edch\u00e1zej\u00ed cvi\u010den\u00edm, s nimi\u017e se mnohdy prol\u00ednaj\u00ed</p> <p>Ing. Tom\u00e1\u0161 Janata, Ph.D. | Ing. Franti\u0161ek Mu\u017e\u00edk</p> <ol> <li>Motivace k webov\u00e9 kartografii, \u00favod. P\u0159edstaven\u00ed prost\u0159ed\u00ed a technik. P\u0159\u00edstupy k tvorb\u011b webov\u00e9ho obsahu. Webov\u00fd server, typy server\u016f. Hosting</li> <li>Webov\u00fd server \u2013 konfigurace. DNS, propojen\u00ed obsahu s dom\u00e9nou. Z\u00e1klady JavaScript \u2013 datov\u00e9 typy, prom\u011bnn\u00e9. Funkce, pole, \u0159et\u011bzce, modern\u00ed oper\u00e1tory, cykly. DevTools, konzole, debug, responsivita.</li> <li>Z\u00e1klady JavaScript \u2013 DOM, asynchronn\u00ed p\u0159enos, ud\u00e1losti, objektov\u00e9 typy. JSON, odkazov\u00e1n\u00ed do soubor\u016f a na\u010d\u00edt\u00e1n\u00ed ze soubor\u016f.</li> <li>Mapov\u00e9 knihovny \u2013 Leaflet, OpenLayers, MapTiler. Leaflet \u2013 z\u00e1kladn\u00ed informace. Leaflet \u2013 mapov\u00fd objekt, symbolika, prostorov\u00e9 dotazov\u00e1n\u00ed, pop-up. Mapov\u00e9 elementy a rozd\u00edly oproti konven\u010dn\u00ed kartografii.</li> <li>Tvorba pokro\u010dilej\u0161\u00edch aplikac\u00ed v Leaflet</li> <li>Vstupn\u00ed a v\u00fdstupn\u00ed form\u00e1ty soubor\u016f. GeoJSON, souborov\u00e9 datab\u00e1ze, GeoPackage. Vektorov\u00e9 a rastrov\u00e9 dla\u017edice</li> <li>Javascriptov\u00e9 knihovny a prost\u0159ed\u00ed pro tvorbu map. D3JS.</li> <li>Serverov\u00e9 fungov\u00e1n\u00ed, nastaven\u00ed, \u0161ir\u0161\u00ed vztahy webov\u00e9ho mapov\u00e1n\u00ed. Apache, IIS</li> <li>Z\u00e1klady ArcGIS JavaScript API. Pr\u00e1ce s WebMap</li> <li>ArcGIS JavaScript API \u2013 pokro\u010dil\u00e9 mo\u017enosti. Feature Collection</li> <li>Lad\u011bn\u00ed a \u0161k\u00e1lov\u00e1n\u00ed aplikac\u00ed. Dal\u0161\u00ed API prost\u0159ed\u00ed \u2013 CARTO.db, Mapbox aj. MapTiler, OSM</li> </ol>"},{"location":"#cviceni","title":"Cvi\u010den\u00ed","text":"<p>Ing. Tom\u00e1\u0161 Janata, Ph.D. | Ing. Franti\u0161ek Mu\u017e\u00edk</p> <ol> <li>\u00daloha 1 \u2013 Z\u00e1klad HTML. Tvorba webov\u00e9 formy \u017eivotopisu v prost\u0159ed\u00ed Glitch </li> <li>Z\u00e1klady pr\u00e1ce s CSS. Z\u00e1klady JavaScriptu </li> <li>\u00daloha 2 \u2013 VS Code. Mapov\u00e1 aplikace v prost\u0159ed\u00ed Leaflet </li> <li>GeoJSON. Tvorba kartogramu v Leaflet </li> <li>\u00daloha 2A \u2013 Knihovna D3.js </li> <li>Propojen\u00ed Leaflet a D3.js. Kartodiagram </li> <li>Windows server (IIS) \u2013 konfigurace vlastn\u00edho prostoru </li> <li>\u00daloha 3\u2013 Z\u00e1klady ArcGIS JavaScript API. Pr\u00e1ce s WebMap. Mapov\u00e1 aplikace pomoc\u00ed ArcGIS API </li> <li>Pokro\u010dilej\u0161\u00ed pr\u00e1ce s ArcGIS JavaScript API </li> <li>Finalizace aplikace pomoc\u00ed ArcGIS JavaScript API </li> <li>\u00daloha 4 \u2013 Jednoduch\u00e1 aplikace pomoc\u00ed GISQuick  </li> </ol>"},{"location":"custom_styles/","title":"P\u0159ehled vlastn\u00edch styl\u016f (extra stylesheet)","text":"<p>STR\u00c1NKA: Charakteristika p\u0159edm\u011btu</p>"},{"location":"custom_styles/#nazev-predmetu","title":"N\u00e1zev p\u0159edm\u011btu","text":"<p>T\u0159\u00edda <code>page_title</code> zarovn\u00e1v\u00e1 na st\u0159ed a m\u011bn\u00ed v\u00e1hu fontu.</p> <pre><code># Nejlep\u0161\u00ed p\u0159edm\u011bt {.page_title}\n</code></pre>"},{"location":"custom_styles/#nejlepsi-predmet","title":"Nejlep\u0161\u00ed p\u0159edm\u011bt","text":""},{"location":"custom_styles/#mrizka-s-highlighty-predmetu","title":"M\u0159\u00ed\u017eka s highlighty p\u0159edm\u011btu","text":"<p>Stru\u010dn\u011b vyjmenovan\u00e9 nejzaj\u00edmav\u011bj\u0161\u00ed \u010d\u00e1sti vyu\u010dovan\u00e9 v r\u00e1mci p\u0159edm\u011btu</p> <p>Vych\u00e1z\u00ed z MkDocs Material \u2013 GRIDS, jen p\u0159id\u00e1v\u00e1 t\u0159\u00eddy <code>grid_icon_info</code> (kv\u016fli vertik\u00e1ln\u00edmu zarovn\u00e1n\u00ed ikony a textu) a <code>smaller_padding</code> (pro zmen\u0161en\u00ed m\u00edsta kolem okraje).</p> <p>V\u017edy 2 sloupce (na u\u017e\u0161\u00edch displej\u00edch pak jen 1), 1 ikona, text max 3 \u0159\u00e1dky (kv\u016fli vzhledu)</p> <pre><code>&lt;div class=\"grid cards grid_icon_info smaller_padding\" markdown&gt;\n\n-   :material-information:{ .xl }\n\n    Text 1\n\n-   :material-information-outline:{ .xl }\n\n    Text 2\n\n-   :material-information-box:{ .xl }\n\n    Text 3\n\n-   :material-information-box-outline:{ .xl }\n\n    Text 4\n\n&lt;/div&gt;\n</code></pre> <ul> <li> <p></p> <p>Text 1</p> </li> <li> <p></p> <p>Text 2</p> </li> <li> <p></p> <p>Text 3</p> </li> <li> <p></p> <p>Text 4</p> </li> </ul>"},{"location":"custom_styles/#galerie-predmetu","title":"Galerie p\u0159edm\u011btu","text":"<p>Nal\u00e1kat/z\u00edskat pozornost pomoc\u00ed sexy obr\u00e1zk\u016f</p> <p>T\u0159\u00edda <code>gallery_container</code> nastavuje uspo\u0159\u00e1d\u00e1n\u00ed obr\u00e1zk\u016f, t\u0159\u00edda <code>no-filter</code> vyp\u00edn\u00e1 st\u00edn pod obr\u00e1zky (ten je jinak pod ka\u017ed\u00fdm obr\u00e1zkem na str\u00e1nce)</p> <p>V\u0161echny obr\u00e1zky mus\u00ed m\u00edt stejn\u00fd pom\u011br stran (lze p\u0159\u00edpadn\u011b do budoucna vy\u0159e\u0161it jinak)</p> <p>M\u011blo by to asi b\u00fdt n\u011bco, co se v p\u0159edm\u011btu d\u011bl\u00e1. Ale to zas nebude moc sexy...</p> <pre><code>&lt;div class=\"gallery_container\" markdown&gt;\n![](https://dummyimage.com/600x350/a6dad4/009485){: .no-filter }\n![](https://dummyimage.com/600x350/009485/a6dad4){: .no-filter }\n![](https://dummyimage.com/600x350/a6dad4/009485){: .no-filter }\n![](https://dummyimage.com/600x350/009485/a6dad4){: .no-filter }\n![](https://dummyimage.com/600x350/009485/a6dad4){: .no-filter }\n![](https://dummyimage.com/600x350/a6dad4/009485){: .no-filter }\n![](https://dummyimage.com/600x350/009485/a6dad4){: .no-filter }\n![](https://dummyimage.com/600x350/a6dad4/009485){: .no-filter }\n&lt;/div&gt;\n</code></pre> <p> </p> <p></p> <p>OSTATN\u00cd STR\u00c1NKY</p>"},{"location":"custom_styles/#horizontalni-oddelovace","title":"Horizont\u00e1ln\u00ed odd\u011blova\u010de","text":""},{"location":"custom_styles/#normalni","title":"Norm\u00e1ln\u00ed:","text":"<pre><code>---\n</code></pre>"},{"location":"custom_styles/#s-vetsimi-mezerami","title":"S v\u011bt\u0161\u00edmi mezerami:","text":"<pre><code>&lt;hr class=level-2&gt;\n</code></pre>"},{"location":"custom_styles/#s-vetsimi-mezerami-a-jinou-barvou","title":"S v\u011bt\u0161\u00edmi mezerami a jinou barvou:","text":"<pre><code>&lt;hr class=level-1&gt;\n</code></pre>"},{"location":"custom_styles/#tlacitka","title":"Tla\u010d\u00edtka","text":""},{"location":"custom_styles/#normalni-tlacitko-podle-mkdocs-material","title":"Norm\u00e1ln\u00ed tla\u010d\u00edtko (podle MkDocs Material):","text":"<pre><code>[Zaj\u00edmav\u00fd zdroj](#){ .md-button }\n[Zaj\u00edmav\u00fd zdroj](#){ .md-button .md-button--primary }\n</code></pre> <p>Zaj\u00edmav\u00fd zdroj Zaj\u00edmav\u00fd zdroj</p>"},{"location":"custom_styles/#mensi-tlacitko","title":"Men\u0161\u00ed tla\u010d\u00edtko:","text":"<p>T\u0159\u00edda <code>button_smaller</code></p> <pre><code>[Zaj\u00edmav\u00fd zdroj](#){ .md-button .button_smaller}\n[Zaj\u00edmav\u00fd zdroj](#){ .md-button .md-button--primary .button_smaller}\n</code></pre> <p>Zaj\u00edmav\u00fd zdroj Zaj\u00edmav\u00fd zdroj</p>"},{"location":"custom_styles/#tlacitko-s-nazvem-domeny","title":"Tla\u010d\u00edtko s n\u00e1zvem dom\u00e9ny:","text":"<p>T\u0159\u00edda <code>server_name</code>. Horn\u00ed \u0159\u00e1dek (dom\u00e9nu) je nutn\u00e9 zabalit do tagu <code>&lt;span&gt;</code> a za n\u011bj d\u00e1t line break (<code>&lt;br&gt;</code>)</p> <pre><code>[&lt;span&gt;server.com&lt;/span&gt;&lt;br&gt;Zaj\u00edmav\u00fd zdroj](#){ .md-button .server_name}\n[&lt;span&gt;server.com&lt;/span&gt;&lt;br&gt;Zaj\u00edmav\u00fd zdroj](#){ .md-button .md-button--primary .server_name}\n</code></pre> <p>server.comZaj\u00edmav\u00fd zdroj server.comZaj\u00edmav\u00fd zdroj</p>"},{"location":"custom_styles/#tlacitko-s-ikonou-vedouci-na-cizi-web","title":"Tla\u010d\u00edtko s ikonou (vedouc\u00ed na ciz\u00ed web):","text":"<p>T\u0159\u00edda <code>external_link_icon</code>. Pou\u017e\u00edv\u00e1 to t\u0159eba idnes.cz.</p> <pre><code>[Zaj\u00edmav\u00fd zdroj](#){ .md-button .external_link_icon}\n[Zaj\u00edmav\u00fd zdroj](#){ .md-button .md-button--primary .external_link_icon}\n\n[Zaj\u00edmav\u00fd zdroj](#){ .md-button .button_smaller .external_link_icon}\n[Zaj\u00edmav\u00fd zdroj](#){ .md-button .md-button--primary .button_smaller .external_link_icon}\n</code></pre> <p>Zaj\u00edmav\u00fd zdroj Zaj\u00edmav\u00fd zdroj</p> <p>Zaj\u00edmav\u00fd zdroj Zaj\u00edmav\u00fd zdroj</p> <p>P\u0159i pou\u017eit\u00ed tla\u010d\u00edtka s n\u00e1zvem dom\u00e9ny je nutn\u00e9 pou\u017e\u00edt t\u0159\u00eddu <code>external_link_icon_small</code> (kv\u016fli velikosti ikony).</p> <pre><code>[&lt;span&gt;server.com&lt;/span&gt;&lt;br&gt;Zaj\u00edmav\u00fd zdroj](#){ .md-button .server_name .external_link_icon_small}\n[&lt;span&gt;server.com&lt;/span&gt;&lt;br&gt;Zaj\u00edmav\u00fd zdroj](#){ .md-button .md-button--primary .server_name .external_link_icon_small}\n</code></pre> <p>server.comZaj\u00edmav\u00fd zdroj server.comZaj\u00edmav\u00fd zdroj</p>"},{"location":"custom_styles/#sada-tlacitek","title":"Sada tla\u010d\u00edtek","text":"<p>Pokud je tla\u010d\u00edtek v\u00edce za sebou, lze pou\u017e\u00edt t\u0159\u00eddu <code>button_array</code>. Ta se mus\u00ed p\u0159idat odstavci (nikoli prvku), tak\u017ee je nutn\u00e9 ji ps\u00e1t na \u0159\u00e1dek pod definici tla\u010d\u00edtek. Upravuje zarovn\u00e1n\u00ed (na st\u0159ed) a velikost \u0159\u00e1dkov\u00e1n\u00ed (pokud se \u0159ada nevejde na jeden \u0159\u00e1dek). D\u00e1 se pou\u017e\u00edt, i kdy\u017e je tla\u010d\u00edtko na \u0159\u00e1dku jen jedno.</p> <pre><code>[Zaj\u00edmav\u00fd zdroj](#){ .md-button .button_smaller}\n[Zaj\u00edmav\u00fd zdroj](#){ .md-button .md-button--primary .button_smaller}\n[Zaj\u00edmav\u00fd zdroj](#){ .md-button .button_smaller .external_link_icon}\n[Zaj\u00edmav\u00fd zdroj](#){ .md-button .md-button--primary .button_smaller .external_link_icon}\n[Zaj\u00edmav\u00fd zdroj](#){ .md-button .md-button--primary}\n[Zaj\u00edmav\u00fd zdroj](#){ .md-button .button_smaller}\n[Zaj\u00edmav\u00fd zdroj](#){ .md-button .md-button--primary .button_smaller}\n[Zaj\u00edmav\u00fd zdroj](#){ .md-button .md-button--primary .button_smaller}\n[Zaj\u00edmav\u00fd zdroj](#){ .md-button .button_smaller}\n[Zaj\u00edmav\u00fd zdroj](#){ .md-button .md-button--primary .button_smaller}\n[&lt;span&gt;server.com&lt;/span&gt;&lt;br&gt;Zaj\u00edmav\u00fd zdroj](#){ .md-button .server_name}\n[&lt;span&gt;server.com&lt;/span&gt;&lt;br&gt;Zaj\u00edmav\u00fd zdroj](#){ .md-button .md-button--primary .server_name}\n[&lt;span&gt;server.com&lt;/span&gt;&lt;br&gt;Zaj\u00edmav\u00fd zdroj](#){ .md-button .server_name .external_link_icon_small}\n[Zaj\u00edmav\u00fd zdroj](#){ .md-button .button_smaller .external_link_icon}\n[Zaj\u00edmav\u00fd zdroj](#){ .md-button .md-button--primary .button_smaller .external_link_icon}\n[&lt;span&gt;server.com&lt;/span&gt;&lt;br&gt;Zaj\u00edmav\u00fd zdroj](#){ .md-button .md-button--primary .server_name .external_link_icon_small}\n{.button_array}\n</code></pre> <p>Zaj\u00edmav\u00fd zdroj Zaj\u00edmav\u00fd zdroj Zaj\u00edmav\u00fd zdroj Zaj\u00edmav\u00fd zdroj Zaj\u00edmav\u00fd zdroj Zaj\u00edmav\u00fd zdroj Zaj\u00edmav\u00fd zdroj Zaj\u00edmav\u00fd zdroj Zaj\u00edmav\u00fd zdroj Zaj\u00edmav\u00fd zdroj server.comZaj\u00edmav\u00fd zdroj server.comZaj\u00edmav\u00fd zdroj server.comZaj\u00edmav\u00fd zdroj Zaj\u00edmav\u00fd zdroj Zaj\u00edmav\u00fd zdroj server.comZaj\u00edmav\u00fd zdroj</p>"},{"location":"custom_styles/#tabulky","title":"Tabulky","text":""},{"location":"custom_styles/#tabulka-s-kompaktnejsim-zobrazenim","title":"Tabulka s kompaktn\u011bj\u0161\u00edm zobrazen\u00edm","text":"<p>T\u0159\u00edda <code>table_small_padding</code></p> <pre><code>&lt;div class=\"table_small_padding\" markdown&gt;\n| Method      | Description                          |\n| ----------- | ------------------------------------ |\n| `GET`       | :material-check:     Fetch resource  |\n| `PUT`       | :material-check-all: Update resource |\n| `DELETE`    | :material-close:     Delete resource |\n&lt;/div&gt;\n</code></pre> Method Description <code>GET</code>      Fetch resource <code>PUT</code>  Update resource <code>DELETE</code>      Delete resource"},{"location":"custom_styles/#tabulka-s-jeste-kompaktnejsim-zobrazenim","title":"Tabulka s je\u0161t\u011b kompaktn\u011bj\u0161\u00edm zobrazen\u00edm","text":"<p>T\u0159\u00edda <code>table_no_padding</code></p> <pre><code>&lt;div class=\"table_no_padding\" markdown&gt;\n| Method      | Description                          |\n| ----------- | ------------------------------------ |\n| `GET`       | :material-check:     Fetch resource  |\n| `PUT`       | :material-check-all: Update resource |\n| `DELETE`    | :material-close:     Delete resource |\n&lt;/div&gt;\n</code></pre> Method Description <code>GET</code>      Fetch resource <code>PUT</code>  Update resource <code>DELETE</code>      Delete resource"},{"location":"custom_styles/#tabulka-bez-zahlavi","title":"Tabulka bez z\u00e1hlav\u00ed","text":"<p>T\u0159\u00edda <code>table_headerless</code>, z\u00e1hlav\u00ed se p\u0159esto mus\u00ed vyplnit (jinak se tabulka nevytvo\u0159\u00ed), lze ho nechat pr\u00e1zdn\u00e9</p> <pre><code>&lt;div class=\"table_headerless\" markdown&gt;\n|             |                                      |\n| ----------- | ------------------------------------ |\n| `GET`       | :material-check:     Fetch resource  |\n| `PUT`       | :material-check-all: Update resource |\n| `DELETE`    | :material-close:     Delete resource |\n&lt;/div&gt;\n</code></pre> <code>GET</code>      Fetch resource <code>PUT</code>  Update resource <code>DELETE</code>      Delete resource"},{"location":"custom_styles/#tabulka-zarovnana-na-stred","title":"Tabulka zarovnan\u00e1 na st\u0159ed","text":"<p>T\u0159\u00edda <code>table_centered</code></p> <pre><code>&lt;div class=\"table_centered\" markdown&gt;\n| Method      | Description                          |\n| ----------- | ------------------------------------ |\n| `GET`       | :material-check:     Fetch resource  |\n| `PUT`       | :material-check-all: Update resource |\n| `DELETE`    | :material-close:     Delete resource |\n&lt;/div&gt;\n</code></pre> Method Description <code>GET</code>      Fetch resource <code>PUT</code>  Update resource <code>DELETE</code>      Delete resource"},{"location":"custom_styles/#obrazky","title":"Obr\u00e1zky","text":""},{"location":"custom_styles/#sada-obrazku-s-ikonami","title":"Sada obr\u00e1zk\u016f s ikonami","text":"<p>T\u0159\u00edda <code>process_container</code>, obr\u00e1zky jsou v\u017edy pouze na jednom \u0159\u00e1dku (na u\u017e\u0161\u00edm displeji se zmen\u0161\u00ed, ale nezalamuj\u00ed se), jejich maxim\u00e1ln\u00ed velikost je 150 px, mezery mezi nimi se m\u011bn\u00ed v z\u00e1vislosti na \u0161\u00ed\u0159ce displeje.</p> <pre><code>![](https://dummyimage.com/600x350/a6dad4/009485)\n![](https://dummyimage.com/600x350/009485/a6dad4)\n![](https://dummyimage.com/600x350/a6dad4/009485)\n{.process_container}\n</code></pre> <p> </p> <p>Obr\u00e1zky se t\u0159\u00eddou <code>process_icon</code> slou\u017e\u00ed jako ikony mezi obr\u00e1zky. Lze tak vyj\u00e1d\u0159it nap\u0159. proces pracovn\u00edho postupu. Ikony m\u011bn\u00ed barvu v tmav\u00e9m re\u017eimu.</p> <pre><code>![](https://dummyimage.com/600x350/a6dad4/009485)\n![](../assets/cviceni1/arrow.svg){.off-glb .process_icon}\n![](https://dummyimage.com/600x350/009485/a6dad4)\n![](../assets/cviceni1/arrow.svg){.off-glb .process_icon}\n![](https://dummyimage.com/600x350/a6dad4/009485)\n{.process_container}\n</code></pre> <p> </p> <p>T\u0159\u00edda <code>off-glb</code> vyp\u00edn\u00e1 efekt \"GLightBox\", t\u0159\u00edda <code>no-filter</code> vyp\u00edn\u00e1 st\u00edn pod obr\u00e1zky (ten je jinak pod ka\u017ed\u00fdm obr\u00e1zkem na str\u00e1nce)</p>"},{"location":"custom_styles/#zvyrazneni-textu","title":"Zv\u00fdrazn\u011bn\u00ed textu","text":""},{"location":"custom_styles/#zmena-barvy","title":"Zm\u011bna barvy","text":"<p>T\u0159\u00edda <code>primary_color</code> zm\u011bn\u00ed barvu textu na prim\u00e1rn\u00ed barvu webu. T\u0159\u00eddu lze pou\u017e\u00edt pouze na text uzav\u0159en\u00fd mezi tagy. Aby bylo k\u00f3du m\u00e9n\u011b, d\u00e1 se pou\u017e\u00edt odd\u011blen\u00ed pou\u017e\u00edvan\u00e9 pro tu\u010dn\u00e9 p\u00edsmo \u010di kurz\u00edvu a n\u00e1sledn\u011b efekt tu\u010dn\u00e9ho p\u00edsma \u010di kurz\u00edvy potla\u010dit t\u0159\u00eddou <code>no-dec</code>.</p> <pre><code>Katedra geomatiky se zab\u00fdv\u00e1 \n_:material-globe-model: geografick\u00fdmi informa\u010dn\u00edmi syst\u00e9my_{.primary_color}, \n__:material-satellite-variant: d\u00e1lkov\u00fdm pr\u016fzkumem Zem\u011b__{.primary_color}, \n_:octicons-device-camera-video-16: geodetick\u00fdmi p\u0159\u00edstroji_{.no-dec .primary_color}, \n__:material-map-outline: katastrem nemovitost\u00ed__{.no-dec .primary_color} a podobn\u011b.\n</code></pre> <p>Katedra geomatiky se zab\u00fdv\u00e1  geografick\u00fdmi informa\u010dn\u00edmi syst\u00e9my,  d\u00e1lkov\u00fdm pr\u016fzkumem Zem\u011b,  geodetick\u00fdmi p\u0159\u00edstroji,  katastrem nemovitost\u00ed a podobn\u011b.</p>"},{"location":"custom_styles/#podtrzeni-textu-s-sedym-pozadim","title":"Podtr\u017een\u00ed textu s \u0161ed\u00fdm pozad\u00edm","text":"<p>T\u0159\u00edda <code>underlined</code> nastav\u00ed spodn\u00ed podtr\u017een\u00ed v prim\u00e1rn\u00ed barv\u011b webu. T\u0159\u00eddu lze pou\u017e\u00edt pouze na text uzav\u0159en\u00fd mezi tagy. Aby bylo k\u00f3du m\u00e9n\u011b, d\u00e1 se pou\u017e\u00edt odd\u011blen\u00ed pou\u017e\u00edvan\u00e9 pro tu\u010dn\u00e9 p\u00edsmo \u010di kurz\u00edvu a n\u00e1sledn\u011b efekt tu\u010dn\u00e9ho p\u00edsma \u010di kurz\u00edvy potla\u010dit t\u0159\u00eddou <code>no-dec</code>. Zv\u00fdrazn\u011bn\u00fd text se nezalamuje.</p> <pre><code>Katedra geomatiky se zab\u00fdv\u00e1\n_:material-globe-model: geografick\u00fdmi informa\u010dn\u00edmi syst\u00e9my_{.underlined}, \n__:material-satellite-variant: d\u00e1lkov\u00fdm pr\u016fzkumem Zem\u011b__{.underlined}, \n_:octicons-device-camera-video-16: geodetick\u00fdmi p\u0159\u00edstroji_{.no-dec .underlined}, \n__:material-map-outline: katastrem nemovitost\u00ed__{.no-dec .underlined} a podobn\u011b.\n</code></pre> <p>Katedra geomatiky se zab\u00fdv\u00e1  geografick\u00fdmi informa\u010dn\u00edmi syst\u00e9my  d\u00e1lkov\u00fdm pr\u016fzkumem Zem\u011b  geodetick\u00fdmi p\u0159\u00edstroji  katastrem nemovitost\u00ed a podobn\u011b.</p>"},{"location":"custom_styles/#obtazeni-textu-s-sedym-pozadim","title":"Obta\u017een\u00ed textu s \u0161ed\u00fdm pozad\u00edm","text":"<p>T\u0159\u00edda <code>outlined</code> nastav\u00ed celkov\u00e9 ohrani\u010den\u00ed v prim\u00e1rn\u00ed barv\u011b webu. T\u0159\u00eddu lze pou\u017e\u00edt pouze na text uzav\u0159en\u00fd mezi tagy. Aby bylo k\u00f3du m\u00e9n\u011b, d\u00e1 se pou\u017e\u00edt odd\u011blen\u00ed pou\u017e\u00edvan\u00e9 pro tu\u010dn\u00e9 p\u00edsmo \u010di kurz\u00edvu a n\u00e1sledn\u011b efekt tu\u010dn\u00e9ho p\u00edsma \u010di kurz\u00edvy potla\u010dit t\u0159\u00eddou <code>no-dec</code>. Zv\u00fdrazn\u011bn\u00fd text se nezalamuje.</p> <pre><code>Katedra geomatiky se zab\u00fdv\u00e1\n_:material-globe-model: geografick\u00fdmi informa\u010dn\u00edmi syst\u00e9my_{.outlined}, \n__:material-satellite-variant: d\u00e1lkov\u00fdm pr\u016fzkumem Zem\u011b__{.outlined}, \n_:octicons-device-camera-video-16: geodetick\u00fdmi p\u0159\u00edstroji_{.no-dec .outlined}, \n__:material-map-outline: katastrem nemovitost\u00ed__{.no-dec .outlined} a podobn\u011b.\n</code></pre> <p>Katedra geomatiky se zab\u00fdv\u00e1  geografick\u00fdmi informa\u010dn\u00edmi syst\u00e9my  d\u00e1lkov\u00fdm pr\u016fzkumem Zem\u011b  geodetick\u00fdmi p\u0159\u00edstroji  katastrem nemovitost\u00ed a podobn\u011b.</p>"},{"location":"custom_styles/#obtazeni-textu-s-sedym-pozadim-a-fontem-kodu","title":"Obta\u017een\u00ed textu s \u0161ed\u00fdm pozad\u00edm a fontem k\u00f3du","text":"<p>T\u0159\u00edda <code>outlined_code</code> nastav\u00ed celkov\u00e9 ohrani\u010den\u00ed v prim\u00e1rn\u00ed barv\u011b webu a font ve stylu <code>Code Blocks</code>. T\u0159\u00eddu lze pou\u017e\u00edt pouze na text uzav\u0159en\u00fd mezi tagy. Aby bylo k\u00f3du m\u00e9n\u011b, d\u00e1 se pou\u017e\u00edt odd\u011blen\u00ed pou\u017e\u00edvan\u00e9 pro tu\u010dn\u00e9 p\u00edsmo \u010di kurz\u00edvu. Zde nen\u00ed nutn\u00e9 p\u0159id\u00e1vat t\u0159\u00eddu <code>no-dec</code> potla\u010duj\u00edc\u00ed efekty tu\u010dn\u00e9ho p\u00edsma \u010di kurz\u00edvy, to prob\u011bhne automaticky. Zv\u00fdrazn\u011bn\u00fd text se nezalamuje.</p> <pre><code>Katedra geomatiky se zab\u00fdv\u00e1 \n_:material-globe-model: geografick\u00fdmi informa\u010dn\u00edmi syst\u00e9my_{.outlined_code} \n__:material-satellite-variant: d\u00e1lkov\u00fdm pr\u016fzkumem Zem\u011b__{.outlined_code} \n_:octicons-device-camera-video-16: geodetick\u00fdmi p\u0159\u00edstroji_{.outlined_code} \n__:material-map-outline: katastrem nemovitost\u00ed__{.outlined_code} a podobn\u011b.\n</code></pre> <p>Katedra geomatiky se zab\u00fdv\u00e1  geografick\u00fdmi informa\u010dn\u00edmi syst\u00e9my  d\u00e1lkov\u00fdm pr\u016fzkumem Zem\u011b  geodetick\u00fdmi p\u0159\u00edstroji  katastrem nemovitost\u00ed a podobn\u011b.</p>"},{"location":"custom_styles/#ikona-pred-textem","title":"Ikona p\u0159ed textem","text":"<p>Pro n\u011bkter\u00e1 \u010dast\u00e1 slova lze pou\u017e\u00edt zv\u00fdrazn\u011bn\u00ed ikonou. T\u0159\u00eddu lze pou\u017e\u00edt pouze na text uzav\u0159en\u00fd mezi tagy. Aby bylo k\u00f3du m\u00e9n\u011b, d\u00e1 se pou\u017e\u00edt odd\u011blen\u00ed pou\u017e\u00edvan\u00e9 pro tu\u010dn\u00e9 p\u00edsmo \u010di kurz\u00edvu a n\u00e1sledn\u011b efekt tu\u010dn\u00e9ho p\u00edsma \u010di kurz\u00edvy potla\u010dit t\u0159\u00eddou <code>no-dec</code>. Efekt je mo\u017en\u00e9 podpo\u0159it i nap\u0159. zm\u011bnou barvy (viz v\u00fd\u0161e).</p> <ul> <li>nap\u0159. (t\u0159\u00edda <code>icon-example</code>):</li> </ul> <pre><code>_nap\u0159._{.primary_color .icon-example .no-dec}\n</code></pre> <p>nap\u0159.</p> <ul> <li>pozor (t\u0159\u00edda <code>icon-exclm</code>):</li> </ul> <pre><code>__pozor__{style=\"color:#c22521;\" .icon-exclm .no-dec}\n</code></pre> <p>pozor</p>"},{"location":"custom_styles/#zalozky-tabs","title":"Z\u00e1lo\u017eky (Tabs)","text":""},{"location":"custom_styles/#zalozky-zarovnane-na-stred","title":"Z\u00e1lo\u017eky zarovnan\u00e9 na st\u0159ed","text":"<p>T\u0159\u00edda <code>centered_tab_labels</code></p> <pre><code>&lt;div class=\"centered_tab_labels\" markdown&gt;\n=== \"Z\u00e1lo\u017eka 1\"\n\n    ![](https://dummyimage.com/600x350/a6dad4/009485)\n    ![](https://dummyimage.com/600x350/009485/a6dad4)\n    ![](https://dummyimage.com/600x350/a6dad4/009485)\n    {.process_container}\n\n    &lt;figcaption&gt;Popisek obr\u00e1zku&lt;/figcaption&gt;\n\n=== \"Z\u00e1lo\u017eka 2\"\n\n    ![](https://dummyimage.com/600x350/a6dad4/009485)\n    ![](https://dummyimage.com/600x350/009485/a6dad4)\n    {.process_container}\n\n    &lt;figcaption&gt;Popisek obr\u00e1zku&lt;/figcaption&gt;\n\n=== \"Z\u00e1lo\u017eka 3\"\n\n    ![](https://dummyimage.com/600x350/a6dad4/009485)\n    {.process_container}\n\n    &lt;figcaption&gt;Popisek obr\u00e1zku&lt;/figcaption&gt;\n&lt;/div&gt;\n</code></pre> Z\u00e1lo\u017eka 1Z\u00e1lo\u017eka 2Z\u00e1lo\u017eka 3 <p> </p> <p>Popisek obr\u00e1zku</p> <p> </p> <p>Popisek obr\u00e1zku</p> <p></p> <p>Popisek obr\u00e1zku</p>"},{"location":"custom_styles/#admonitions-custom","title":"Admonitions (custom)","text":""},{"location":"custom_styles/#poznamka-note-grey","title":"Pozn\u00e1mka (note-grey)","text":"<pre><code>&lt;div class=\"table_centered table_no_padding\" markdown&gt;\n???+ note-grey \"Pozn\u00e1mka\"\n\n    Libovoln\u00fd text, _nap\u0159._{.primary_color .icon-example .no-dec} __tu\u010dn\u00e9 p\u00edsmo__, _kurz\u00edva_, `k\u00f3d`, _:material-format-color-highlight: zv\u00fdrazn\u011bn\u00ed_{.no-dec .outlined} obr\u00e1zek\n\n    ![](https://dummyimage.com/600x350/a6dad4/009485)\n    {.process_container}\n\n    Tabulka (v\u00fd\u0161e zm\u00edn\u011bn\u00e9 \u00fapravy se mus\u00ed pou\u017e\u00edt v `div` o \u00farove\u0148 v\u00fd\u0161e!)\n\n    | z\u00e1hlav\u00ed |    z\u00e1hlav\u00ed    |\n    | ------- | ------------- |\n    | obsah   | obsah tabulky |\n    | obsah   | obsah tabulky |\n&lt;/div&gt;\n</code></pre> Pozn\u00e1mka <p>Libovoln\u00fd text, nap\u0159. tu\u010dn\u00e9 p\u00edsmo, kurz\u00edva, <code>k\u00f3d</code>,  zv\u00fdrazn\u011bn\u00ed obr\u00e1zek</p> <p></p> <p>Tabulka (v\u00fd\u0161e zm\u00edn\u011bn\u00e9 \u00fapravy se mus\u00ed pou\u017e\u00edt v <code>div</code> o \u00farove\u0148 v\u00fd\u0161e!)</p> z\u00e1hlav\u00ed z\u00e1hlav\u00ed obsah obsah tabulky obsah obsah tabulky"},{"location":"custom_styles/#admonition-v-primarni-barve-webu-task-fg-color","title":"Admonition v prim\u00e1rn\u00ed barv\u011b webu (task-fg-color)","text":"<pre><code>???+ task-fg-color \"\u00dakol\"\n\n    Obsah \u00fakolu\n</code></pre> \u00dakol <p>Obsah \u00fakolu</p> <p>v\u00edce o admonitions</p> <p></p>"},{"location":"cviceni/cviceni1/","title":"Cvi\u010den\u00ed 1","text":""},{"location":"cviceni/cviceni1/#zakladni-popis-tvorby-webove-stranky","title":"Z\u00e1kladn\u00ed popis tvorby webov\u00e9 str\u00e1nky","text":"<p>Ka\u017ed\u00e1 str\u00e1nka je na disku nebo na serveru ulo\u017eena ve form\u011b zdrojov\u00e9ho k\u00f3du. Ten k\u00f3d je psan\u00fd v jazyce HTML.</p> <p>K\u00f3d HTML se upravuje pomoc\u00ed editoru. V tomto cvi\u010den\u00ed se sezn\u00e1m\u00edme s webov\u00fdm prost\u0159ed\u00edm Glitch, nicm\u00e9n\u011b po v\u011bt\u0161inu semestru budeme pracovat ve VS Code. Zdrojov\u00fd k\u00f3d se uchov\u00e1v\u00e1 na disku, ze kter\u00e9ho je otev\u0159en v prohl\u00ed\u017ee\u010di.</p> <p>Str\u00e1nka se skl\u00e1d\u00e1 ze 3 z\u00e1kladn\u00edch \u010d\u00e1st\u00ed k\u00f3du:</p> <ul> <li> <p>HTML (HyperText Markup Language)</p> <ul> <li>definice z\u00e1kladn\u00ed struktury str\u00e1nky</li> <li> <p>vyu\u017eit\u00ed zna\u010dkov\u00e9ho z\u00e1pisu (tagy) pro ozna\u010den\u00ed r\u016fzn\u00fdch \u010d\u00e1st\u00ed str\u00e1nky(nap\u0159. <code>&lt;h1&gt;</code>, <code>&lt;p&gt;</code>, <code>&lt;img&gt;</code>) </p> <pre><code>&lt;h1&gt;Moje prvn\u00ed webov\u00e1 str\u00e1nka&lt;/h1&gt;\n&lt;p&gt;Toto je odstavec textu.&lt;/p&gt;\n\n&lt;!-- Toto je koment\u00e1\u0159 v html--&gt;\n&lt;img src=\"obrazek.jpg\" alt=\"Popis obr\u00e1zku\"&gt;\n</code></pre> </li> </ul> </li> <li> <p>CSS (Cascading Style Sheets)</p> <ul> <li>editace stylu str\u00e1nky</li> <li>definice barev, typ\u016f p\u00edsma, font\u016f, velikostn\u00ed \u010di rozlo\u017een\u00ed</li> <li>CSS k\u00f3d m\u016f\u017ee b\u00fdt vlo\u017een p\u0159\u00edmo do HTML nebo na n\u011bj lze odk\u00e1zat a udr\u017eovat k\u00f3d v odd\u011blen\u00e9m souboru</li> <li>kask\u00e1dov\u00e9 styly     <pre><code>/* Toto je koment\u00e1\u0159 v CSS */\nbody {\n    background-color: lightblue;\n}\n\nh1 {\n    color: navy;\n    text-align: center;\n}\n</code></pre></li> </ul> </li> <li> <p>JavaScript</p> <ul> <li>p\u0159id\u00e1v\u00e1 do webov\u00e9 str\u00e1nky dynamiku a interaktivitu</li> <li> <p>Umo\u017e\u0148uje reagovat na u\u017eivatelsk\u00e9 akce (kliknut\u00ed, pohyb my\u0161i), m\u011bnit obsah str\u00e1nky a vytv\u00e1\u0159et animace</p> <pre><code>// Toto je koment\u00e1\u0159 v JS\nfunction zmenBarvu() {\n    document.body.style.backgroundColor = \"pink\";\n}\n</code></pre> </li> </ul> </li> </ul> <p> Zobrazen\u00ed zdrojov\u00e9ho k\u00f3du str\u00e1nky</p> <p>Pokud si chceme prohl\u00e9dnout zdrojov\u00fd k\u00fad dan\u00e9 str\u00e1nky, sta\u010d\u00ed kliknout prav\u00fdm tla\u010d\u00edtkem a zobrazit zdrojov\u00fd k\u00f3d v nov\u00e9m okn\u011b. </p> <p>Pro pokro\u010dilej\u0161\u00ed zobrazen\u00ed v\u010detn\u011b konzole a v\u00fdvoj\u00e1\u0159sk\u00fdch nastaven\u00ed vyvol\u00e1me stiskem kl\u00e1vesy F12. </p> <p> Zobrazen\u00ed zdrojov\u00e9ho k\u00f3du str\u00e1nky </p>"},{"location":"cviceni/cviceni1/#popis-html","title":"Popis HTML","text":"<p>HTML (Hypertext Markup Language), je hypertextov\u00fd zna\u010dkovac\u00ed jazyk ur\u010den\u00fd k vytv\u00e1\u0159en\u00ed jednoduch\u00fdch webov\u00fdch str\u00e1nek. Od p\u0159elomu 80. a 90. let je vyv\u00edjen a nep\u0159etr\u017eit\u011b pou\u017e\u00edv\u00e1n. Aktu\u00e1ln\u011b vyu\u017e\u00edvan\u00e1 verze je HTML 5.</p> <p>Spole\u010dn\u011b s jazykem HTML vznikl HTTP protokol, kter\u00fd zaji\u0161\u0165uje komunikaci mezi servery a p\u0159enosy soubor\u016f. Zabezpe\u010den\u00e1 verze protokolu HTTPS je nov\u011bj\u0161\u00ed verze zaji\u0161\u0165uj\u00edc\u00ed komunikaci mezi webov\u00fdm serverem a po\u010d\u00edta\u010dem. Oproti p\u016fvodn\u00ed verzi HTTP \u0161ifruje p\u0159en\u00e1\u0161en\u00e1 data, \u010d\u00edm\u017e sni\u017euje riziko zneu\u017eit\u00ed osobn\u00edch \u00fadaj\u016f nebo odposlech komunikace.</p> <p>HTML k\u00f3d se z velk\u00e9 \u010d\u00e1sti skl\u00e1d\u00e1 z tag\u016f, neboli definovan\u00fdch zna\u010dek. Tag\u016fm p\u0159i\u0159azujeme atributy a hodnoty, je\u017e jednotliv\u00fdm prvk\u016fm str\u00e1nky p\u0159ikl\u00e1daj\u00ed ur\u010ditou roli. Prost\u0159ednictv\u00edm HTML tag\u016f tak nap\u0159\u00edklad ur\u010dujeme, kde budou odkazy a kam budou odkazovat nebo kde bude obr\u00e1zek a odkud je bude prohl\u00ed\u017ee\u010d \u010derpat.</p> <p>Tagy se vl\u00e1daj\u00ed do \u0161pi\u010dat\u00fdch z\u00e1vorek, p\u0159i\u010dem\u017e je d\u011bl\u00edme na p\u00e1rov\u00e9 a nep\u00e1rov\u00e9.</p> <ul> <li> <p> P\u00e1rov\u00e9 tagy</p> <p>Musej\u00ed b\u00fdt ukon\u010deny lom\u00edtkem a p\u016fvodn\u00edm tagem.</p> <pre><code>&lt;h1&gt; Toto je nadpis &lt;/h1&gt; \n</code></pre> <p>Setk\u00e1v\u00e1me se s nimi nej\u010dast\u011bji.</p> </li> <li> <p> Nep\u00e1rov\u00e9 tagy</p> <p>Ukon\u010den\u00ed druh\u00fdm tagem nepot\u0159ebuj\u00ed.</p> <pre><code>&lt;img src=\"obrazek.jpg\"&gt; \n</code></pre> </li> </ul> <p>Tagy je do sebe mo\u017en\u00e9 vz\u00e1jemn\u011b vkl\u00e1dat, p\u0159i\u010dem\u017e d\u016fle\u017eit\u00e9 je db\u00e1t na spr\u00e1vnou syntax, \u010ditelnost k\u00f3du a nezapom\u00ednat p\u00e1rov\u00e9 tagy ukon\u010dovat. <pre><code>&lt;header&gt;\n    &lt;h1&gt;Ing. Franti\u0161ek Mu\u017e\u00edk&lt;/h1&gt;\n&lt;/header&gt;\n</code></pre></p> <p> Vyu\u017eit\u00ed AI pro usnadn\u011bn\u00ed psan\u00ed HTML</p> <p>Psan\u00ed HTML k\u00f3du je ide\u00e1ln\u00ed p\u0159\u00edle\u017eitost\u00ed pro uplatn\u011bn\u00ed um\u011bl\u00e9 inteligence (ChatGPT, Gemini). </p> <p>Tyto n\u00e1stroje pom\u00e1haj\u00ed v hled\u00e1n\u00ed chyb nebo t\u0159eba pro vygenerov\u00e1n\u00ed z\u00e1kladn\u00ed struktury str\u00e1nky, kterou lze d\u00e1le upavit pomoc\u00ed vlastn\u00edch znalost\u00ed. </p> <p>AI nenahrad\u00ed va\u0161e znalosti, pouze pom\u016f\u017ee v jejich efektivn\u011bj\u0161\u00ed aplikaci!</p> <p> Uk\u00e1zka n\u00e1vrhu jednoduch\u00e9 HTML str\u00e1nky pomoc\u00ed AI Gemini </p>"},{"location":"cviceni/cviceni1/#zakladni-struktura-webove-stranky-v-html","title":"Z\u00e1kladn\u00ed struktura webov\u00e9 str\u00e1nky v html","text":"<pre><code>&lt;!DOCTYPE html&gt; &lt;!-- Deklarace typu dokumentu --&gt;\n&lt;html&gt; &lt;!-- Ko\u0159enov\u00fd element, kter\u00fd zast\u0159e\u0161uje cel\u00fd dokument --&gt;\n&lt;head&gt; &lt;!-- Hlavi\u010dka ur\u010duj\u00edc\u00ed metadata. Typicky obsahuje, scripty, odkaz na CSS \u010di titulek --&gt;\n    &lt;meta charset=\"UTF-8\"&gt; &lt;!-- K\u00f3dov\u00e1n\u00ed textu --&gt;\n    &lt;meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"&gt;\n    &lt;title&gt;Moje prvn\u00ed HTML str\u00e1nka&lt;/title&gt; &lt;!-- Titulek str\u00e1nky zobrazen\u00fd v n\u00e1zvu okna --&gt;\n&lt;/head&gt;\n&lt;body&gt; &lt;!-- Zde je zaps\u00e1n obsah str\u00e1nky --&gt;\n\n    &lt;h1&gt;Ahoj sv\u011bte!&lt;/h1&gt; &lt;!-- Nadpis --&gt;\n    &lt;p&gt;Toto je prvn\u00ed odstavec na m\u00e9 str\u00e1nce.&lt;/p&gt; &lt;!-- Odstavec textu --&gt;\n\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre> <p> Obsah webov\u00e9 str\u00e1nky vytvo\u0159en\u00fd k\u00f3dem v\u00fd\u0161e</p>"},{"location":"cviceni/cviceni1/#popis-prostredi-glitch","title":"Popis prost\u0159ed\u00ed Glitch","text":"<p>Glitch.com je online platforma, kter\u00e1 umo\u017e\u0148uje snadno vytv\u00e1\u0159et, upravovat a sd\u00edlet webov\u00e9 projekty. V podstat\u011b se jedn\u00e1 o online editor, ve kter\u00e9m lze ps\u00e1t k\u00f3d, vid\u011bt v\u00fdsledky okam\u017eit\u011b a dokonce spolupracovat s ostatn\u00edmi. </p> <p>Po registraci vytvo\u0159\u00edme nov\u00fd projekt stisknut\u00edm tla\u010d\u00edtka New project -&gt; mo\u017enost glitch-hello-website.</p> <p>Ve\u0161ker\u00e9 na\u0161e projekty najdeme na hlavn\u00ed str\u00e1nce v z\u00e1lo\u017ece Dashboard.</p> <p> Obsah webov\u00e9 str\u00e1nky vytvo\u0159en\u00fd k\u00f3dem v\u00fd\u0161e</p> <p>Po vygenerov\u00e1n\u00ed str\u00e1nky je mo\u017en\u00e9 v z\u00e1lo\u017ece Settings -&gt; Edit project details zm\u011bnit jej\u00ed n\u00e1zev na n\u011bco rozumn\u00e9ho, p\u0159i\u010dem\u017e str\u00e1nka v\u017edy bude hostovan\u00e1 na dom\u00e9n\u011b Glitch a odkaz bude vypadat zhruba takto: https://muj-test.glitch.me/</p> <p>V lev\u00e9 \u010d\u00e1sti str\u00e1nky se nach\u00e1zej\u00ed z\u00e1lo\u017eky Settings (nastaven\u00ed), Assets (sem se umis\u0165uj\u00ed vyu\u017eit\u00e9 soubory - nap\u0159. obr\u00e1zky) a Files (pracovn\u00ed soubory).</p> <p>V prost\u0159edn\u00ed \u010d\u00e1sti se zobrazuje editor k\u00f3du a v prav\u00e9 se zobrazuje v\u00fdsledek v podob\u011b n\u00e1hledu str\u00e1nky. Pokud nen\u00ed n\u00e1hled zobrazen\u00fd, zapneme ho tla\u010d\u00edtkem Preview v doln\u00ed \u010d\u00e1sti obrazovky. \u00dapravy se ukl\u00e1daj\u00ed automaticky.</p> <p> Editace str\u00e1nky v prost\u0159ed\u00ed Glitch</p>"},{"location":"cviceni/cviceni1/#tvorba-webove-stranky-s-vlastnim-zivotopisem","title":"Tvorba webov\u00e9 str\u00e1nky s vlastn\u00edm \u017eivotopisem","text":"<p>Za\u010dneme z\u00e1kladn\u00edm k\u00f3dem, kter\u00fd n\u00e1sledn\u011b rozvineme.</p> <pre><code>&lt;!DOCTYPE html&gt; \n&lt;html&gt; \n&lt;head&gt; \n    &lt;meta charset=\"UTF-8\"&gt; \n    &lt;meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"&gt;\n    &lt;title&gt;Moje prvn\u00ed HTML str\u00e1nka&lt;/title&gt; \n&lt;/head&gt;\n&lt;body&gt; \n\n    &lt;h1&gt;Ahoj sv\u011bte!&lt;/h1&gt; \n    &lt;p&gt;Toto je prvn\u00ed odstavec na m\u00e9 str\u00e1nce.&lt;/p&gt; \n\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>"},{"location":"cviceni/cviceni1/#1-strukturovani-obsahu-pomoci-tagu","title":"1) Strukturov\u00e1n\u00ed obsahu pomoc\u00ed tag\u016f","text":"<p>Vyu\u017eijeme tag\u016f pro napln\u011bn\u00ed \u017eivotopisu obsahem. Pro jm\u00e9no vyu\u017eijeme <code>&lt;h1&gt;</code>, d\u00e1le pro text bude ur\u010den tag <code>&lt;p&gt;</code>. V\u0161e vpisujeme do tagu <code>&lt;body&gt;</code>.</p> <pre><code>...\n&lt;body&gt; \n\n    &lt;h1&gt;Ing. Franti\u0161ek Mu\u017e\u00edk&lt;/h1&gt; \n    &lt;p&gt;Email: frantisek. muzik@fsv.cvut.cz | Praha, \u010cesko&lt;/p&gt; \n\n&lt;/body&gt;\n...\n</code></pre> <p>D\u00e1le dopln\u00edme sekci <code>&lt;section&gt;</code> se vzd\u011bl\u00e1n\u00edm vzd\u011bl\u00e1n\u00ed, ve kter\u00e9 vyu\u017eijeme tagu  <code>&lt;h2&gt;</code> pro jednotliv\u00e9 nadpisy a odr\u00e1\u017eek pro popis. </p> <p>Pro popis vyu\u017eijeme ne\u010d\u00edslovan\u00fd seznam (unordered list) <code>&lt;ul&gt;</code>, do kter\u00e9ho vkl\u00e1d\u00e1me jednotliv\u00e9 polo\u017eky tagem <code>&lt;li&gt;</code>. Jestli\u017ee chceme vytvo\u0159it dal\u0161\u00ed odsko\u010denou \u0159\u00e1dku v\u00a0seznamu, pou\u017eijeme znovu p\u0159ede\u0161l\u00e9 tagy. Je velmi d\u016fle\u017eit\u00e9 dodr\u017eovat po\u0159\u00e1dek v\u00a0hierarchii, jinak se v k\u00f3du lze rychle ztratit.</p> <pre><code>...\n&lt;body&gt;\n&lt;h1&gt;Ing. Franti\u0161ek Mu\u017e\u00edk&lt;/h1&gt;\n&lt;p&gt;Email: frantisek. muzik@fsv.cvut.cz | Praha, \u010cesko&lt;/p&gt;\n\n&lt;section&gt;\n    &lt;ul&gt;\n    &lt;li&gt;\n        FSv \u010cVUT v Praze, obor Geod\u00e9zie a kartografie; specializace Geomatika\n        &lt;ul&gt;\n        &lt;li&gt;2020\u20132022&lt;/li&gt;\n        &lt;/ul&gt;\n        &lt;ul&gt;\n        &lt;li&gt;Studium ukon\u010deno st\u00e1tn\u00ed zkou\u0161kou a z\u00edsk\u00e1n\u00edm titulu Ing.&lt;/li&gt;\n        &lt;/ul&gt;\n    &lt;/li&gt;\n    &lt;/ul&gt;\n&lt;/section&gt;\n&lt;/body&gt;\n...\n</code></pre> <p> V\u00fdsledek kompilovan\u00e9ho k\u00f3du se seznamy</p>"},{"location":"cviceni/cviceni1/#2-zmena-stylu-pisma","title":"2) Zm\u011bna stylu p\u00edsma","text":"<p>Pokud chceme n\u011bjakou \u010d\u00e1st textu zv\u00fdraznit, p\u0159\u00edpadn\u011b upravit kurz\u00edvou, pak op\u011bt vyu\u017eijeme p\u0159\u00edslu\u0161n\u00e9 tagy.</p> <ul> <li> <p>tu\u010dn\u00e9 p\u00edsmo: <code>&lt;b&gt;</code> </p> </li> <li> <p>kurz\u00edva: <code>&lt;i&gt;</code></p> </li> <li> <p>zalomen\u00ed \u0159\u00e1dku: <code>&lt;br&gt;</code></p> </li> </ul> <pre><code>...\n&lt;body&gt;\n&lt;h1&gt;Ing. Franti\u0161ek Mu\u017e\u00edk&lt;/h1&gt;\n&lt;p&gt;Email: frantisek. muzik@fsv.cvut.cz | Praha, \u010cesko&lt;/p&gt;\n\n&lt;section&gt;\n    &lt;ul&gt;\n    &lt;li&gt;\n        &lt;b&gt;FSv \u010cVUT v Praze, obor Geod\u00e9zie a kartografie; &lt;i&gt;specializace Geomatika&lt;/i&gt; &lt;/b&gt;\n        &lt;ul&gt;\n        &lt;li&gt; &lt;i&gt;2020\u20132022&lt;/i&gt; &lt;/li&gt;\n        &lt;/ul&gt;\n        &lt;ul&gt;\n        &lt;li&gt;Studium ukon\u010deno st\u00e1tn\u00ed zkou\u0161kou a z\u00edsk\u00e1n\u00edm titulu Ing.&lt;/li&gt;\n        &lt;/ul&gt;\n    &lt;/li&gt;\n    &lt;/ul&gt;\n\n&lt;/section&gt;\n&lt;/body&gt;\n\n...\n</code></pre> <p> V\u00fdsledek kompilovan\u00e9ho k\u00f3du se seznamy</p>"},{"location":"cviceni/cviceni1/#2-pridani-odkazu-a-obrazku","title":"2) P\u0159id\u00e1n\u00ed odkaz\u016f a obr\u00e1zku","text":"<p>Do webov\u00e9 str\u00e1nky lze jednodu\u0161e p\u0159idat odkazy na jinou str\u00e1nku \u010di obr\u00e1zek. Na obr\u00e1zek je mo\u017en\u00e9 odkazovat jak p\u0159es jeho um\u00edst\u011bn\u00ed na disku, tak p\u0159es odkaz na webu.</p> <p>Odkaz na webovou str\u00e1nku p\u0159id\u00e1me pomoc\u00ed tagu <code>&lt;a&gt;</code>.</p> <p><code>&lt;a href=\"https://geomatics.fsv.cvut.cz/\"&gt;Webov\u00e9 str\u00e1nky katedry geomatiky&lt;/a&gt;</code></p> <p>Obr\u00e1zek se p\u0159id\u00e1v\u00e1 tagem <code>&lt;img&gt;</code>, ve kter\u00e9m lze upravit popis obr\u00e1zku \u010di jeho velikost v pixelech. </p> <p><code>&lt;img src=\"/images/ukazka_obrazek.png\" alt=\"Popis obr\u00e1zku\" width=\"500\" height=\"600\"&gt;</code></p> <p>Implementace v \u017eivotopise m\u016f\u017ee tedy vypadat n\u00e1sledovn\u011b:</p> <pre><code>...\n&lt;section&gt;\n    &lt;ul&gt;\n    &lt;li&gt;\n        &lt;b&gt;FSv \u010cVUT v Praze, obor Geod\u00e9zie a kartografie;\n            &lt;i&gt;specializace Geomatika&lt;/i&gt;\n        &lt;/b&gt;\n        &lt;ul&gt;\n            &lt;li&gt;&lt;i&gt;2020\u20132022&lt;/i&gt;&lt;/li&gt;\n        &lt;/ul&gt;\n        &lt;ul&gt;\n            &lt;li&gt;Studium ukon\u010deno st\u00e1tn\u00ed zkou\u0161kou a z\u00edsk\u00e1n\u00edm titulu Ing.&lt;/li&gt;\n        &lt;/ul&gt;\n\n        &lt;ul&gt;\n            &lt;li&gt;T\u00e9ma diplomov\u00e9 pr\u00e1ce:\n            &lt;a href=\"https://dspace.cvut.cz/handle/10467/102826\" alt=\"Zh\u016f\u0159\u00ed\"\n                &gt;Vyu\u017eit\u00ed roz\u0161\u00ed\u0159en\u00e9 reality pro vizualizaci zanikl\u00e9 obce Zh\u016f\u0159\u00ed&lt;/a&gt;\n            &lt;/li&gt;\n        &lt;/ul&gt;\n    &lt;/li&gt;\n    &lt;img src=\"https://cdn.glitch.global/7950426a-9139-4c64-82ee-8ab83f092129/obr9_app_ui.jpg?v=1736791065019\" \n    width=\"500\" &gt;\n    &lt;/ul&gt;\n&lt;/section&gt;\n...\n</code></pre> <p> P\u0159id\u00e1n\u00ed odkaz\u016f a obr\u00e1zk\u016f</p>"},{"location":"cviceni/cviceni1/#3-doplneni-stranky-o-interaktivni-mapu","title":"3) Dopln\u011bn\u00ed str\u00e1nky o\u00a0interaktivn\u00ed mapu","text":"<p>Do \u017eivotopisu m\u016f\u017eeme d\u00e1le p\u0159idat jednoduchou interaktivn\u00ed mapu s lokalitou FSv \u010cVUT z\u00a0Google Maps. V\u00a0tuto chv\u00edli tedy nebudeme tvo\u0159it vlastn\u00ed aplikaci, jen vyu\u017eijeme <code>&lt;embed&gt;</code>, co\u017e je kontejner pro extern\u00ed prvky (nap\u0159. webovou str\u00e1nku, p\u0159ehr\u00e1va\u010d m\u00e9di\u00ed \u010di mapu).</p> <p>Na Google Maps vyhled\u00e1me FSv \u010cVUT v Praze, klikneme na tla\u010d\u00edtko Sd\u00edlet a vybereme z\u00e1lo\u017eku Vlo\u017een\u00ed mapy.</p> <p> Sd\u00edlen\u00ed v\u00fd\u0159ezu Google Maps do HTML</p> <p>Vybereme velikost mapy a zkop\u00edsujeme vygenerovan\u00fd HTML k\u00f3d. Ten vlo\u017e\u00edme na po\u017eadovan\u00e9 m\u00edsto do body.</p> <pre><code>...\n&lt;iframe\n    src=\"https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d2559.044009632525!2d14.386225475700655!3d50.1041832122365!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x470b953bc00ed77d%3A0x43d70d04924c48ed!2sFakulta%20stavebn%C3%AD%20%C4%8CVUT%20v%20Praze!5e0!3m2!1scs!2scz!4v1736791843368!5m2!1scs!2scz\"\n    width=\"400\"\n    height=\"300\"\n    style=\"border: 0\"\n    allowfullscreen=\"\"\n    loading=\"lazy\"\n    referrerpolicy=\"no-referrer-when-downgrade\"\n&gt;&lt;/iframe&gt;\n...\n</code></pre> <p> Vlo\u017een\u00e1 mapa ve str\u00e1nce</p> <p> U\u017eite\u010dn\u00e9 odkazy</p> <ul> <li> <p>z\u00e1klady HTML: https://www.w3schools.com/html/html_basic.asp</p> </li> <li> <p>dal\u0161\u00ed z\u00e1klady HTML: https://www.jakpsatweb.cz/zaklady-html.html</p> </li> <li> <p>a do t\u0159etice: https://www.rascasone.com/cs/blog/html-pro-zacatecniky-jak-psat-web</p> </li> <li> <p>seznamy: https://www.jakpsatweb.cz/html/seznamy.html</p> </li> <li> <p>form\u00e1tov\u00e1n\u00ed textu: https://www.w3schools.com/html/html_formatting.asp</p> </li> </ul>"},{"location":"cviceni/cviceni11/","title":"Cvi\u010den\u00ed 11","text":"<ul> <li>QGIS \u2013 jeden z nejpou\u017e\u00edvan\u011bj\u0161\u00edch open source GIS n\u00e1stroj\u016f v praxi</li> <li>Gisquick \u2013 jedna z voln\u011b dostupn\u00fdch publika\u010dn\u00edch open source platforem pro QGIS</li> </ul>"},{"location":"cviceni/cviceni11/#priprava-projektu-v-qgis","title":"P\u0159\u00edprava projektu v QGIS","text":"<p>Nejprve mus\u00edme p\u0159ipravit z\u00e1kladn\u00ed projekt v QGIS. V ide\u00e1ln\u00edm p\u0159\u00edpad\u011b si p\u0159iprav\u00edme n\u011bkolik vektorov\u00fdch vrstev a p\u0159ipojenou WMS vrstvu.</p>"},{"location":"cviceni/cviceni11/#publikace-projektu","title":"Publikace projektu","text":"<p>Podklady: dokumentace Gisquick</p> <p>D\u016fle\u017eit\u00e9</p> <p>Pro \u00fa\u010del v\u00fduky budeme pou\u017e\u00edvat vlastn\u00ed instanci publika\u010dn\u00edho serveru Gisquick provozovan\u00e9 na http://geo102.fsv.cvut.cz:8083/.</p> <p>Po p\u0159ihl\u00e1\u0161en\u00ed se objev\u00ed profil u\u017eivatele:</p> <p></p> <p>Vytvo\u0159\u00edme nov\u00fd projekt. Objev\u00ed se \u017e\u00e1dost o instalaci z\u00e1suvn\u00e9ho modulu:</p> <p></p> <p>Pozn\u00e1mka</p> <p>Pokud se v\u00fd\u0161e uveden\u00e1 str\u00e1nka neobjev\u00ed, tak ji najdete na https://gisquick.org/plugin/</p> <p>P\u0159i instalaci postupuje podle n\u00e1vodu v dokumentaci Gisquick.</p> <p>Jeliko\u017e pracujeme v projektu s form\u00e1tem GeoPackage, tak nainstalujeme verzi z\u00e1suvn\u00e9ho modulu Gisquick s podporou dbhash. Tato verze z\u00e1suvn\u00e9ho modulu zamez\u00ed znovu nahr\u00e1v\u00e1n\u00ed datov\u00fdch zdroj\u016f ve form\u00e1tu GeoPackage nap\u0159\u00edklad p\u0159i zm\u011bn\u011b viditelnosti vrstvy.</p> <p></p> <p>Pot\u00e9 se pomoc\u00ed z\u00e1suvn\u00e9ho modulu p\u0159ihl\u00e1s\u00edme do prost\u0159ed\u00ed publika\u010dn\u00ed platformy Gisquick (<code>Web &gt; Publish in Gisquick</code>). </p> <p></p> <p>Do publika\u010dn\u00edho prost\u0159ed\u00ed platformy Gisquick n\u00e1s p\u0159esm\u011bruje tla\u010d\u00edtko <code>Open Browser</code>:</p> <p></p> <p>Po vytvo\u0159en\u00ed projektu se objev\u00ed \u00favodn\u00ed formul\u00e1\u0159 se seznamem vrstev ur\u010den\u00fdch k publikaci:</p> <p></p> <p>Nejprve oprav\u00edme p\u0159\u00edpadn\u00e9 chyby (<code>Manage Layers Names</code> &gt; <code>Generate Names</code> &gt; <code>Update QGIS Project</code>):</p> <p></p> <p>D\u00e1le povol\u00edme WFS, abychom umo\u017enili u\u017eivateli se dotazovat na vektorov\u00e9 vrstvy:</p> <p></p> <p>Datov\u00e9 vrstvy nahrajeme na publika\u010dn\u00ed server:</p> <p></p> <p></p> <p>Nastav\u00edme titulek projektu:</p> <p></p> <p>Projdeme jednotliv\u00e1 nastaven\u00ed projektu:</p> <p></p> <p>A provedeme n\u00e1sleduj\u00edc\u00ed zm\u011bny v nastaven\u00ed:</p> <ul> <li> <p>prostorov\u00fd rozsah nastav\u00edme z vrstvy \"Obce\":</p> </li> <li> <p>nastav\u00edme vhodnou m\u011b\u0159\u00edtkovou sadu:</p> <p></p> </li> <li> <p>v z\u00e1lo\u017ece <code>Layers</code> p\u0159esu\u0148te vrstvy ze skupiny \"WMS\" do <code>Base Layers</code> (je nutn\u00e9 p\u0159esunout celou skupinu)</p> </li> </ul> <p></p> <p>Tip pro pokro\u010dil\u00e9 u\u017eivatele</p> <p>Ke zrychlen\u00ed na\u010d\u00edt\u00e1n\u00ed vrstev m\u016f\u017ee doj\u00edt p\u0159i vhodn\u011b zvolen\u00e9 m\u011b\u0159\u00edtkov\u00e9 sad\u011b dle specifikace \u010c\u00daZK. P\u0159\u00edpadn\u011b lze pou\u017e\u00edt WMTS s m\u011b\u0159\u00edtkovou sadou Google Maps.</p> <p>A p\u0159ipraven\u00fd projekt publikujeme (<code>Publish</code>). Po publikaci projektu se objev\u00ed tla\u010d\u00edtko</p> <p></p> <p>kter\u00e9 n\u00e1s p\u0159esm\u011bruje do mapov\u00e9 aplikace:</p> <p></p> <p>Tip</p> <p>Ve v\u00fdchoz\u00edm nastaven\u00ed je projekt nastaven jako soukrom\u00fd. Toto nastaven\u00ed lze zm\u011bnit v <code>Permissions</code>:</p> <p></p>"},{"location":"cviceni/cviceni11/#dalsi-nastaveni-projektu","title":"Dal\u0161\u00ed nastaven\u00ed projektu","text":"<p>Zkusme zm\u011bnit n\u00e1sleduj\u00edc\u00ed nastaven\u00ed projektu:</p> <ul> <li>skryjeme CSV tabulky v z\u00e1lo\u017ece <code>Layers</code></li> </ul> <p></p> <ul> <li>nastav\u00edme viditelnost zvolen\u00fdch atribut\u016f u vrstvy \"Parcely\" (kmenov\u00e9   \u010d\u00edslo, pododd\u011blen\u00ed \u010d\u00edsla, v\u00fdm\u011bra a druh pozemku)</li> </ul> <p>Nejprve v QGISu nastav\u00edme u zvolen\u00fdch atribut\u016f aliasy (<code>Attributes Form</code> ve vlastnostech vrstvy).</p> <p></p> <p>Zm\u011bny v QGIS projektu ulo\u017e\u00edme. V nastaven\u00ed Gisquick projektu provedeme aktualizaci.</p> <p>Viditelnost atribut\u016f nastav\u00edme z z\u00e1lo\u017ece <code>Layers</code>.</p> <p>Po ulo\u017een\u00ed zm\u011bn (<code>Save</code>) znovu na\u010dteme mapovou aplikaci.</p> <p></p> <p>Po ulo\u017een\u00ed zm\u011bn se mezi podkladov\u00fdmi vrstvami jednodu\u0161e p\u0159ep\u00ednat.</p> <p></p> <p>Uk\u00e1zkovou mapovou aplikaci najdete na adrese http://geo102.fsv.cvut.cz:8083/?PROJECT=gis1/cv10</p>"},{"location":"cviceni/cviceni2/","title":"Cvi\u010den\u00ed 2","text":"<p>N\u00e1pl\u0148 tohoto cvi\u010den\u00ed navazuje na p\u0159edchoz\u00ed cvi\u010den\u00ed.</p>"},{"location":"cviceni/cviceni2/#zaklad-css","title":"Z\u00e1klad CSS","text":"<ul> <li>editace stylu str\u00e1nky</li> <li>definice barev, typ\u016f p\u00edsma, font\u016f, velikostn\u00ed \u010di rozlo\u017een\u00ed</li> <li>CSS k\u00f3d m\u016f\u017ee b\u00fdt vlo\u017een p\u0159\u00edmo do HTML nebo na n\u011bj lze odk\u00e1zat a udr\u017eovat k\u00f3d v odd\u011blen\u00e9m souboru</li> <li>kask\u00e1dov\u00e9 styly     <pre><code>/* Toto je koment\u00e1\u0159 v CSS */\nbody {\n  background-color: lightblue;\n}\n\nh1 {\n  color: navy;\n  text-align: center;\n}\n</code></pre></li> </ul>"},{"location":"cviceni/cviceni2/#zapis-css","title":"Z\u00e1pis CSS","text":"<p>Jestli\u017ee m\u00e1me HTML k\u00f3d: <pre><code>&lt;h1&gt;Text&lt;/h1&gt;\n</code></pre></p> <p>Jemu\u017e upravujeme styl pomoc\u00ed CSS: <pre><code>h1 {\n  color: red;\n}\n</code></pre></p> <p>Pak plat\u00ed, \u017ee: </p> <ul> <li> <p><code>h1</code> je tzv. CSS selektor, kter\u00fd vybere prvek na str\u00e1nce. Pomoc\u00ed tohoto selektoru jsou vybr\u00e1ny v\u0161echny tagy (zna\u010dky) na str\u00e1nce.</p> </li> <li> <p><code>{}</code> slo\u017een\u00e9 z\u00e1vorky, kter\u00e9 obaluj\u00ed z\u00e1pis stylu pro dan\u00fd selektor</p> </li> <li> <p><code>color</code> je CSS vlastnost upravuj\u00edc\u00ed barvu</p> </li> <li> <p><code>:</code> dvojte\u010dkou se p\u0159i\u0159azuje hodnota CSS vlastnosti</p> </li> <li> <p><code>red</code> je CSS hodnota p\u0159i\u0159azen\u00e1 k vlastnosti p\u0159ed dvojte\u010dkou</p> </li> <li> <p><code>;</code> st\u0159edn\u00edk odd\u011bluje v\u00edce p\u00e1r\u016f vlastnost\u2013hodnota; za posledn\u00ed dvojic\u00ed se ps\u00e1t nemus\u00ed, ale je lep\u0161\u00ed na n\u011bj nezapom\u00ednat</p> </li> </ul> <p>\u00daprava stylu str\u00e1nky pomoc\u00ed CSS m\u016f\u017ee b\u00fdt k HTML souboru p\u0159ipojena dv\u011bma zp\u016fsoby:</p> <ul> <li> <p>p\u0159\u00edmo sou\u010d\u00e1st\u00ed k\u00f3du - vyu\u017eit\u00ed tagu <code>&lt;style&gt;</code> <pre><code>&lt;!DOCTYPE html&gt; \n&lt;html&gt; \n&lt;head&gt; \n    &lt;meta charset=\"UTF-8\"&gt; \n    &lt;meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"&gt;\n    &lt;title&gt;Moje prvn\u00ed HTML str\u00e1nka&lt;/title&gt; \n    &lt;style&gt;\n      body {\n        font-family: Arial, sans-serif;\n        background-color: #f0f0f0;\n      }\n    &lt;/style&gt;\n&lt;/head&gt;\n&lt;body&gt; \n\n    &lt;h1&gt;Ahoj sv\u011bte!&lt;/h1&gt; \n    &lt;p&gt;Toto je prvn\u00ed odstavec na m\u00e9 str\u00e1nce.&lt;/p&gt; \n\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre></p> </li> <li> <p>v odd\u011blen\u00e9m souboru -&gt; vlo\u017een\u00ed do HTML p\u0159es referenci</p> <p>HTML k\u00f3d: <pre><code>&lt;!DOCTYPE html&gt; \n&lt;html&gt; \n&lt;head&gt; \n    &lt;meta charset=\"UTF-8\"&gt; \n    &lt;meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"&gt;\n    &lt;title&gt;Moje prvn\u00ed HTML str\u00e1nka&lt;/title&gt; \n    &lt;link rel=\"stylesheet\" href=\"style.css\"&gt;\n\n&lt;/head&gt;\n&lt;body&gt; \n\n    &lt;h1&gt;Ahoj sv\u011bte!&lt;/h1&gt; \n    &lt;p&gt;Toto je prvn\u00ed odstavec na m\u00e9 str\u00e1nce.&lt;/p&gt; \n\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre></p> <p>CSS k\u00f3d: <pre><code>body {\n  font-family: Arial, sans-serif;\n  background-color: #f0f0f0;\n}\n</code></pre></p> </li> </ul> <p> Rozd\u00edl mezi str\u00e1nkou bez vyu\u017eit\u00ed CSS (vlevo) a s editac\u00ed stylu pomoc\u00ed CSS (vpravo).</p> <p>V\u00fdsledek bude stejn\u00fd. Pokud budeme styl upravovat pouze m\u00e1lo, sta\u010d\u00ed z\u00e1pis p\u0159\u00edmo v HTML. Jestli\u017ee ale chceme editaci stylu v CSS rozepsat v\u00edce, je vhodn\u011bj\u0161\u00ed vytvo\u0159en\u00ed samostatn\u00e9ho souboru. Mimo p\u0159ehlednosti pak m\u016f\u017eeme jeden CSS soubor p\u0159ipojit k v\u00edce HTML soubor\u016fm, \u010d\u00edm\u017e m\u016f\u017eeme zachovat stejn\u00fd styl nap\u0159\u00ed\u010d n\u011bkolika str\u00e1nkami.</p> <p>Pokud je t\u0159eba, lze zm\u011bnit pouze styl v ur\u010dit\u00e9m HTML tagu, ale takov\u00fd k\u00f3d se \u0161patn\u011b udr\u017euje.</p> <pre><code>&lt;h1 style=\"color: red\"&gt;\u010cerven\u00fd text&lt;/h1&gt;\n</code></pre>"},{"location":"cviceni/cviceni2/#1-uprava-css-v-zivotopise","title":"1) \u00daprava CSS v \u017eivotopise","text":"<p>Pro editaci stylu v \u017eivotopise zvol\u00edme mo\u017enost psan\u00ed CSS k\u00f3du v samostatn\u00e9m souboru. Do HTML jej tedy p\u0159ipoj\u00edme odkazem na zdrojov\u00fd soubor skrze tag <code>&lt;link&gt;</code>. <pre><code>...\n&lt;head&gt;\n    &lt;meta charset=\"UTF-8\" /&gt;\n    &lt;meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" /&gt;\n    &lt;title&gt;\u017divotopis&lt;/title&gt;\n    &lt;link rel=\"stylesheet\" href=\"style.css\"&gt;\n&lt;/head&gt;\n...\n</code></pre></p> <p>V CSS souboru zm\u011bn\u00edme font, barvu pozad\u00ed a barvu textu. Pro ur\u010den\u00ed HTML k\u00f3du barvy m\u016f\u017eeme pou\u017e\u00edt online n\u00e1stroje. Z\u00e1kladn\u00ed barvy je mo\u017en\u00e9 zad\u00e1vat pomoc\u00ed RGB k\u00f3du \u010di jm\u00e9nem.</p> <p>Nap\u0159\u00edklad \u010dervenou barvu lze zapsat jako <code>color: red</code> nebo <code>color: #FF0000</code>.</p> <p>Upraven\u00fd CSS soubor <code>style.css</code> bude vypadat n\u00e1sledovn\u011b: <pre><code>body {\n  font-family: Arial, sans-serif;\n  background-color: #f0f0f0;\n}\n\nh1 {\n  color: #008080;\n  font-size: 40px;\n}\n\np {\n  color: #800080;\n}\n</code></pre></p> <p> U\u017eit\u00ed editace stylu CSS</p>"},{"location":"cviceni/cviceni2/#2-pokrocilejsi-upravy","title":"2) Pokro\u010dilej\u0161\u00ed \u00fapravy","text":"<p>Str\u00e1nku m\u016f\u017eeme upravit dle na\u0161ich preferenc\u00ed celou \u0159adou zp\u016fsob\u016f. N\u00ed\u017ee je dopln\u011bn\u00ed CSS k\u00f3du o vypnut\u00ed zna\u010dek pro odr\u00e1\u017eky, vyst\u0159ed\u011bn\u00ed textu, zaoblen\u00ed obr\u00e1zku a jeho odd\u011blen\u00ed od textu.</p> <pre><code>body {\n  font-family: Arial, sans-serif;\n  background-color: #f0f0f0;\n  text-align: center;\n}\n\nh1 {\n  color: #008080;\n  font-size: 40px;\n}\n\np {\n  color: #800080;\n}\n\nul {\n  list-style-type: none;\n}\n\nimg {\n  padding: 10px;\n  border-radius: 20px;\n}\n</code></pre> <p> Dal\u0161\u00ed editace stylu CSS</p> <p> U\u017eite\u010dn\u00e9 odkazy</p> <ul> <li> <p>z\u00e1klady CSS: https://jecas.cz/css-zaklady</p> </li> <li> <p>\u00fapravy obr\u00e1zk\u016f: https://www.w3schools.com/css/css3_images.asp</p> </li> </ul> <p></p>"},{"location":"cviceni/cviceni2/#uvod-do-javascriptu","title":"\u00davod do JavaScriptu","text":"<p>JavaScript je dynamicky typovan\u00fd skriptovac\u00ed jazyk, kter\u00fd se pou\u017e\u00edv\u00e1 k p\u0159id\u00e1n\u00ed interaktivn\u00edch a dynamick\u00fdch prvk\u016f na webov\u00e9 str\u00e1nky. D\u00edky JavaScriptu m\u016f\u017eeme vytv\u00e1\u0159et webov\u00e9 aplikace, hry, animace a mnoho dal\u0161\u00edho. Je to jeden z nejpou\u017e\u00edvan\u011bj\u0161\u00edch programovac\u00edch jazyk\u016f na sv\u011bt\u011b a jeho znalost je pro webov\u00e9 v\u00fdvoj\u00e1\u0159e nezbytn\u00e1.</p> <p>JavaScript se spou\u0161t\u00ed v prohl\u00ed\u017ee\u010di a umo\u017e\u0148uje manipulovat s obsahem a vzhledem webov\u00e9 str\u00e1nky. Jeho hlavn\u00ed s\u00edla spo\u010d\u00edv\u00e1 v tom, \u017ee dok\u00e1\u017ee reagovat na akce u\u017eivatele, m\u011bnit obsah str\u00e1nky v re\u00e1ln\u00e9m \u010dase a komunikovat s webov\u00fdm serverem bez nutnosti op\u011btovn\u00e9ho na\u010d\u00edt\u00e1n\u00ed cel\u00e9 str\u00e1nky. To otev\u00edr\u00e1 dve\u0159e k tvorb\u011b modern\u00edch a dynamick\u00fdch webov\u00fdch aplikac\u00ed, kter\u00e9 se chovaj\u00ed podobn\u011b jako desktopov\u00e9 aplikace.</p> <p>Mezi typick\u00e9 \u00falohy, kter\u00e9 JavaScript \u0159e\u0161\u00ed, pat\u0159\u00ed:</p> <ul> <li>Zm\u011bna obsahu str\u00e1nky: Zobrazov\u00e1n\u00ed a skr\u00fdv\u00e1n\u00ed prvk\u016f, aktualizace textu, animace.</li> <li>Reakce na ud\u00e1losti: Kliknut\u00ed my\u0161\u00ed, najet\u00ed kurzorem, stisk kl\u00e1vesy, odesl\u00e1n\u00ed formul\u00e1\u0159e.</li> <li>Validace formul\u00e1\u0159\u016f: Kontrola vstupn\u00edch dat od u\u017eivatele, nap\u0159. zda je emailov\u00e1 adresa platn\u00e1.</li> <li>Animace a efekty: Vytv\u00e1\u0159en\u00ed animac\u00ed, p\u0159echod\u016f a dal\u0161\u00edch vizu\u00e1ln\u00edch efekt\u016f.</li> <li>Komunikace s webov\u00fdm serverem: Na\u010d\u00edt\u00e1n\u00ed dat ze serveru (nap\u0159. aktualizace novinek), odes\u00edl\u00e1n\u00ed dat na server (nap\u0159. ukl\u00e1d\u00e1n\u00ed formul\u00e1\u0159e).</li> </ul> <p>JavaScript je kl\u00ed\u010dovou technologi\u00ed pro modern\u00ed web a jeho znalost je pro webov\u00e9 v\u00fdvoj\u00e1\u0159e nezbytn\u00e1. D\u00edky JavaScriptu m\u016f\u017eeme vytv\u00e1\u0159et webov\u00e9 aplikace, kter\u00e9 jsou interaktivn\u00ed, dynamick\u00e9 a u\u017eivatelsky p\u0159\u00edv\u011btiv\u00e9.</p>"},{"location":"cviceni/cviceni2/#zakladni-syntaxe","title":"Z\u00e1kladn\u00ed syntaxe","text":"<p>Syntaxe JavaScriptu je podobn\u00e1 jazyku C a Java. K\u00f3d se p\u00ed\u0161e do soubor\u016f s p\u0159\u00edponou .js, kter\u00e9 se pak vkl\u00e1daj\u00ed do HTML str\u00e1nky pomoc\u00ed tagu &lt;script&gt;.</p> <pre><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n  &lt;title&gt;Moje str\u00e1nka&lt;/title&gt;\n&lt;/head&gt;\n&lt;body&gt;\n\n  &lt;h1&gt;Ahoj sv\u011bte!&lt;/h1&gt;\n\n  &lt;script src=\"mujSkript.js\"&gt;&lt;/script&gt;\n\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre> <p>V tomto p\u0159\u00edkladu je soubor mujSkript.js vlo\u017een do HTML str\u00e1nky a bude se spou\u0161t\u011bt v prohl\u00ed\u017ee\u010di.</p>"},{"location":"cviceni/cviceni2/#promenne","title":"Prom\u011bnn\u00e9","text":"<p>Prom\u011bnn\u00e9 se pou\u017e\u00edvaj\u00ed pro ukl\u00e1d\u00e1n\u00ed dat. Deklaruj\u00ed se pomoc\u00ed kl\u00ed\u010dov\u00e9ho slova let, const (pro konstantn\u00ed hodnoty) nebo var (star\u0161\u00ed zp\u016fsob). N\u00e1zvy prom\u011bnn\u00fdch by m\u011bly b\u00fdt popisn\u00e9 a psan\u00e9 v camelCase notaci (nap\u0159. mojePromenna).</p> <pre><code>let mojePromenna = \"Ahoj!\";\nconst PI = 3.14159;\nvar starsiPromenna = 123;\n</code></pre>"},{"location":"cviceni/cviceni2/#datove-typy","title":"Datov\u00e9 typy","text":"<p>JavaScript m\u00e1 dynamick\u00e9 typov\u00e1n\u00ed, co\u017e znamen\u00e1, \u017ee typ prom\u011bnn\u00e9 se ur\u010duje automaticky podle hodnoty, kterou do n\u00ed ulo\u017e\u00edme. JavaScript m\u00e1 n\u011bkolik datov\u00fdch typ\u016f, jako nap\u0159\u00edklad:</p> <p>Number (\u010d\u00edsla): Pou\u017e\u00edvaj\u00ed se pro ukl\u00e1d\u00e1n\u00ed \u010d\u00edseln\u00fdch hodnot.</p> <pre><code>let cislo = 123;\nlet desetinneCislo = 3.14;\n</code></pre> <p>String (textov\u00e9 \u0159et\u011bzce): Pou\u017e\u00edvaj\u00ed se pro ukl\u00e1d\u00e1n\u00ed textu. Text se uzav\u00edr\u00e1 do uvozovek nebo apostrof\u016f.</p> <pre><code>let text = \"Ahoj sv\u011bte!\";\nlet jmeno = 'Jan';\n</code></pre> <p>Boolean (logick\u00e9 hodnoty): Mohou nab\u00fdvat dvou hodnot: true (pravda) nebo false (nepravda). Pou\u017e\u00edvaj\u00ed se pro logick\u00e9 operace a podm\u00ednky.</p> <pre><code>let pravda = true;\nlet nepravda = false;\n</code></pre> <p>Object (objekty): Objekty jsou kolekce vlastnost\u00ed (kl\u00ed\u010d-hodnota). Vlastnosti mohou b\u00fdt r\u016fzn\u00e9ho datov\u00e9ho typu.</p> <pre><code>let osoba = {\njmeno: \"Jan\",\nvek: 30,\nmesto: \"Praha\"\n};\n</code></pre> <p>Array (pole): Pole jsou kolekce prvk\u016f stejn\u00e9ho datov\u00e9ho typu.</p> <pre><code>let cisla = [1, 2, 3, 4, 5];\nlet jmena = [\"Jan\", \"Petr\", \"Lucie\"];\n</code></pre> <p>Null (pr\u00e1zdn\u00e1 hodnota): Reprezentuje \u00famyslnou neexistenci objektu.</p> <pre><code>let nic = null;\n</code></pre> <p>Undefined (nedefinovan\u00e1 hodnota): Prom\u011bnn\u00e1, kter\u00e1 nebyla inicializov\u00e1na, m\u00e1 hodnotu undefined.</p> <pre><code>let nedefinovanaPromenna;\n</code></pre>"},{"location":"cviceni/cviceni2/#operatory","title":"Oper\u00e1tory","text":"<p>JavaScript podporuje r\u016fzn\u00e9 oper\u00e1tory pro pr\u00e1ci s daty:</p> <p>Aritmetick\u00e9 oper\u00e1tory: + (s\u010d\u00edt\u00e1n\u00ed), \u2013 (od\u010d\u00edt\u00e1n\u00ed), * (n\u00e1soben\u00ed), / (d\u011blen\u00ed), % (modulo \u2013 zbytek po d\u011blen\u00ed)</p> <pre><code>let soucet = 5 + 3; // 8\nlet rozdil = 10 - 4; // 6\nlet soucin = 2 * 7; // 14\nlet podil = 15 / 3; // 5\nlet zbytek = 10 % 3; // 1\n</code></pre> <p>Porovn\u00e1vac\u00ed oper\u00e1tory: == (rovn\u00e1 se), != (nerovn\u00e1 se), === (striktn\u011b rovn\u00e1 se), !== (striktn\u011b nerovn\u00e1 se), &gt; (v\u011bt\u0161\u00ed ne\u017e), &lt; (men\u0161\u00ed ne\u017e), &gt;= (v\u011bt\u0161\u00ed nebo rovno), &lt;= (men\u0161\u00ed nebo rovno)</p> <pre><code>let a = 5;\nlet b = 3;\nconsole.log(a == b); // false\nconsole.log(a &gt; b); // true\nconsole.log(a !== 5); // false\n</code></pre> <p>Logick\u00e9 oper\u00e1tory: &amp;&amp; (logick\u00fd AND - a z\u00e1rove\u0148), || (logick\u00fd OR - nebo), ! (logick\u00fd NOT - negace)</p> <pre><code>let x = true;\nlet y = false;\nconsole.log(x &amp;&amp; y); // false\nconsole.log(x || y); // true\nconsole.log(!x); // false\n</code></pre> <p>P\u0159i\u0159azovac\u00ed oper\u00e1tory: = (p\u0159i\u0159azen\u00ed), += (p\u0159i\u010dten\u00ed a p\u0159i\u0159azen\u00ed), -= (ode\u010dten\u00ed a p\u0159i\u0159azen\u00ed), *= (n\u00e1soben\u00ed a p\u0159i\u0159azen\u00ed), /= (d\u011blen\u00ed a p\u0159i\u0159azen\u00ed)</p> <pre><code>let cislo = 10;\ncislo += 5; // cislo je nyn\u00ed 15\ncislo *= 2; // cislo je nyn\u00ed 30\n</code></pre>"},{"location":"cviceni/cviceni2/#podminky","title":"Podm\u00ednky","text":"<p>Podm\u00ednky (if, else if, else) se pou\u017e\u00edvaj\u00ed pro rozhodov\u00e1n\u00ed a \u0159\u00edzen\u00ed toku programu. Podle spln\u011bn\u00ed (nebo nespln\u011bn\u00ed) podm\u00ednky se provede odpov\u00eddaj\u00edc\u00ed blok k\u00f3du.</p> <p><pre><code>let vek = 20;\n\nif (vek &gt;= 18) {\n  console.log(\"Jsi dosp\u011bl\u00fd.\");\n} else {\n  console.log(\"Nejsi dosp\u011bl\u00fd.\");\n}\n</code></pre> V tomto p\u0159\u00edkladu se vyp\u00ed\u0161e \"Jsi dosp\u011bl\u00fd.\", proto\u017ee prom\u011bnn\u00e1 vek m\u00e1 hodnotu 20, co\u017e je v\u011bt\u0161\u00ed nebo rovno 18.</p>"},{"location":"cviceni/cviceni2/#cykly","title":"Cykly","text":"<p>Cykly (for, while, do...while) se pou\u017e\u00edvaj\u00ed pro opakovan\u00e9 prov\u00e1d\u011bn\u00ed bloku k\u00f3du.</p> <p>for cyklus: Pou\u017e\u00edv\u00e1 se, kdy\u017e p\u0159edem v\u00edme, kolikr\u00e1t se m\u00e1 cyklus opakovat.</p> <pre><code>for (let i = 0; i &lt; 5; i++) {\n  console.log(i); // Vyp\u00ed\u0161e 0, 1, 2, 3, 4\n}\n</code></pre> <p>while cyklus: Pou\u017e\u00edv\u00e1 se, kdy\u017e p\u0159edem nev\u00edme, kolikr\u00e1t se m\u00e1 cyklus opakovat, a opakuje se, dokud je podm\u00ednka spln\u011bna.</p> <pre><code>let i = 0;\nwhile (i &lt; 5) {\n  console.log(i); // Vyp\u00ed\u0161e 0, 1, 2, 3, 4\n  i++;\n}\n</code></pre> <p>do...while cyklus: Podobn\u00fd jako while cyklus, ale blok k\u00f3du se provede alespo\u0148 jednou, i kdy\u017e podm\u00ednka nen\u00ed spln\u011bna.</p> <pre><code>let i = 0;\ndo {\n  console.log(i); // Vyp\u00ed\u0161e 0, 1, 2, 3, 4\n  i++;\n} while (i &lt; 5);\n</code></pre>"},{"location":"cviceni/cviceni2/#funkce","title":"Funkce","text":"<p>Funkce jsou bloky k\u00f3du, kter\u00e9 se daj\u00ed opakovan\u011b volat. Definuj\u00ed se pomoc\u00ed kl\u00ed\u010dov\u00e9ho slova function.</p> <pre><code>function pozdrav(jmeno) {\n  console.log(\"Ahoj, \" + jmeno + \"!\");\n}\n\npozdrav(\"Jano\"); // Vyp\u00ed\u0161e \"Ahoj, Jano!\"\npozdrav(\"Pet\u0159e\"); // Vyp\u00ed\u0161e \"Ahoj, Pet\u0159e!\"\n</code></pre> <p>V tomto p\u0159\u00edkladu je definov\u00e1na funkce pozdrav, kter\u00e1 bere jeden parametr jmeno a vyp\u00ed\u0161e pozdrav s dan\u00fdm jm\u00e9nem. Funkce se pak dvakr\u00e1t vol\u00e1 s r\u016fzn\u00fdmi argumenty.</p>"},{"location":"cviceni/cviceni2/#objekty","title":"Objekty","text":"<p>Objekty jsou kolekce vlastnost\u00ed (kl\u00ed\u010d-hodnota). Vlastnosti mohou b\u00fdt r\u016fzn\u00e9ho datov\u00e9ho typu.</p> <pre><code>let auto = {\n  znacka: \"\u0160koda\",\n  model: \"Octavia\",\n  barva: \"\u010derven\u00e1\",\n  rokVyroby: 2020\n};\n\nconsole.log(auto.znacka); // Vyp\u00ed\u0161e \"\u0160koda\"\nconsole.log(auto[\"model\"]); // Vyp\u00ed\u0161e \"Octavia\"\n</code></pre> <p>V tomto p\u0159\u00edkladu je definov\u00e1n objekt auto s vlastnostmi znacka, model, barva a rokVyroby. K vlastnostem objektu se p\u0159istupuje pomoc\u00ed te\u010dkov\u00e9 notace (nap\u0159. auto.znacka) nebo pomoc\u00ed hranat\u00fdch z\u00e1vorek (nap\u0159. auto[\"model\"]).</p>"},{"location":"cviceni/cviceni2/#pole","title":"Pole","text":"<p>Pole jsou kolekce prvk\u016f stejn\u00e9ho datov\u00e9ho typu.</p> <pre><code>let cisla = [1, 2, 3, 4, 5];\n\nconsole.log(cisla[0]); // Vyp\u00ed\u0161e 1\nconsole.log(cisla.length); // Vyp\u00ed\u0161e 5\n\ncisla.push(6); // P\u0159id\u00e1 \u010d\u00edslo 6 na konec pole\nconsole.log(cisla); // Vyp\u00ed\u0161e [1, 2, 3, 4, 5, 6]\n</code></pre> <p>V tomto p\u0159\u00edkladu je definov\u00e1no pole cisla s p\u011bti prvky. K prvk\u016fm pole se p\u0159istupuje pomoc\u00ed indexu (nap\u0159. cisla[0] pro prvn\u00ed prvek). Vlastnost length vrac\u00ed d\u00e9lku pole. Metoda push() p\u0159id\u00e1v\u00e1 prvek na konec pole.</p>"},{"location":"cviceni/cviceni2/#udalosti","title":"Ud\u00e1losti","text":"<p>Ud\u00e1losti jsou akce, kter\u00e9 se d\u011bj\u00ed na webov\u00e9 str\u00e1nce, nap\u0159\u00edklad kliknut\u00ed my\u0161\u00ed, najet\u00ed my\u0161\u00ed, odesl\u00e1n\u00ed formul\u00e1\u0159e atd. V JavaScriptu se daj\u00ed definovat funkce, kter\u00e9 se maj\u00ed prov\u00e9st p\u0159i dan\u00e9 ud\u00e1losti.</p> <pre><code>&lt;button onclick=\"zobrazAlert()\"&gt;Klikni na m\u011b&lt;/button&gt;\n\n&lt;script&gt;\nfunction zobrazAlert() {\n  alert(\"Kliknul jsi na tla\u010d\u00edtko!\");\n}\n&lt;/script&gt;\n</code></pre> <p>V tomto p\u0159\u00edkladu je definov\u00e1no tla\u010d\u00edtko, kter\u00e9 p\u0159i kliknut\u00ed spust\u00ed funkci zobrazAlert(). Tato funkce zobraz\u00ed upozorn\u011bn\u00ed (alert) s textem \"Kliknul jsi na tla\u010d\u00edtko!\".</p>"},{"location":"cviceni/cviceni2/#dom-document-object-model","title":"DOM (Document Object Model)","text":"<p>DOM je objektov\u00e1 reprezentace HTML dokumentu. V JavaScriptu se d\u00e1 s DOM manipulovat pro zm\u011bnu obsahu, struktury a stylu webov\u00e9 str\u00e1nky.</p> <pre><code>&lt;p id=\"mujOdstavec\"&gt;Toto je odstavec.&lt;/p&gt;\n\n&lt;script&gt;\nlet odstavec = document.getElementById(\"mujOdstavec\");\nodstavec.innerHTML = \"Toto je **nov\u00fd** text odstavce.\";\n&lt;/script&gt;\n</code></pre> <p>V tomto p\u0159\u00edkladu je definov\u00e1n odstavec s id \"mujOdstavec\". JavaScript k\u00f3d pak najde tento odstavec pomoc\u00ed document.getElementById() a zm\u011bn\u00ed jeho obsah pomoc\u00ed vlastnosti innerHTML.</p>"},{"location":"cviceni/cviceni2/#jquery","title":"jQuery","text":"<p>jQuery je JavaScriptov\u00e1 knihovna, kter\u00e1 zjednodu\u0161uje pr\u00e1ci s DOM a ud\u00e1lostmi.</p> <pre><code>&lt;head&gt;\n  &lt;script src=\"https://code.jquery.com/jquery-3.5.1.min.js\"&gt;&lt;/script&gt;\n&lt;/head&gt;\n&lt;body&gt;\n\n  &lt;button id=\"mojeTlacitko\"&gt;Klikni na m\u011b&lt;/button&gt;\n\n  &lt;script&gt;\n  $(document).ready(function() {\n    $(\"#mojeTlacitko\").click(function() {\n      alert(\"Kliknul jsi na tla\u010d\u00edtko!\");\n    });\n  });\n  &lt;/script&gt;\n\n&lt;/body&gt;\n</code></pre> <p>V tomto p\u0159\u00edkladu jQuery k\u00f3d \u010dek\u00e1, a\u017e se na\u010dte cel\u00e1 str\u00e1nka ($(document).ready()), a pak p\u0159i\u0159ad\u00ed funkci k ud\u00e1losti kliknut\u00ed na tla\u010d\u00edtko s id \"mojeTlacitko\".</p>"},{"location":"cviceni/cviceni2/#ajax","title":"AJAX","text":"<p>AJAX je technika pro asynchronn\u00ed komunikaci s webov\u00fdm serverem. Umo\u017e\u0148uje na\u010d\u00edtat a odes\u00edlat data bez nutnosti obnoven\u00ed cel\u00e9 str\u00e1nky.</p> <pre><code>let xhr = new XMLHttpRequest();\nxhr.open('GET', 'data.json', true);\nxhr.onload = function() {\n  if (xhr.status === 200) {\n    let data = JSON.parse(xhr.responseText);\n    // Zpracov\u00e1n\u00ed dat\n  }\n};\nxhr.send();\nTento k\u00f3d vytvo\u0159\u00ed AJAX po\u017eadavek na server pro na\u010dten\u00ed souboru data.json. Po na\u010dten\u00ed dat se spust\u00ed funkce onload, kter\u00e1 data zpracuje.\n</code></pre> <p>JSON (JavaScript Object Notation) JSON je form\u00e1t pro v\u00fdm\u011bnu dat, kter\u00fd je zalo\u017een\u00fd na JavaScriptov\u00e9 syntaxi pro objekty.</p> <p><pre><code>    {\n      \"jmeno\": \"Jan\",\n      \"vek\": 30,\n      \"mesto\": \"Praha\"\n    }\n</code></pre> Tento JSON k\u00f3d reprezentuje objekt s vlastnostmi jmeno, vek a mesto.</p>"},{"location":"cviceni/cviceni2/#konzole-prohlizece","title":"Konzole prohl\u00ed\u017ee\u010de","text":"<p>V\u011bt\u0161ina webov\u00fdch prohl\u00ed\u017ee\u010d\u016f m\u00e1 vestav\u011bnou konzoli, kter\u00e1 slou\u017e\u00ed k zobrazov\u00e1n\u00ed chyb a lad\u011bn\u00ed k\u00f3du. Lad\u00edc\u00ed n\u00e1stroje: Prohl\u00ed\u017ee\u010de maj\u00ed i pokro\u010dil\u00e9 lad\u00edc\u00ed n\u00e1stroje, kter\u00e9 umo\u017e\u0148uj\u00ed krokovat k\u00f3d, nastavovat breakpointy a sledovat hodnoty prom\u011bnn\u00fdch.</p> <p>JavaScript je mocn\u00fd n\u00e1stroj pro webov\u00e9 v\u00fdvoj\u00e1\u0159e. S jeho pomoc\u00ed m\u016f\u017eeme vytv\u00e1\u0159et dynamick\u00e9 a interaktivn\u00ed webov\u00e9 str\u00e1nky a aplikace. D\u016fle\u017eit\u00e9 je pochopit z\u00e1kladn\u00ed principy a syntaxe jazyka a n\u00e1sledn\u011b se propracov\u00e1vat ke slo\u017eit\u011bj\u0161\u00edm koncept\u016fm a technik\u00e1m.</p> <p>K odevzd\u00e1n\u00ed</p> <p>Do p\u0159\u00ed\u0161t\u00edho cvi\u010den\u00ed vytvo\u0159te jednoduchou html str\u00e1nku se sv\u00fdm \u017eivotopisem, kter\u00e1 bude hostov\u00e1na prost\u0159ednictv\u00edm platformy Glitch. Berte na v\u011bdom\u00ed, \u017ee vyt\u0159vo\u0159en\u00e1 str\u00e1nka je ve\u0159ejn\u011b p\u0159\u00edstupn\u00e1. </p> <p>\u017divotopis by m\u011bl obsahovat n\u00e1sleduj\u00edc\u00ed prvky:</p> <ul> <li> <p>va\u0161e jm\u00e9no a p\u0159\u00edjmen\u00ed v\u010detn\u011b dosa\u017een\u00fdch titul\u016f</p> </li> <li> <p>studium (v\u010detn\u011b odkaz\u016f na z\u00e1v\u011bre\u010dn\u00e9 pr\u00e1ce), znalost ciz\u00edch jazyk\u016f</p> </li> <li> <p>p\u0159\u00edpadn\u00e9 st\u00e1\u017ee, praxe v oboru</p> </li> <li> <p>oborov\u00e9 zam\u011b\u0159en\u00ed</p> </li> <li> <p>embed mapy, nap\u0159. s okol\u00edm FSv \u010cVUT v Praze</p> </li> </ul> <p>Ve v\u00fdsledn\u00e9 webov\u00e9 str\u00e1nce upravte styl pomoc\u00ed CSS (zm\u011bny nap\u0159. textu, fontu, barev, pozad\u00ed str\u00e1nky).</p> <p>Budeme r\u00e1di, pokud si zkus\u00edte do str\u00e1nky p\u0159idat i dal\u0161\u00ed voliteln\u00e9 prvky, nap\u0159. foto, popis z\u00e1jm\u016f nebo n\u011bco zaj\u00edmav\u00e9ho.</p> <p>Uk\u00e1zka: https://frantisek-muzik.glitch.me/</p>"},{"location":"cviceni/cviceni3/","title":"Cvi\u010den\u00ed 3","text":""},{"location":"cviceni/cviceni3/#vyber-nejoblibenejsich-js-mapovych-knihoven","title":"V\u00fdb\u011br nejobl\u00edben\u011bj\u0161\u00edch JS mapov\u00fdch knihoven","text":"<ul> <li> <p> Leaflet</p> <p>Lehk\u00e1 a v\u00fdkonn\u00e1 knihovna pro interaktivn\u00ed mapy. </p> <p>Je jednoduch\u00e1 na pou\u017eit\u00ed a vhodn\u00e1 pro v\u011bt\u0161inu projekt\u016f.</p> <p></p> </li> <li> <p> Open Layers</p> <p>V\u00fdkonn\u00e1 knihovna pro vytv\u00e1\u0159en\u00ed dynamick\u00fdch aplikac\u00ed. </p> <p>Vhodn\u00e1 pro rozs\u00e1hl\u00e9 a komplexn\u00ed GIS aplikace.</p> <p></p> </li> <li> <p> MapLibre GL JS</p> <p>Vykreslov\u00e1n\u00ed interaktivn\u00edch map pomoc\u00ed WebGL.</p> <p>Ide\u00e1ln\u00ed pro aplikace, kter\u00e9 pot\u0159ebuj\u00ed svi\u017en\u00e9 3D vizualizace a vlastn\u00ed stylov\u00e1n\u00ed map.</p> <p></p> </li> <li> <p> CesiumJS</p> <p>Vhodn\u00e1 pro 3D aplikace \u010di interaktivn\u00ed anal\u00fdzu ter\u00e9nu.  </p> <p>Perfektn\u00ed pro aplikace, kter\u00e9 vy\u017eaduj\u00ed realistickou 3D\u00a0vizualizaci.</p> <p></p> </li> </ul>"},{"location":"cviceni/cviceni3/#vs-code","title":"VS Code","text":"<p>Visual Studio Code (VS Code) je bezplatn\u00fd a multiplatformn\u00ed editor zdrojov\u00e9ho k\u00f3du, kter\u00fd vyvinula spole\u010dnost Microsoft. Je popul\u00e1rn\u00ed d\u00edky flexibilit\u011b a podpo\u0159e \u0161irok\u00e9 \u0161k\u00e1ly programovac\u00edch jazyk\u016f.</p> <p>Mezi v\u00fdhody pat\u0159\u00ed zv\u00fdrazn\u011bn\u00ed syntaxe, na\u0161ept\u00e1v\u00e1n\u00ed p\u0159i psan\u00ed, lad\u011bn\u00ed k\u00f3du p\u0159\u00edmo z\u00a0editoru a mo\u017enost instalace \u0159ady roz\u0161\u00ed\u0159en\u00ed (nap\u0159. Live Server).</p> <p> Prost\u0159ed\u00ed VS Code s uk\u00e1zkou roz\u0161\u00ed\u0159en\u00ed Live server, d\u00edky kter\u00e9mu je mo\u017en\u00e9 sledovat zm\u011bny k\u00f3du v re\u00e1ln\u00e9m \u010dase</p> <p>Sta\u017een\u00ed VS Code </p>"},{"location":"cviceni/cviceni3/#mapova-aplikace-v-prostredi-leaflet","title":"Mapov\u00e1 aplikace v prost\u0159ed\u00ed Leaflet","text":""},{"location":"cviceni/cviceni3/#0-priprava-struktury-souboru","title":"0) P\u0159\u00edprava struktury soubor\u016f","text":"<p>Na disku si vytvo\u0159\u00edme pr\u00e1zdnou slo\u017eku, ve kter\u00e9 budeme uchov\u00e1vat ve\u0161ker\u00e9 soubory spojen\u00e9 s t\u00edmto cvi\u010den\u00edm (html, js a css soubory + nap\u0159. obr\u00e1zky pro ikony). Ide\u00e1ln\u011b vol\u00edme um\u00edst\u011bn\u00ed na vlastn\u00edm disku\u00a0H.</p> <ul> <li> <p>nov\u00fd soubor <code>index.html</code></p> <pre><code>&lt;!DOCTYPE html&gt; \n&lt;html&gt; \n&lt;head&gt; \n    &lt;meta charset=\"UTF-8\"&gt; \n    &lt;meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"&gt;\n    &lt;link rel=\"stylesheet\" href=\"style.css\"&gt;\n    &lt;title&gt;Moje prvn\u00ed Leaflet mapa&lt;/title&gt; \n&lt;/head&gt;\n&lt;body&gt; \n\n    &lt;h1&gt;P\u011bkn\u00e1 mapa v Leafletu&lt;/h1&gt; \n\n\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre> </li> <li> <p>nov\u00fd soubor <code>script.js</code> - zat\u00edm ponech\u00e1me pr\u00e1zdn\u00fd</p> </li> <li> <p>nov\u00fd soubor <code>style.css</code> - zat\u00edm ponech\u00e1me pr\u00e1zdn\u00fd</p> </li> </ul>"},{"location":"cviceni/cviceni3/#1-zobrazeni-jednoducheho-mapoveho-okna","title":"1) Zobrazen\u00ed jednoduch\u00e9ho mapov\u00e9ho okna","text":"<p>Do souboru <code>index.html</code> je pot\u0159eba p\u0159ipojit knihovnu Leaflet v hlavi\u010dce souboru (head). D\u00e1le mus\u00edme v\u00a0sekci body vlo\u017eit mapov\u00e9 okno a p\u0159ipojit skript odkazuj\u00edc\u00ed na ovl\u00e1d\u00e1n\u00ed mapy.</p> index.html <pre><code>...\n&lt;head&gt; \n    ...\n\n    &lt;!-- Extern\u00ed p\u0159ipojen\u00ed CSS symbologie Leaflet --&gt;\n    &lt;link rel=\"stylesheet\" href=\"https://unpkg.com/leaflet@1.9.4/dist/leaflet.css\"\n    integrity=\"sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=\"\n    crossorigin=\"\"/&gt;\n\n    &lt;!-- Extern\u00ed p\u0159ipojen\u00ed JS knihovny -&gt; vlo\u017eit a\u017e po p\u0159ipojen\u00ed CSS souboru --&gt;\n    &lt;script src=\"https://unpkg.com/leaflet@1.9.4/dist/leaflet.js\"\n    integrity=\"sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=\"\n    crossorigin=\"\"&gt;&lt;/script&gt;\n\n    ...\n&lt;/head&gt;\n\n...\n\n&lt;body&gt; \n    ...\n    &lt;!-- Vlo\u017een\u00ed divu pro zobrazen\u00ed mapov\u00e9ho okna --&gt;\n    &lt;div id=\"map\"&gt;&lt;/div&gt;\n\n    &lt;!-- P\u0159ipojen\u00ed JS scriptu ovl\u00e1daj\u00edc\u00edho mapov\u00e9 okno --&gt;\n    &lt;script src=\"script.js\"&gt;&lt;/script&gt;\n\n&lt;/body&gt;\n</code></pre> <p>Ve <code>script.js</code> vytvo\u0159\u00edme prom\u011bnnou mapy, nastav\u00edme jej\u00ed st\u0159ed a \u00farove\u0148 p\u0159ibl\u00ed\u017een\u00ed. D\u00e1le ur\u010d\u00edme podkladovou mapu, maxim\u00e1ln\u00ed \u00farove\u0148 p\u0159ibl\u00ed\u017een\u00ed a popis datov\u00e9ho zdroje.</p> script.js <pre><code>// Nastaven\u00ed mapy, jej\u00edho st\u0159edu a \u00farovn\u011b p\u0159ibl\u00ed\u017een\u00ed\nvar map = L.map('map').setView([50.104, 14.388], 13);\n\n// Ur\u010den\u00ed podkladov\u00e9 mapy, maxim\u00e1ln\u00ed \u00farovn\u011b p\u0159ibl\u00ed\u017een\u00ed a zdroje dat\nL.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {\n    maxZoom: 19,\n    attribution: '&amp;copy; &lt;a href=\"http://www.openstreetmap.org/copyright\"&gt;OpenStreetMap&lt;/a&gt;'\n}).addTo(map);\n</code></pre> <p>Pomoc\u00ed <code>style.css</code> uprav\u00edme velikost mapov\u00e9ho okna dle pot\u0159eb.</p> style.css <pre><code>/* Velikost mapov\u00e9ho okna */\n#map {\n    height: 800px;\n    width: 60%;\n}\n</code></pre> <p> Z\u00e1kladn\u00ed zobrazen\u00ed mapov\u00e9ho okna pomoc\u00ed knihovny Leaflet</p> Stav k\u00f3du po dokon\u010den\u00ed kroku 1) Zobrazen\u00ed jednoduch\u00e9ho mapov\u00e9ho okna index.htmlscript.jsstyle.css <pre><code>&lt;!DOCTYPE html&gt; \n&lt;html&gt; \n&lt;head&gt; \n    &lt;meta charset=\"UTF-8\"&gt; \n    &lt;meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"&gt;\n    &lt;link rel=\"stylesheet\" href=\"style.css\"&gt;\n\n    &lt;!-- Extern\u00ed p\u0159ipojen\u00ed CSS symbologie Leaflet--&gt;\n    &lt;link rel=\"stylesheet\" href=\"https://unpkg.com/leaflet@1.9.4/dist/leaflet.css\"\n    integrity=\"sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=\"\n    crossorigin=\"\"/&gt;\n\n\n    &lt;!-- Extern\u00ed p\u0159ipojen\u00ed JS knihovny -&gt; vlo\u017eit a\u017e po p\u0159ipojen\u00ed CSS souboru --&gt;\n    &lt;script src=\"https://unpkg.com/leaflet@1.9.4/dist/leaflet.js\"\n    integrity=\"sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=\"\n    crossorigin=\"\"&gt;&lt;/script&gt;\n\n    &lt;title&gt;Moje prvn\u00ed Leaflet mapa&lt;/title&gt; \n&lt;/head&gt;\n&lt;body&gt; \n\n    &lt;h1&gt;P\u011bkn\u00e1 mapa v Leafletu&lt;/h1&gt; \n\n    &lt;div id=\"map\"&gt;&lt;/div&gt;\n    &lt;script src=\"script.js\"&gt;&lt;/script&gt;\n\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre> <pre><code>// Nastaven\u00ed mapy, jej\u00edho st\u0159edu a \u00farovn\u011b p\u0159ibl\u00ed\u017een\u00ed\nvar map = L.map('map').setView([50.104, 14.388], 13);\n\n// Ur\u010den\u00ed podkladov\u00e9 mapy, maxim\u00e1ln\u00ed \u00farovn\u011b p\u0159ibl\u00ed\u017een\u00ed a zdroje dat\nL.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {\n    maxZoom: 19,\n    attribution: '&amp;copy; &lt;a href=\"http://www.openstreetmap.org/copyright\"&gt;OpenStreetMap&lt;/a&gt;'\n}).addTo(map);\n</code></pre> <pre><code>/* Velikost mapov\u00e9ho okna */\n#map {\n    height: 800px;\n    width: 60%;\n}\n</code></pre>"},{"location":"cviceni/cviceni3/#2-vykresleni-utvaru-v-mape","title":"2) Vykreslen\u00ed \u00fatvar\u016f v map\u011b","text":"<p>Pomoc\u00ed k\u00f3du je mo\u017en\u00e9 do mapy p\u0159idat body, linie \u010di polygony r\u016fzn\u00fdch tvar\u016f. Data m\u016f\u017eeme bu\u010f zadat manu\u00e1ln\u011b nebo na\u010d\u00edst ze souboru, nap\u0159. z form\u00e1tu GeoJSON. Tomu se budeme v\u011bnovat v p\u0159\u00ed\u0161t\u00edm cvi\u010den\u00ed, nyn\u00ed n\u00e1m posta\u010d\u00ed ru\u010dn\u00ed zad\u00e1n\u00ed.</p> <p>Nejprve p\u0159id\u00e1me oby\u010dejn\u00fd marker, aneb bod v map\u011b. Nap\u0159\u00edklad pro polohu FSv \u010cVUT v Praze, jej\u00ed\u017e sou\u0159adnice vy\u010dteme z Google Map. </p> script.js <pre><code>// Bod zobrazuj\u00edc\u00ed FSv \u010cVUT v Praze\nvar marker = L.marker([50.104, 14.388]).addTo(map);\n</code></pre> <p>V kroku 3 budeme marker vylep\u0161ovat, ale nejprve zkus\u00edme vykreslit obdobn\u00fdm zp\u016fsobem linii a polygony.</p> <p>Vykresl\u00edme n\u011bkolik bod\u016f na z\u00e1klad\u011b jejich sou\u0159adnic. N\u00e1sledn\u011b je spoj\u00edme do polyline. V dokumentaci najdeme tak\u00e9 parametry vizualizace linie.</p> script.js <pre><code>// Body \nvar points = [\n    [50.104, 14.388], // FSv \u010cVUT v Praze\n    [50.091, 14.402], // Pra\u017esk\u00fd hrad\n    [50.082, 14.426], // metro M\u016fstek\n    [50.106, 14.437]  // vlak Praha Hole\u0161ovice-zast\u00e1vka\n];\n\n// Linie propojuj\u00edc\u00ed n\u011bkolik bod\u016f \nvar line = L.polyline(points).addTo(map);\n</code></pre> <p>N\u00e1sledn\u011b zkus\u00edme upravit barvu a styl linie spojuj\u00edc\u00ed body.</p> script.js <pre><code>// Linie propojuj\u00edc\u00ed n\u011bkolik bod\u016f \nvar line = L.polyline(points, {color: \"red\", weight: 10}).addTo(map);\n</code></pre> <p> Vykreslen\u00ed bodu a linie</p> <p>D\u00e1le vytvo\u0159\u00edme polygon spojuj\u00edc\u00ed zadan\u00e9 body a op\u011bt uprav\u00edme jeho styl s pomoc\u00ed dokumentace.</p> script.js <pre><code>// Polygon se zadan\u00fdmi vrcholy\nvar polygon = L.polygon(points, {color: \"blue\", weight: 3, fillColor: \"lightblue\", fillOpacity: \"0.8\"}).addTo(map);\n</code></pre> <p>Nov\u011b vytvo\u0159en\u00e1 vrstva (tedy n\u00ed\u017ee v k\u00f3du) se v map\u011b vykresl\u00ed nad p\u0159edchoz\u00ed vrstvu. V tomto p\u0159\u00edpad\u011b je tedy linie zobrazen\u00e1 pod polygonem.</p> <p> Vykreslen\u00ed bodu a linie</p> Stav k\u00f3du po dokon\u010den\u00ed kroku 2) Vykreslen\u00ed \u00fatvar\u016f v map\u011b index.html - beze zm\u011bnyscript.jsstyle.css - beze zm\u011bny <pre><code>&lt;!DOCTYPE html&gt; \n&lt;html&gt; \n&lt;head&gt; \n    &lt;meta charset=\"UTF-8\"&gt; \n    &lt;meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"&gt;\n    &lt;link rel=\"stylesheet\" href=\"style.css\"&gt;\n\n    &lt;!-- Extern\u00ed p\u0159ipojen\u00ed CSS symbologie Leaflet--&gt;\n    &lt;link rel=\"stylesheet\" href=\"https://unpkg.com/leaflet@1.9.4/dist/leaflet.css\"\n    integrity=\"sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=\"\n    crossorigin=\"\"/&gt;\n\n\n    &lt;!-- Extern\u00ed p\u0159ipojen\u00ed JS knihovny -&gt; vlo\u017eit a\u017e po p\u0159ipojen\u00ed CSS souboru --&gt;\n    &lt;script src=\"https://unpkg.com/leaflet@1.9.4/dist/leaflet.js\"\n    integrity=\"sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=\"\n    crossorigin=\"\"&gt;&lt;/script&gt;\n\n    &lt;title&gt;Moje prvn\u00ed Leaflet mapa&lt;/title&gt; \n&lt;/head&gt;\n&lt;body&gt; \n\n    &lt;h1&gt;P\u011bkn\u00e1 mapa v Leafletu&lt;/h1&gt; \n\n    &lt;div id=\"map\"&gt;&lt;/div&gt;\n    &lt;script src=\"script.js\"&gt;&lt;/script&gt;\n\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre> <pre><code>// Nastaven\u00ed mapy, jej\u00edho st\u0159edu a \u00farovn\u011b p\u0159ibl\u00ed\u017een\u00ed\nvar map = L.map('map').setView([50.104, 14.388], 13);\n\n// Ur\u010den\u00ed podkladov\u00e9 mapy, maxim\u00e1ln\u00ed \u00farovn\u011b p\u0159ibl\u00ed\u017een\u00ed a zdroje dat\nL.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {\n    maxZoom: 19,\n    attribution: '&amp;copy; &lt;a href=\"http://www.openstreetmap.org/copyright\"&gt;OpenStreetMap&lt;/a&gt;'\n}).addTo(map);\n\n// Bod zobrazuj\u00edc\u00ed FSv \u010cVUT v Praze\nvar marker = L.marker([50.104, 14.388]).addTo(map);\n\n// Body \nvar points = [\n    [50.104, 14.388], // FSv \u010cVUT v Praze\n    [50.091, 14.402], // Pra\u017esk\u00fd hrad\n    [50.082, 14.426], // metro M\u016fstek\n    [50.106, 14.437]  // vlak Praha Hole\u0161ovice-zast\u00e1vka\n];\n\n// Linie propojuj\u00edc\u00ed n\u011bkolik bod\u016f \nvar line = L.polyline(points, {color: \"red\", weight: 10}).addTo(map);\n\n// Polygon se zadan\u00fdmi vrcholy\nvar polygon = L.polygon(points, {color: \"blue\", weight: 3, fillColor: \"lightblue\", fillOpacity: \"0.8\"}).addTo(map);\n</code></pre> <pre><code>/* Velikost mapov\u00e9ho okna */\n#map {\n    height: 800px;\n    width: 60%;\n}\n</code></pre>"},{"location":"cviceni/cviceni3/#3-pop-up","title":"3) Pop-up","text":"<p>Nejprve zobraz\u00edme markery pro v\u0161echny body v poli <code>points</code>. To je mo\u017en\u00e9 prov\u00e9st postupn\u011b po jednom (jako v prvn\u00edm kroku) nebo automatizovan\u011b. </p> script.js <pre><code>// P\u0159id\u00e1n\u00ed marker\u016f pro ka\u017ed\u00fd bod\npoints.forEach(function(coords) {\n    L.marker(coords).addTo(map);\n});\n</code></pre> <p>V k\u00f3du v\u00fd\u0161e se pro ka\u017ed\u00fd bod z pole <code>points</code> vytvo\u0159\u00ed marker v map\u011b. Prom\u011bnn\u00e1 <code>coords</code> (coordinates) p\u0159edstavuje ka\u017ed\u00fd jednotliv\u00fd prvek (bod = dvojice sou\u0159adnic) v\u00a0poli <code>points</code> b\u011bhem iterace pomoc\u00ed funkce <code>forEach()</code>.</p> <p>N\u00e1sledn\u011b je mo\u017en\u00e9 smazat \u010di vlo\u017eit do blokov\u00e9ho koment\u00e1\u0159e p\u0159edchoz\u00ed zad\u00e1n\u00ed markeru na FSv \u010cVUT. </p> <p> Vytvo\u0159en\u00ed markeru nad ka\u017ed\u00fdm z bod\u016f v poli points</p> <p>D\u00e1le p\u0159i\u0159ad\u00edme pop-up jednomu prvku v map\u011b. Nap\u0159\u00edklad polygonu, kter\u00fd spojuje v\u0161echny na\u0161e body. </p> script.js <pre><code>// Pop-up pro polygon\npolygon.bindPopup(\"Toto je polygon\");\n</code></pre> <p>Podobn\u011b bychom mohli postupn\u011b p\u0159i\u0159adit pop-up jin\u00fdm prvk\u016fm v map\u011b. Nicm\u00e9n\u011b vyzkou\u0161\u00edme automatizovan\u00fd popis bod\u016f z pole <code>points</code>.</p> <p>Prvn\u00edm krokem je \u00faprava zad\u00e1n\u00ed bodov\u00e9ho pole. Sou\u0159adnice vlo\u017e\u00edme do prom\u011bnn\u00e9 <code>coords</code>, kterou jsme u\u017e p\u0159edt\u00edm vyu\u017e\u00edvali. Z\u00e1rove\u0148 p\u0159id\u00e1me textov\u00fd parametr.</p> script.js <pre><code>// Body s textov\u00fdmi informacemi\nvar points = [\n    { coords: [50.104, 14.388], text: \"FSv \u010cVUT v Praze\" },\n    { coords: [50.091, 14.402], text: \"Pra\u017esk\u00fd hrad\" },\n    { coords: [50.082, 14.426], text: \"metro M\u016fstek\" },\n    { coords: [50.106, 14.437], text: \"vlak Praha Hole\u0161ovice-zast\u00e1vka\" }\n];\n</code></pre> <p>N\u00e1sledn\u011b bude nutn\u00e9 v\u016f\u010di t\u00e9to \u00faprav\u011b p\u0159izp\u016fsobit vykreslen\u00ed linie a polygonu, co\u017e provedeme p\u0159id\u00e1n\u00ed tzv. arrow funkce.</p> script.js <pre><code>// Linie propojuj\u00edc\u00ed n\u011bkolik bod\u016f \nvar line = L.polyline(points.map(p =&gt; p.coords), {color: \"red\", weight: 10}).addTo(map);\n\n// Polygon se zadan\u00fdmi vrcholy\nvar polygon = L.polygon(points.map(p =&gt; p.coords), {color: \"blue\", weight: 3, fillColor: \"lightblue\", fillOpacity: \"0.8\"}).addTo(map);\n</code></pre> <p>V\u00fd\u0161e pou\u017eit\u00e1 arrow funkce p\u0159ijme ka\u017ed\u00fd objekt <code>p</code> z pole <code>points</code> a vr\u00e1t\u00ed hodnotu jeho vlastnosti <code>coords</code>.</p> <p>Nyn\u00ed je k\u00f3d op\u011bt funk\u010dn\u00ed ve vykreslen\u00ed linie a polygonu. Zb\u00fdv\u00e1 upravit markery, pro kter\u00e9 je pot\u0159eba drobn\u011b upravit funkci <code>forEach()</code>.</p> script.js <pre><code>// P\u0159id\u00e1n\u00ed marker\u016f s popisky pro ka\u017ed\u00fd bod\npoints.forEach(function(point) {\n    L.marker(point.coords).addTo(map).bindPopup(point.text);\n});\n</code></pre> <p> Uk\u00e1zka pop-upu pro vykreslen\u00fd bod</p> <p> Upozorn\u011bn\u00ed</p> <p>Pozor, uvnit\u0159 iterace funkce <code>forEach()</code> pracujeme s prom\u011bnnou jednoho zvolen\u00e9ho bodu <code>point</code>, ne se v\u0161emy body ze seznamu <code>points</code>.</p> <p>Z\u00e1v\u011brem tohoto kroku vytvo\u0159\u00edme nov\u00fd a samostatn\u00fd marker s vlastn\u00ed ikonou, kterou si v ve form\u00e1tu png s pr\u016fhledn\u00fdm pozad\u00edm st\u00e1hneme z internetu.</p> <p>Pomoc\u00ed dokumentace m\u016f\u017eeme upravit styl markeru (ikony). </p> script.js <pre><code>// Nastaven\u00ed parametr\u016f vlastn\u00edho markeru\nvar blackMarker = L.icon({\n    iconUrl: '/assets/cerny_popup.png', // Um\u00edst\u011bn\u00ed obr\u00e1zku na disku\n    iconSize:     [60, 60], // Velikost ikony v px\n    iconAnchor:   [0, 80], // Pozice, na kter\u00e9 se zobraz\u00ed ikona - v\u016f\u010di bodu\n    popupAnchor:  [5, -100] // Pozice, ze kter\u00e9 se popup otev\u0159e - v\u016f\u010di bodu\n});\n\n// Samostatn\u00fd bod s nov\u00fdm zna\u010den\u00edm\nvar markerDivokaS = L.marker([50.093, 14.324], {icon: blackMarker}).addTo(map); \nmarkerDivokaS.bindPopup(\"Zde je &lt;b style='color: red;'&gt;Divok\u00e1 \u0160\u00e1rka&lt;/b&gt;\");\n</code></pre> <p> Upozorn\u011bn\u00ed</p> <p>P\u0159i z\u00e1pisu textu v pop-upu je nutn\u00e9 vyu\u017e\u00edt dvojit\u00e9 uvozovky <code>\"...\"</code> pro textov\u00fd \u0159et\u011bzec a jednoduch\u00e9 <code>'...'</code> pro p\u0159\u00edpadn\u00e9 ur\u010den\u00fd stylu (= barvy). </p> <p>P\u0159i pou\u017eit\u00ed dvou p\u00e1r\u016f dvojit\u00fdch uvozovek by nastala chyba, proto\u017ee by nebylo jasn\u00e9, kdy m\u00e1 b\u00fdt textov\u00fd \u0159et\u011bzec ukon\u010den.</p> <p> Mapa s vlastn\u00edm stylem markeru a upraven\u00fdm stylem pop-upu</p> Stav k\u00f3du po dokon\u010den\u00ed kroku 3) Pop-up  index.html - beze zm\u011bnyscript.jsstyle.css - beze zm\u011bny <pre><code>&lt;!DOCTYPE html&gt; \n&lt;html&gt; \n&lt;head&gt; \n    &lt;meta charset=\"UTF-8\"&gt; \n    &lt;meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"&gt;\n    &lt;link rel=\"stylesheet\" href=\"style.css\"&gt;\n\n    &lt;!-- Extern\u00ed p\u0159ipojen\u00ed CSS symbologie Leaflet--&gt;\n    &lt;link rel=\"stylesheet\" href=\"https://unpkg.com/leaflet@1.9.4/dist/leaflet.css\"\n    integrity=\"sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=\"\n    crossorigin=\"\"/&gt;\n\n\n    &lt;!-- Extern\u00ed p\u0159ipojen\u00ed JS knihovny -&gt; vlo\u017eit a\u017e po p\u0159ipojen\u00ed CSS souboru --&gt;\n    &lt;script src=\"https://unpkg.com/leaflet@1.9.4/dist/leaflet.js\"\n    integrity=\"sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=\"\n    crossorigin=\"\"&gt;&lt;/script&gt;\n\n    &lt;title&gt;Moje prvn\u00ed Leaflet mapa&lt;/title&gt; \n&lt;/head&gt;\n&lt;body&gt; \n\n    &lt;h1&gt;P\u011bkn\u00e1 mapa v Leafletu&lt;/h1&gt; \n\n    &lt;div id=\"map\"&gt;&lt;/div&gt;\n    &lt;script src=\"script.js\"&gt;&lt;/script&gt;\n\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre> <pre><code>// Nastaven\u00ed mapy, jej\u00edho st\u0159edu a \u00farovn\u011b p\u0159ibl\u00ed\u017een\u00ed\nvar map = L.map('map').setView([50.104, 14.388], 13);\n\n// Ur\u010den\u00ed podkladov\u00e9 mapy, maxim\u00e1ln\u00ed \u00farovn\u011b p\u0159ibl\u00ed\u017een\u00ed a zdroje dat\nL.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {\n    maxZoom: 19,\n    attribution: '&amp;copy; &lt;a href=\"http://www.openstreetmap.org/copyright\"&gt;OpenStreetMap&lt;/a&gt;'\n}).addTo(map);\n\n// Body s textov\u00fdmi informacemi\nvar points = [\n    { coords: [50.104, 14.388], text: \"FSv \u010cVUT v Praze\" },\n    { coords: [50.091, 14.402], text: \"Pra\u017esk\u00fd hrad\" },\n    { coords: [50.082, 14.426], text: \"metro M\u016fstek\" },\n    { coords: [50.106, 14.437], text: \"vlak Praha Hole\u0161ovice-zast\u00e1vka\" }\n];\n\n// Linie propojuj\u00edc\u00ed n\u011bkolik bod\u016f \nvar line = L.polyline(points.map(p =&gt; p.coords), {color: \"red\", weight: 10}).addTo(map);\n\n// Polygon se zadan\u00fdmi vrcholy\nvar polygon = L.polygon(points.map(p =&gt; p.coords), {color: \"blue\", weight: 3, fillColor: \"lightblue\", fillOpacity: \"0.8\"}).addTo(map);\n\n// Pop-up pro polygon\npolygon.bindPopup(\"Toto je polygon\");\n\n// P\u0159id\u00e1n\u00ed marker\u016f s popisky pro ka\u017ed\u00fd bod\npoints.forEach(function(point) {\n    L.marker(point.coords).addTo(map).bindPopup(point.text);\n});\n\n// Nastaven\u00ed parametr\u016f vlastn\u00edho markeru\nvar blackMarker = L.icon({\n    iconUrl: '/assets/cerny_popup.png', // Um\u00edst\u011bn\u00ed obr\u00e1zku na disku\n    iconSize:     [60, 60], // Velikost ikony v px\n    iconAnchor:   [0, 80], // Pozice, na kter\u00e9 se zobraz\u00ed ikona - v\u016f\u010di bodu\n    popupAnchor:  [30, -100] // Pozice, ze kter\u00e9 se popup otev\u0159e - v\u016f\u010di bodu\n});\n\n// Samostatn\u00fd bod s nov\u00fdm zna\u010den\u00edm\nvar markerDivokaS = L.marker([50.093, 14.324], {icon: blackMarker}).addTo(map); \nmarkerDivokaS.bindPopup(\"Zde je &lt;b style='color: red;'&gt;Divok\u00e1 \u0160\u00e1rka&lt;/b&gt;\");\n</code></pre> <pre><code>/* Velikost mapov\u00e9ho okna */\n#map {\n    height: 800px;\n    width: 60%;\n}\n</code></pre>"},{"location":"cviceni/cviceni3/#4-pridani-mapovych-vrstev","title":"4) P\u0159id\u00e1n\u00ed mapov\u00fdch vrstev","text":"<p>Katalog r\u016fzn\u00fdch podkladov\u00fdch map nalezneme ZDE. Sta\u010d\u00ed v prav\u00e9m menu vybrat mapu a n\u00e1sledn\u011b zkop\u00edrovat jej\u00ed parametry v js k\u00f3du.</p> <p> V\u00fdb\u011br podkladov\u00e9 mapy v katalogu</p> <p>Zkop\u00edrovan\u00e9 parametry podkladov\u00e9 mapy vlo\u017e\u00edme do JavaScriptu.</p> script.js <pre><code>// Definice podkladov\u00e9 OpenTopoMap\nvar otm = L.tileLayer('https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png', {\n    maxZoom: 17,\n    attribution: 'Map data: &amp;copy; &lt;a href=\"https://www.openstreetmap.org/copyright\"&gt;OpenStreetMap&lt;/a&gt; contributors, &lt;a href=\"http://viewfinderpanoramas.org\"&gt;SRTM&lt;/a&gt; | Map style: &amp;copy; &lt;a href=\"https://opentopomap.org\"&gt;OpenTopoMap&lt;/a&gt; (&lt;a href=\"https://creativecommons.org/licenses/by-sa/3.0/\"&gt;CC-BY-SA&lt;/a&gt;)'\n});\n\n// P\u0159i\u00e1n\u00ed OpenTopoMap do mapy\notm.addTo(map);\n</code></pre> <p> Zm\u011bna podkladov\u00e9 mapy</p> <p>N\u00e1sledn\u011b je pot\u0159eba upravit definici p\u016fvodn\u00ed OpenStreetMap na za\u010d\u00e1tku skriptu p\u0159i\u0159azen\u00edm n\u00e1zvu, nap\u0159. <code>osm</code>.</p> script.js <pre><code>// Ur\u010den\u00ed podkladov\u00e9 mapy, maxim\u00e1ln\u00ed \u00farovn\u011b p\u0159ibl\u00ed\u017een\u00ed a zdroje dat\nvar osm = L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {\n    maxZoom: 19,\n    attribution: '&amp;copy; &lt;a href=\"http://www.openstreetmap.org/copyright\"&gt;OpenStreetMap&lt;/a&gt;'\n}).addTo(map);\n</code></pre> <p>Jako t\u0159et\u00ed podkladovou vrstvu p\u0159id\u00e1me Ortofoto \u010cR z \u010c\u00daZK. Tato vrsta je dostupn\u00e1 jako WMS slu\u017eba, tud\u00ed\u017e ji mus\u00edme p\u0159idat s trochu jin\u00fdmi parametry ne\u017e p\u0159edchoz\u00ed OpenTopoMap.</p> script.js <pre><code>// P\u0159id\u00e1n\u00ed ortofota jako WMS slu\u017eby, ur\u010den\u00ed vrstvy, form\u00e1tu a pr\u016fhlednosti\nvar ortofoto = L.tileLayer.wms(\"https://ags.cuzk.gov.cz/arcgis1/services/ORTOFOTO/MapServer/WMSServer\", {\n    layers: \"0\", \n    format: \"image/png\",\n    transparent: true,\n    attribution: \"&amp;copy \u010c\u00daZK\"\n}).addTo(map);\n</code></pre> <p>Parametry vrstvy <code>layers</code>, <code>format</code> a <code>transparent</code> nalezneme ve vlastnostech slu\u017eby <code>GetCapabilities</code>. </p> <p> Z\u00edsk\u00e1n\u00ed pot\u0159ebn\u00fdch parametr\u016f z GetCapabilities</p> <p> P\u0159id\u00e1n\u00ed ortofota</p> <p>Nyn\u00ed na konec skriptu vlo\u017e\u00edme p\u0159ep\u00edn\u00e1n\u00ed podkladov\u00fdch vrstev. </p> script.js <pre><code>// Prom\u011bnn\u00e1 uchov\u00e1vaj\u00edc\u00ed podkladov\u00e9 mapy, mezi kter\u00fdmi chceme p\u0159ep\u00ednat\nvar baseMaps = {\n    \"OpenStreetMap\": osm, // \"popis mapy\": nazevPromenne\n    \"OpenTopoMap\": otm,\n    \"Ortofoto \u010cR\": ortofoto\n};\n\n// Grafick\u00e9 p\u0159ep\u00edn\u00e1n\u00ed podkladov\u00fdch map\nvar layerControl = L.control.layers(baseMaps).addTo(map);\n</code></pre> <p>Nyn\u00ed se nab\u00eddka p\u0159epnut\u00ed map zobraz\u00ed po najet\u00ed kurzoru my\u0161i na ikonu mapov\u00fdch vrstev. Jestli\u017ee bychom cht\u011bli vid\u011bt p\u0159ep\u00edn\u00e1n\u00ed vrstev st\u00e1le zobrazen\u00e9, pak p\u0159id\u00e1me \u00fapravu parametru <code>collapsed</code>. </p> <p>Prvn\u00edm parametrem n\u00ed\u017ee upraven\u00e9ho p\u0159ep\u00edn\u00e1n\u00ed je prom\u011bnn\u00e1 podkladov\u00fdch map (<code>baseMaps</code>), druh\u00fdm prom\u011bnn\u00e1 mapov\u00fdch vrstev (zat\u00edm jsme neu\u010dili, proto <code>null</code>) a n\u00e1sleduje voliteln\u00e9 nastaven\u00ed, tedy nap\u0159 <code>collapsed</code>. </p> <p>P\u0159i na\u010dten\u00ed str\u00e1nky se v podkladu zobraz\u00ed OpenTopoMap, kter\u00e1 byla v k\u00f3du p\u0159idan\u00e1 jako posledn\u00ed.</p> script.js <pre><code>// Grafick\u00e9 p\u0159ep\u00edn\u00e1n\u00ed podkladov\u00fdch map\nvar layerControl = L.control.layers(baseMaps, null, {collapsed: false}).addTo(map);\n</code></pre> <p> P\u0159ep\u00edn\u00e1n\u00ed podkladov\u00fdch map</p> <p>Z\u00e1v\u011brem je\u0161t\u011b p\u0159id\u00e1me p\u0159ep\u00edn\u00e1n\u00ed i pro mapov\u00e9 vrstvy, tedy body, linii a polygon. </p> <p>N\u00e1sledn\u011b mus\u00edme p\u0159epsat druh\u00fd parametr v p\u0159ep\u00edn\u00e1n\u00ed vrstev z <code>null</code> na <code>overlayMaps</code>, tedy p\u0159idat mapov\u00e9 vrstvy jako sou\u010d\u00e1st p\u0159ep\u00edn\u00e1n\u00ed.</p> script.js <pre><code>// Prom\u011bnn\u00e1 uchov\u00e1vaj\u00edc\u00ed mapov\u00e9 vrstvy, kter\u00e9 chceme zobrazovat a skr\u00fdvat\nvar overlayMaps = {\n    \"Divok\u00e1 \u0160\u00e1rka\": markerDivokaS,\n    \"Moje linie\": line, \n    \"M\u016fj polygon\": polygon\n};\n\n// Grafick\u00e9 p\u0159ep\u00edn\u00e1n\u00ed podkladov\u00fdch map\nvar layerControl = L.control.layers(baseMaps, overlayMaps, {collapsed: false}).addTo(map);\n</code></pre> <p> P\u0159ep\u00edn\u00e1n\u00ed podkladov\u00fdch map a mapov\u00fdch vrstev</p> <p>Pokud bychom cht\u011bli do p\u0159ep\u00edn\u00e1n\u00ed vlo\u017eit i body d\u00e1vkov\u011b zobrazen\u00e9 funkc\u00ed <code>forEach()</code>, pak je t\u0159eba tyto body nejd\u0159\u00edve shluknout do jedn\u00e9 skupiny, se kterou budeme pracovat jako s celkem.</p> <p>Z\u00e1rove\u0148 je t\u0159eba upravit funkci <code>forEach()</code> tak, aby se ka\u017ed\u00fd bod nep\u0159i\u0159adil hned do mapy, ale do skupiny <code>markersLayer</code>. A\u017e na dal\u0161\u00edm \u0159\u00e1dku v\u0161echny body dohromady vlo\u017e\u00edme do mapy.</p> script.js <pre><code>// Vytvo\u0159en\u00ed vrstvy pro markery\nvar markersLayer = L.layerGroup();\n\n// P\u0159id\u00e1n\u00ed marker\u016f s popisky pro ka\u017ed\u00fd bod\npoints.forEach(function(point) {\n    L.marker(point.coords).bindPopup(point.text).addTo(markersLayer);\n});\n\n// Vlo\u017een\u00ed skupiny bod\u016f do mapy\nmarkersLayer.addTo(map);\n</code></pre> <p>Posledn\u00edm krokem je pak p\u0159id\u00e1n\u00ed skupiny bod\u016f <code>markersLayer</code> do v\u00fdb\u011bru vrstev.</p> script.js <pre><code>// Prom\u011bnn\u00e1 uchov\u00e1vaj\u00edc\u00ed mapov\u00e9 vrstvy, kter\u00e9 chceme zobrazovat a skr\u00fdvat\nvar overlayMaps = {\n    \"Zaj\u00edmav\u00e1 m\u00edsta\": markersLayer,\n    \"Divok\u00e1 \u0160\u00e1rka\": markerDivokaS,\n    \"Moje linie\": line, \n    \"M\u016fj polygon\": polygon\n};\n</code></pre> <p> Fin\u00e1ln\u00ed verze mapov\u00e9 aplikace se v\u0161emi mapov\u00fdmi vrstvami</p> <p> Upozorn\u011bn\u00ed</p> <p>Pokud chceme m\u00edt n\u011bjakou vrstvu skrytou p\u0159i na\u010dten\u00ed mapy, pak ji jednodu\u0161e nep\u0159id\u00e1v\u00e1me do mapy v k\u00f3du pomoc\u00ed <code>vrstva.addTo(map)</code>, ale zobraz\u00edme ji pouze v\u00fdb\u011brem vrstev.</p> Stav k\u00f3du po dokon\u010den\u00ed kroku 4) P\u0159id\u00e1n\u00ed mapov\u00fdch vrstev  index.html - beze zm\u011bnyscript.jsstyle.css - beze zm\u011bny <pre><code>&lt;!DOCTYPE html&gt; \n&lt;html&gt; \n&lt;head&gt; \n    &lt;meta charset=\"UTF-8\"&gt; \n    &lt;meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"&gt;\n    &lt;link rel=\"stylesheet\" href=\"style.css\"&gt;\n\n    &lt;!-- Extern\u00ed p\u0159ipojen\u00ed CSS symbologie Leaflet--&gt;\n    &lt;link rel=\"stylesheet\" href=\"https://unpkg.com/leaflet@1.9.4/dist/leaflet.css\"\n    integrity=\"sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=\"\n    crossorigin=\"\"/&gt;\n\n\n    &lt;!-- Extern\u00ed p\u0159ipojen\u00ed JS knihovny -&gt; vlo\u017eit a\u017e po p\u0159ipojen\u00ed CSS souboru --&gt;\n    &lt;script src=\"https://unpkg.com/leaflet@1.9.4/dist/leaflet.js\"\n    integrity=\"sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=\"\n    crossorigin=\"\"&gt;&lt;/script&gt;\n\n    &lt;title&gt;Moje prvn\u00ed Leaflet mapa&lt;/title&gt; \n&lt;/head&gt;\n&lt;body&gt; \n\n    &lt;h1&gt;P\u011bkn\u00e1 mapa v Leafletu&lt;/h1&gt; \n\n    &lt;div id=\"map\"&gt;&lt;/div&gt;\n    &lt;script src=\"script.js\"&gt;&lt;/script&gt;\n\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre> <pre><code>// Nastaven\u00ed mapy, jej\u00edho st\u0159edu a \u00farovn\u011b p\u0159ibl\u00ed\u017een\u00ed\nvar map = L.map('map').setView([50.104, 14.388], 13);\n\n// Ur\u010den\u00ed podkladov\u00e9 mapy, maxim\u00e1ln\u00ed \u00farovn\u011b p\u0159ibl\u00ed\u017een\u00ed a zdroje dat\nvar osm = L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {\n    maxZoom: 19,\n    attribution: '&amp;copy; &lt;a href=\"http://www.openstreetmap.org/copyright\"&gt;OpenStreetMap&lt;/a&gt;'\n}).addTo(map);\n\n// Definice podkladov\u00e9 OpenTopoMap\nvar otm = L.tileLayer('https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png', {\n    maxZoom: 17,\n    attribution: 'Map data: &amp;copy; &lt;a href=\"https://www.openstreetmap.org/copyright\"&gt;OpenStreetMap&lt;/a&gt; contributors, &lt;a href=\"http://viewfinderpanoramas.org\"&gt;SRTM&lt;/a&gt; | Map style: &amp;copy; &lt;a href=\"https://opentopomap.org\"&gt;OpenTopoMap&lt;/a&gt; (&lt;a href=\"https://creativecommons.org/licenses/by-sa/3.0/\"&gt;CC-BY-SA&lt;/a&gt;)'\n});\n\n// P\u0159i\u00e1n\u00ed OpenTopoMap do mapy\n//otm.addTo(map);\n\n// P\u0159id\u00e1n\u00ed ortofota jako WMS slu\u017eby, ur\u010den\u00ed vrstvy, form\u00e1tu a pr\u016fhlednosti\nvar ortofoto = L.tileLayer.wms(\"https://ags.cuzk.gov.cz/arcgis1/services/ORTOFOTO/MapServer/WMSServer\", {\n    layers: \"0\", \n    format: \"image/png\",\n    transparent: true,\n    attribution: \"&amp;copy \u010c\u00daZK\"\n});\n\n// Body s textov\u00fdmi informacemi\nvar points = [\n    { coords: [50.104, 14.388], text: \"FSv \u010cVUT v Praze\" },\n    { coords: [50.091, 14.402], text: \"Pra\u017esk\u00fd hrad\" },\n    { coords: [50.082, 14.426], text: \"metro M\u016fstek\" },\n    { coords: [50.106, 14.437], text: \"vlak Praha Hole\u0161ovice-zast\u00e1vka\" }\n];\n\n// Linie propojuj\u00edc\u00ed n\u011bkolik bod\u016f \nvar line = L.polyline(points.map(p =&gt; p.coords), {color: \"red\", weight: 10}).addTo(map);\n\n// Polygon se zadan\u00fdmi vrcholy\nvar polygon = L.polygon(points.map(p =&gt; p.coords), {color: \"blue\", weight: 3, fillColor: \"lightblue\", fillOpacity: \"0.8\"}).addTo(map);\n\n// Pop-up pro polygon\npolygon.bindPopup(\"Toto je polygon\");\n\n// Vytvo\u0159en\u00ed vrstvy pro markery\nvar markersLayer = L.layerGroup();\n\n// P\u0159id\u00e1n\u00ed marker\u016f s popisky pro ka\u017ed\u00fd bod\npoints.forEach(function(point) {\n    L.marker(point.coords).bindPopup(point.text).addTo(markersLayer);\n});\n\n// Vlo\u017een\u00ed skupiny bod\u016f do mapy\nmarkersLayer.addTo(map);\n\n// Nastaven\u00ed parametr\u016f vlastn\u00edho markeru\nvar blackMarker = L.icon({\n    iconUrl: '/assets/cerny_popup.png', // Um\u00edst\u011bn\u00ed obr\u00e1zku na disku\n    iconSize:     [60, 60], // Velikost ikony v px\n    iconAnchor:   [0, 80], // Pozice, na kter\u00e9 se zobraz\u00ed ikona - v\u016f\u010di bodu\n    popupAnchor:  [30, -100] // Pozice, ze kter\u00e9 se popup otev\u0159e - v\u016f\u010di bodu\n});\n\n// Samostatn\u00fd bod s nov\u00fdm zna\u010den\u00edm\nvar markerDivokaS = L.marker([50.093, 14.324], {icon: blackMarker}).addTo(map); \nmarkerDivokaS.bindPopup(\"Zde je &lt;b style='color: red;'&gt;Divok\u00e1 \u0160\u00e1rka&lt;/b&gt;\");\n\n// Prom\u011bnn\u00e1 uchov\u00e1vaj\u00edc\u00ed podkladov\u00e9 mapy, mezi kter\u00fdmi chceme p\u0159ep\u00ednat\nvar baseMaps = {\n    \"OpenStreetMap\": osm, // \"popis mapy\": nazevPromenne\n    \"OpenTopoMap\": otm,\n    \"Ortofoto \u010cR\": ortofoto\n};\n\n// Prom\u011bnn\u00e1 uchov\u00e1vaj\u00edc\u00ed mapov\u00e9 vrstvy, kter\u00e9 chceme zobrazovat a skr\u00fdvat\nvar overlayMaps = {\n    \"Zaj\u00edmav\u00e1 m\u00edsta\": markersLayer,\n    \"Divok\u00e1 \u0160\u00e1rka\": markerDivokaS,\n    \"Moje linie\": line, \n    \"M\u016fj polygon\": polygon\n};\n\n// Grafick\u00e9 p\u0159ep\u00edn\u00e1n\u00ed podkladov\u00fdch map\nvar layerControl = L.control.layers(baseMaps, overlayMaps, {collapsed: false}).addTo(map);\n</code></pre> <pre><code>/* Velikost mapov\u00e9ho okna */\n#map {\n    height: 800px;\n    width: 60%;\n}\n</code></pre>"},{"location":"cviceni/cviceni4/","title":"Cvi\u010den\u00ed 4","text":""},{"location":"cviceni/cviceni4/#geojson","title":"GeoJSON","text":"<p>GeoJSON (Geographic JavaScript Object Notation) je otev\u0159en\u00fd form\u00e1t pro ukl\u00e1d\u00e1n\u00ed a v\u00fdm\u011bnu geografick\u00fdch dat. Tento form\u00e1t je navr\u017een\u00fd tak, aby reprezentoval geografick\u00e9 prvky s jejich neprostorov\u00fdmi atributy. </p> <p>Je zalo\u017een\u00fd na standardu JSON (JavaScript Object Notation), co\u017e ho \u010din\u00ed \u010diteln\u00fdm pro lidi i stroje a snadno zpracovateln\u00fdm v r\u016fzn\u00fdch programovac\u00edch jazyc\u00edch.</p>"},{"location":"cviceni/cviceni4/#struktura-formatu-geojson","title":"Struktura form\u00e1tu GeoJSON","text":"<ul> <li> <p><code>type</code> \u2013 specifikace typu objektu geometrie nebo kolekce sou\u0159adnic (<code>FeatureCollection</code>)</p> </li> <li> <p><code>geometry</code> \u2013 ur\u010den\u00ed prostorov\u00ed reprezentace dat (nap\u0159. bod, linie, polygon)</p> </li> <li> <p><code>properties</code> \u2013 atributy nebo metadata vztahuj\u00edc\u00ed se k dan\u00e9 geometrii</p> </li> <li> <p><code>coordinates</code> \u2013 zem\u011bpisn\u00e9 sou\u0159adnice bodu \u010di lomov\u00fdch bod\u016f (<code>[zem\u011bpisn\u00e1 d\u00e9lka (longitude), \u0161\u00ed\u0159ka (latitude), nadmo\u0159sk\u00e1 v\u00fd\u0161ka]</code>)</p> </li> </ul> data.geojson <pre><code>{\n    \"type\": \"Feature\",\n    \"geometry\": {\n        \"type\": \"Point\",\n        \"coordinates\": [125.6, 10.1]\n    },\n    \"properties\": {\n        \"name\": \"Dinagat Islands\"\n    }\n}\n</code></pre>"},{"location":"cviceni/cviceni4/#typy-geometrie-geojson","title":"Typy geometrie GeoJSON","text":"<ul> <li> <p><code>Point</code> \u2013 bod</p> </li> <li> <p><code>LineString</code> \u2013 linie</p> </li> <li> <p><code>Polygon</code> \u2013 polygon</p> </li> <li> <p><code>MultiPoint</code> \u2013 sada n\u011bkolika bod\u016f</p> </li> <li> <p><code>MultiLineString</code> \u2013 sada n\u011bkolika lini\u00ed</p> </li> <li> <p><code>MultiPolygon</code> \u2013 sada n\u011bkolika polygon\u016f</p> </li> <li> <p><code>Feature</code> \u2013 geometrick\u00e9 objekty s p\u0159idan\u00fdmi parametry</p> </li> <li> <p><code>FeatureCollection</code> \u2013 sada n\u011bkolika <code>Feature</code> </p> </li> </ul> <p>Lep\u0161\u00ed pochopen\u00ed struktury vytv\u00e1\u0159en\u00ed geodat ve form\u00e1tu GeoJSON m\u016f\u017eeme z\u00edskat p\u0159i vyu\u017eit\u00ed platformy geojson.io.</p> <p> Platforma geojson.io</p> <p> TopoJSON</p> <p>TopoJSON je nadstavba GeoJSON, kter\u00e1 se li\u0161\u00ed t\u00edm, \u017ee neukl\u00e1d\u00e1 opakuj\u00edc\u00ed se informace o topologii sousedn\u00edch prvk\u016f, co\u017e vede k men\u0161\u00ed velikosti souboru a efektivn\u011bj\u0161\u00ed pr\u00e1ci s geoprostorov\u00fdmi daty.</p> <p>Nap\u0159\u00edklad spole\u010dn\u00e1 hranice dvou st\u00e1t\u016f (\u010ceska a N\u011bmecka) se ulo\u017e\u00ed pouze jednou. V GeoJSONu by se tato hranice ulo\u017eila dvakr\u00e1t (jednou pro polygon \u010ceska, podruh\u00e9 pro polygon N\u011bmecka). Je t\u00edm p\u00e1dem vhodn\u00fd pro vyu\u017eit\u00ed u v\u011bt\u0161\u00edch datov\u00fdch sad \u010di p\u0159i nutnosti zachov\u00e1n\u00ed topologie.</p> <p>Datov\u00e1 struktura je naopak v porovn\u00e1n\u00ed s GeoJSONem slo\u017eit\u011bj\u0161\u00ed. </p> <p>V\u00edce informac\u00ed: https://github.com/topojson/topojson</p>"},{"location":"cviceni/cviceni4/#nacteni-dat-z-geojson-do-mapove-aplikace","title":"Na\u010dten\u00ed dat z GeoJSON do mapov\u00e9 aplikace","text":"<p>Toto cvi\u010den\u00ed navazuje na z\u00e1v\u011br p\u0159edchoz\u00edho cvi\u010den\u00ed. Za\u010d\u00edn\u00e1me tedy s k\u00f3dem z minul\u00e9 hodiny, kter\u00fd je vyps\u00e1n v nab\u00eddce n\u00ed\u017ee. K\u00f3d se v\u0161ak bude v\u00fdrazn\u011b m\u011bnit, tak\u017ee doporu\u010dujeme vytvo\u0159it kopii dat z minul\u00e9 hodiny do nov\u00e9 slo\u017eky, ve kter\u00e9 budete pracovat. Takto si zachov\u00e1te postup z obou hodin ulo\u017een\u00fd.</p> Stav k\u00f3du na za\u010d\u00e1tku cvi\u010den\u00ed  index.html - beze zm\u011bnyscript.jsstyle.css - beze zm\u011bny <pre><code>&lt;!DOCTYPE html&gt; \n&lt;html&gt; \n&lt;head&gt; \n    &lt;meta charset=\"UTF-8\"&gt; \n    &lt;meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"&gt;\n    &lt;link rel=\"stylesheet\" href=\"style.css\"&gt;\n\n    &lt;!-- Extern\u00ed p\u0159ipojen\u00ed CSS symbologie Leaflet--&gt;\n    &lt;link rel=\"stylesheet\" href=\"https://unpkg.com/leaflet@1.9.4/dist/leaflet.css\"\n    integrity=\"sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=\"\n    crossorigin=\"\"/&gt;\n\n\n    &lt;!-- Extern\u00ed p\u0159ipojen\u00ed JS knihovny -&gt; vlo\u017eit a\u017e po p\u0159ipojen\u00ed CSS souboru --&gt;\n    &lt;script src=\"https://unpkg.com/leaflet@1.9.4/dist/leaflet.js\"\n    integrity=\"sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=\"\n    crossorigin=\"\"&gt;&lt;/script&gt;\n\n    &lt;title&gt;Moje prvn\u00ed Leaflet mapa&lt;/title&gt; \n&lt;/head&gt;\n&lt;body&gt; \n\n    &lt;h1&gt;P\u011bkn\u00e1 mapa v Leafletu&lt;/h1&gt; \n\n    &lt;div id=\"map\"&gt;&lt;/div&gt;\n    &lt;script src=\"script.js\"&gt;&lt;/script&gt;\n\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre> <pre><code>// Nastaven\u00ed mapy, jej\u00edho st\u0159edu a \u00farovn\u011b p\u0159ibl\u00ed\u017een\u00ed\nvar map = L.map('map').setView([50.104, 14.388], 13);\n\n// Ur\u010den\u00ed podkladov\u00e9 mapy, maxim\u00e1ln\u00ed \u00farovn\u011b p\u0159ibl\u00ed\u017een\u00ed a zdroje dat\nvar osm = L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {\n    maxZoom: 19,\n    attribution: '&amp;copy; &lt;a href=\"http://www.openstreetmap.org/copyright\"&gt;OpenStreetMap&lt;/a&gt;'\n}).addTo(map);\n\n// Definice podkladov\u00e9 OpenTopoMap\nvar otm = L.tileLayer('https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png', {\n    maxZoom: 17,\n    attribution: 'Map data: &amp;copy; &lt;a href=\"https://www.openstreetmap.org/copyright\"&gt;OpenStreetMap&lt;/a&gt; contributors, &lt;a href=\"http://viewfinderpanoramas.org\"&gt;SRTM&lt;/a&gt; | Map style: &amp;copy; &lt;a href=\"https://opentopomap.org\"&gt;OpenTopoMap&lt;/a&gt; (&lt;a href=\"https://creativecommons.org/licenses/by-sa/3.0/\"&gt;CC-BY-SA&lt;/a&gt;)'\n});\n\n// P\u0159i\u00e1n\u00ed OpenTopoMap do mapy\n//otm.addTo(map);\n\n// P\u0159id\u00e1n\u00ed ortofota jako WMS slu\u017eby, ur\u010den\u00ed vrstvy, form\u00e1tu a pr\u016fhlednosti\nvar ortofoto = L.tileLayer.wms(\"https://ags.cuzk.gov.cz/arcgis1/services/ORTOFOTO/MapServer/WMSServer\", {\n    layers: \"0\", \n    format: \"image/png\",\n    transparent: true,\n    attribution: \"&amp;copy \u010c\u00daZK\"\n});\n\n// Body s textov\u00fdmi informacemi\nvar points = [\n    { coords: [50.104, 14.388], text: \"FSv \u010cVUT v Praze\" },\n    { coords: [50.091, 14.402], text: \"Pra\u017esk\u00fd hrad\" },\n    { coords: [50.082, 14.426], text: \"metro M\u016fstek\" },\n    { coords: [50.106, 14.437], text: \"vlak Praha Hole\u0161ovice-zast\u00e1vka\" }\n];\n\n// Linie propojuj\u00edc\u00ed n\u011bkolik bod\u016f \nvar line = L.polyline(points.map(p =&gt; p.coords), {color: \"red\", weight: 10}).addTo(map);\n\n// Polygon se zadan\u00fdmi vrcholy\nvar polygon = L.polygon(points.map(p =&gt; p.coords), {color: \"blue\", weight: 3, fillColor: \"lightblue\", fillOpacity: \"0.8\"}).addTo(map);\n\n// Pop-up pro polygon\npolygon.bindPopup(\"Toto je polygon\");\n\n// Vytvo\u0159en\u00ed vrstvy pro markery\nvar markersLayer = L.layerGroup();\n\n// P\u0159id\u00e1n\u00ed marker\u016f s popisky pro ka\u017ed\u00fd bod\npoints.forEach(function(point) {\n    L.marker(point.coords).bindPopup(point.text).addTo(markersLayer);\n});\n\n// Vlo\u017een\u00ed skupiny bod\u016f do mapy\nmarkersLayer.addTo(map);\n\n// Nastaven\u00ed parametr\u016f vlastn\u00edho markeru\nvar blackMarker = L.icon({\n    iconUrl: '/assets/cerny_popup.png', // Um\u00edst\u011bn\u00ed obr\u00e1zku na disku\n    iconSize:     [60, 60], // Velikost ikony v px\n    iconAnchor:   [0, 80], // Pozice, na kter\u00e9 se zobraz\u00ed ikona - v\u016f\u010di bodu\n    popupAnchor:  [30, -100] // Pozice, ze kter\u00e9 se popup otev\u0159e - v\u016f\u010di bodu\n});\n\n// Samostatn\u00fd bod s nov\u00fdm zna\u010den\u00edm\nvar markerDivokaS = L.marker([50.093, 14.324], {icon: blackMarker}).addTo(map); \nmarkerDivokaS.bindPopup(\"Zde je &lt;b style='color: red;'&gt;Divok\u00e1 \u0160\u00e1rka&lt;/b&gt;\");\n\n// Prom\u011bnn\u00e1 uchov\u00e1vaj\u00edc\u00ed podkladov\u00e9 mapy, mezi kter\u00fdmi chceme p\u0159ep\u00ednat\nvar baseMaps = {\n    \"OpenStreetMap\": osm, // \"popis mapy\": nazevPromenne\n    \"OpenTopoMap\": otm,\n    \"Ortofoto \u010cR\": ortofoto\n};\n\n// Prom\u011bnn\u00e1 uchov\u00e1vaj\u00edc\u00ed mapov\u00e9 vrstvy, kter\u00e9 chceme zobrazovat a skr\u00fdvat\nvar overlayMaps = {\n    \"Zaj\u00edmav\u00e1 m\u00edsta\": markersLayer,\n    \"Divok\u00e1 \u0160\u00e1rka\": markerDivokaS,\n    \"Moje linie\": line, \n    \"M\u016fj polygon\": polygon\n};\n\n// Grafick\u00e9 p\u0159ep\u00edn\u00e1n\u00ed podkladov\u00fdch map\nvar layerControl = L.control.layers(baseMaps, overlayMaps, {collapsed: false}).addTo(map);\n</code></pre> <pre><code>/* Velikost mapov\u00e9ho okna */\n#map {\n    height: 800px;\n    width: 60%;\n}\n</code></pre>"},{"location":"cviceni/cviceni4/#1-nacteni-bodu-z-geojson-do-mapove-aplikace","title":"1) Na\u010dten\u00ed bodu z GeoJSON do mapov\u00e9 aplikace","text":"<p>Nejprve na\u010dteme GeoJSON p\u0159\u00edmo v k\u00f3du jako prom\u011bnnou. Na platform\u011b geojson.io vytvo\u0159\u00edme jeden bod, nap\u0159\u00edklad na pozici Prahy. K\u00a0tomu vyu\u017eijeme prvn\u00ed tla\u010d\u00edtko z prav\u00e9 postrann\u00ed nab\u00eddky v map\u011b. Vygenerovan\u00fd k\u00f3d v prav\u00e9 \u010d\u00e1sti obrazovky si zkop\u00edrujeme.</p> <p> Vytvo\u0159en\u00ed bodu se sou\u0159adnicemi Prahy</p> <p>V javascript k\u00f3du vytvo\u0159\u00edme prom\u011bnnou, do kter\u00e9 vlo\u017e\u00edme zkop\u00edrovan\u00fd k\u00f3d z GeoJSON.</p> script.js <pre><code>// Na\u010dten\u00ed bodu z GeoJSON z\u00e1pisu\nvar prahaBod = [\n    // Sem vlo\u017e\u00edme k\u00f3d z GeoJSON\n];\n</code></pre> <p>Po vlo\u017een\u00ed bodu:</p> script.js <pre><code>// Na\u010dten\u00ed bodu z GeoJSON z\u00e1pisu\nvar prahaBod = [\n    {\n        \"type\": \"FeatureCollection\",\n        \"features\": [\n        {\n            \"type\": \"Feature\",\n            \"properties\": {},\n            \"geometry\": {\n            \"coordinates\": [\n                14.41581389404206,\n                50.0970543797564\n            ],\n            \"type\": \"Point\"\n            }\n        }\n        ]\n    }\n];\n</code></pre> <p>V dal\u0161\u00ed f\u00e1zi je t\u0159eba p\u0159idat na\u010dten\u00ed souboru z GeoJSONu do vrstvy <code>prahaBodLayer</code>.</p> script.js <pre><code>// P\u0159i\u0159azen\u00ed GeoJSONu do mapov\u00e9 vrstvy a jej\u00ed p\u0159id\u00e1n\u00ed do mapy\nvar prahaBodLayer = L.geoJSON(prahaBod).addTo(map);\n</code></pre> <p>P\u0159ed pokra\u010dov\u00e1n\u00edm na dal\u0161\u00ed kroky mapovou aplikaci pro\u010dist\u00edme a sma\u017eeme \u010di zakoment\u00e1\u0159ujeme v\u0161echny ostatn\u00ed mapov\u00e9 vrstvy <code>markersLayer</code>, <code>markerDivokaS</code>, <code>line</code> a <code>polygon</code>.</p> <p> Mapov\u00e1 aplikace po pro\u010di\u0161t\u011bn\u00ed k\u00f3du a na\u010dten\u00ed bodu z GeoJSON</p> Stav k\u00f3du po dokon\u010den\u00ed kroku 1) Na\u010dten\u00ed bodu z GeoJSON do mapov\u00e9 aplikace index.html - beze zm\u011bnyscript.jsstyle.css - beze zm\u011bny <pre><code>&lt;!DOCTYPE html&gt; \n&lt;html&gt; \n&lt;head&gt; \n    &lt;meta charset=\"UTF-8\"&gt; \n    &lt;meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"&gt;\n    &lt;link rel=\"stylesheet\" href=\"style.css\"&gt;\n\n    &lt;!-- Extern\u00ed p\u0159ipojen\u00ed CSS symbologie Leaflet--&gt;\n    &lt;link rel=\"stylesheet\" href=\"https://unpkg.com/leaflet@1.9.4/dist/leaflet.css\"\n    integrity=\"sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=\"\n    crossorigin=\"\"/&gt;\n\n\n    &lt;!-- Extern\u00ed p\u0159ipojen\u00ed JS knihovny -&gt; vlo\u017eit a\u017e po p\u0159ipojen\u00ed CSS souboru --&gt;\n    &lt;script src=\"https://unpkg.com/leaflet@1.9.4/dist/leaflet.js\"\n    integrity=\"sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=\"\n    crossorigin=\"\"&gt;&lt;/script&gt;\n\n    &lt;title&gt;Moje prvn\u00ed Leaflet mapa&lt;/title&gt; \n&lt;/head&gt;\n&lt;body&gt; \n\n    &lt;h1&gt;P\u011bkn\u00e1 mapa v Leafletu&lt;/h1&gt; \n\n    &lt;div id=\"map\"&gt;&lt;/div&gt;\n    &lt;script src=\"script.js\"&gt;&lt;/script&gt;\n\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre> <pre><code>// Nastaven\u00ed mapy, jej\u00edho st\u0159edu a \u00farovn\u011b p\u0159ibl\u00ed\u017een\u00ed\nvar map = L.map('map').setView([50.104, 14.388], 13);\n\n// Ur\u010den\u00ed podkladov\u00e9 mapy, maxim\u00e1ln\u00ed \u00farovn\u011b p\u0159ibl\u00ed\u017een\u00ed a zdroje dat\nvar osm = L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {\n    maxZoom: 19,\n    attribution: '&amp;copy; &lt;a href=\"http://www.openstreetmap.org/copyright\"&gt;OpenStreetMap&lt;/a&gt;'\n}).addTo(map);\n\n// Definice podkladov\u00e9 OpenTopoMap\nvar otm = L.tileLayer('https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png', {\n    maxZoom: 17,\n    attribution: 'Map data: &amp;copy; &lt;a href=\"https://www.openstreetmap.org/copyright\"&gt;OpenStreetMap&lt;/a&gt; contributors, &lt;a href=\"http://viewfinderpanoramas.org\"&gt;SRTM&lt;/a&gt; | Map style: &amp;copy; &lt;a href=\"https://opentopomap.org\"&gt;OpenTopoMap&lt;/a&gt; (&lt;a href=\"https://creativecommons.org/licenses/by-sa/3.0/\"&gt;CC-BY-SA&lt;/a&gt;)'\n});\n\n// P\u0159id\u00e1n\u00ed ortofota jako WMS slu\u017eby, ur\u010den\u00ed vrstvy, form\u00e1tu a pr\u016fhlednosti\nvar ortofoto = L.tileLayer.wms(\"https://ags.cuzk.gov.cz/arcgis1/services/ORTOFOTO/MapServer/WMSServer\", {\n    layers: \"0\", \n    format: \"image/png\",\n    transparent: true,\n    attribution: \"&amp;copy \u010c\u00daZK\"\n});\n\n// Na\u010dten\u00ed bodu z GeoJSON z\u00e1pisu\nvar prahaBod = [\n    {\n        \"type\": \"FeatureCollection\",\n        \"features\": [\n        {\n            \"type\": \"Feature\",\n            \"properties\": {},\n            \"geometry\": {\n            \"coordinates\": [\n                14.41581389404206,\n                50.0970543797564\n            ],\n            \"type\": \"Point\"\n            }\n        }\n        ]\n    }\n];\n\n// P\u0159i\u0159azen\u00ed GeoJSONu do mapov\u00e9 vrstvy a jej\u00ed p\u0159id\u00e1n\u00ed do mapy\nvar prahaBodLayer = L.geoJSON(prahaBod).addTo(map);\n\n// Prom\u011bnn\u00e1 uchov\u00e1vaj\u00edc\u00ed podkladov\u00e9 mapy, mezi kter\u00fdmi chceme p\u0159ep\u00ednat\nvar baseMaps = {\n    \"OpenStreetMap\": osm, // \"popis mapy\": nazevPromenne\n    \"OpenTopoMap\": otm,\n    \"Ortofoto \u010cR\": ortofoto\n};\n\n// Prom\u011bnn\u00e1 uchov\u00e1vaj\u00edc\u00ed mapov\u00e9 vrstvy, kter\u00e9 chceme zobrazovat a skr\u00fdvat\nvar overlayMaps = {\n    \"Praha\": prahaBodLayer\n};\n\n// Grafick\u00e9 p\u0159ep\u00edn\u00e1n\u00ed podkladov\u00fdch map\nvar layerControl = L.control.layers(baseMaps, overlayMaps, {collapsed: false}).addTo(map);\n</code></pre> <pre><code>/* Velikost mapov\u00e9ho okna */\n#map {\n    height: 800px;\n    width: 60%;\n}\n</code></pre>"},{"location":"cviceni/cviceni4/#2-nacteni-externiho-souboru-s-daty","title":"2) Na\u010dten\u00ed extern\u00edho souboru s daty","text":"<p>Na platform\u011b geojson.io vytvo\u0159\u00edme jednoduchou bodovou vrstvu s vybran\u00fdmi m\u011bsty v \u010cesku. Pro za\u010d\u00e1tek sta\u010d\u00ed zvolit nap\u0159. 4 body, p\u0159i\u010dem\u017e ka\u017ed\u00e9mu bodu ur\u010d\u00edme hodnotu atributu <code>nazev</code>, do kter\u00e9 zap\u00ed\u0161eme n\u00e1zev dan\u00e9ho m\u011bsta. Soubor s daty st\u00e1hneme tla\u010d\u00edtkem Save v lev\u00e9m horn\u00edm rohu. Soubor p\u0159ejmenujeme na <code>mesta.geojson</code>.</p> <p> Sta\u017een\u00ed GeoJSONu s vytvo\u0159en\u00fdmi body</p> <p>Takto sta\u017een\u00fd soubor je mo\u017en\u00e9 nahr\u00e1t p\u0159\u00edmo do Leaflet, nicm\u00e9n\u011b jednodu\u0161\u0161\u00ed mo\u017enost\u00ed je vytvo\u0159en\u00ed nov\u00e9ho js scriptu, nap\u0159. <code>mesta_GeoJSON.js</code>, ve kter\u00e9m vytvo\u0159\u00edme prom\u011bnnou <code>mesta</code> a p\u0159i\u0159ad\u00edme j\u00ed data ze sta\u017een\u00e9ho GeoJSONu. Nov\u00fd soubor ulo\u017e\u00edme do stejn\u00e9 pracovn\u00ed slo\u017eky jako ostatn\u00ed skripty.</p> <p>Struktura p\u0159ipraven\u00e9ho souboru bude vypadat n\u00e1sledovn\u011b:</p> mesta_GeoJSON.js <pre><code>var mesta = {\n    \"type\": \"FeatureCollection\",\n    \"features\": [\n    {\n        ... // Zde jsou ostatn\u00ed na\u010dten\u00e1 data z GeoJSONu\n    }\n    ]\n};\n</code></pre> <p>Abychom mohli m\u011bsta ze souboru <code>mesta_GeoJSON.js</code> na\u010d\u00edst, je pot\u0159eba skript p\u0159ipojit v <code>index.html</code> \u2013 obdobn\u011b jako ostatn\u00ed pou\u017eit\u00e9 js soubory. </p> <p>Do hlavi\u010dky v html tedy p\u0159id\u00e1me:</p> index.html <pre><code>&lt;!-- Na\u010dten\u00ed souboru s m\u011bsty GeoJSON--&gt;\n&lt;script src=\"mesta_GeoJSON.js\"&gt;&lt;/script&gt;\n</code></pre> <p>Nyn\u00ed m\u016f\u017eeme pokra\u010dovat na\u010dten\u00edm bod\u016f z GeoJSONu do mapy. To provededeme podobn\u011b jako p\u0159i na\u010dten\u00ed samostatn\u00e9ho bodu Prahy v p\u0159edchoz\u00edm kroku. Z\u00e1rove\u0148 p\u0159id\u00e1me novou vrstu m\u011bst do spr\u00e1vce vrstev.</p> script.js <pre><code>// Na\u010dten\u00ed GeoJSONu z prom\u011bnn\u00e9 \"mesta\" ulo\u017een\u00e9 v souboru \"mesta_GeoJSON.js\"\nvar mestaLayer = L.geoJSON(mesta).addTo(map);\n\n// Prom\u011bnn\u00e1 uchov\u00e1vaj\u00edc\u00ed mapov\u00e9 vrstvy, kter\u00e9 chceme zobrazovat a skr\u00fdvat\nvar overlayMaps = {\n    \"Praha\": prahaBodLayer,\n    \"M\u011bsta\": mestaLayer\n};\n</code></pre> <p> Mapov\u00e1 aplikace po na\u010dten\u00ed m\u011bst z GeoJSONu</p> <p>Z\u00e1v\u011brem tohoto kroku si uprav\u00edme rozsah \u00favodn\u00edho okna pro cel\u00e9 \u010cesko a uprav\u00edme zobrazen\u00ed m\u011bst tak, abychom byli schopni zobrazit pop-up s jejich n\u00e1zvy.</p> script.js <pre><code>// Nastaven\u00ed mapy, jej\u00edho st\u0159edu a \u00farovn\u011b p\u0159ibl\u00ed\u017een\u00ed\nvar map = L.map('map').setView([49.860, 15.315], 8); // V\u00fdb\u011br bodu zhruba uprost\u0159ed republiky\n</code></pre> <p>Popup vytvo\u0159\u00edme obdobn\u011b jako v minul\u00e9 hodin\u011b, jen je k atributu pot\u0159eba p\u0159istupovat p\u0159es <code>feature.properties.nazev</code>. </p> <p>N\u00ed\u017ee je vypsan\u00fd k\u00f3d pro oby\u010dejn\u00fd pop-up vypisuj\u00edc\u00ed pouze atribut (v koment\u00e1\u0159i) a upraven\u00fd pop-up, kter\u00fd vyu\u017e\u00edv\u00e1 html z\u00e1pis. Pokud se odkazujeme p\u0159\u00edmo na hodnoty atributu, pak je nutn\u00e9 ve v\u00fdpisu popupu vyu\u017e\u00edt zp\u011btn\u00e9 uvozovky (backquote) <code>`</code> (Alt\u00a0+\u00a0\u00fd). </p> script.js <pre><code>// Na\u010dten\u00ed GeoJSONu z prom\u011bnn\u00e9 \"mesta\" ulo\u017een\u00e9 v souboru \"mesta_GeoJSON.js\"\nvar mestaLayer = L.geoJSON(mesta, {\nonEachFeature: function (feature, layer) {\n    if (feature.properties &amp;&amp; feature.properties.nazev) {\n        // layer.bindPopup(feature.properties.nazev); // Oby\u010dejn\u00fd popup\n        layer.bindPopup(`Jm\u00e9no m\u011bsta je &lt;b&gt;${feature.properties.nazev}&lt;/b&gt;`); // Vylep\u0161en\u00fd popup\n    }\n}\n}).addTo(map);\n</code></pre> <p> P\u0159id\u00e1n\u00ed pop-upu pro v\u00fdpis hodnoty atributu \"n\u00e1zev\"</p> Stav k\u00f3du po dokon\u010den\u00ed kroku 2) Na\u010dten\u00ed extern\u00edho souboru s daty index.htmlscript.jsstyle.css - beze zm\u011bny <pre><code>&lt;!DOCTYPE html&gt; \n&lt;html&gt; \n&lt;head&gt; \n    &lt;meta charset=\"UTF-8\"&gt; \n    &lt;meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"&gt;\n    &lt;link rel=\"stylesheet\" href=\"style.css\"&gt;\n\n    &lt;!-- Na\u010dten\u00ed souboru s m\u011bsty GeoJSON--&gt;\n    &lt;script src=\"mesta_GeoJSON.js\"&gt;&lt;/script&gt;\n\n    &lt;!-- Extern\u00ed p\u0159ipojen\u00ed CSS symbologie Leaflet--&gt;\n    &lt;link rel=\"stylesheet\" href=\"https://unpkg.com/leaflet@1.9.4/dist/leaflet.css\"\n    integrity=\"sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=\"\n    crossorigin=\"\"/&gt;\n\n\n    &lt;!-- Extern\u00ed p\u0159ipojen\u00ed JS knihovny -&gt; vlo\u017eit a\u017e po p\u0159ipojen\u00ed CSS souboru --&gt;\n    &lt;script src=\"https://unpkg.com/leaflet@1.9.4/dist/leaflet.js\"\n    integrity=\"sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=\"\n    crossorigin=\"\"&gt;&lt;/script&gt;\n\n    &lt;title&gt;Moje prvn\u00ed Leaflet mapa&lt;/title&gt; \n&lt;/head&gt;\n&lt;body&gt; \n\n    &lt;h1&gt;P\u011bkn\u00e1 mapa v Leafletu&lt;/h1&gt; \n\n    &lt;div id=\"map\"&gt;&lt;/div&gt;\n    &lt;script src=\"script.js\"&gt;&lt;/script&gt;\n\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre> <pre><code>// Nastaven\u00ed mapy, jej\u00edho st\u0159edu a \u00farovn\u011b p\u0159ibl\u00ed\u017een\u00ed\nvar map = L.map('map').setView([49.860, 15.315], 8); // V\u00fdb\u011br bodu zhruba uprost\u0159ed republiky\n\n// Ur\u010den\u00ed podkladov\u00e9 mapy, maxim\u00e1ln\u00ed \u00farovn\u011b p\u0159ibl\u00ed\u017een\u00ed a zdroje dat\nvar osm = L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {\n    maxZoom: 19,\n    attribution: '&amp;copy; &lt;a href=\"http://www.openstreetmap.org/copyright\"&gt;OpenStreetMap&lt;/a&gt;'\n}).addTo(map);\n\n// Definice podkladov\u00e9 OpenTopoMap\nvar otm = L.tileLayer('https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png', {\n    maxZoom: 17,\n    attribution: 'Map data: &amp;copy; &lt;a href=\"https://www.openstreetmap.org/copyright\"&gt;OpenStreetMap&lt;/a&gt; contributors, &lt;a href=\"http://viewfinderpanoramas.org\"&gt;SRTM&lt;/a&gt; | Map style: &amp;copy; &lt;a href=\"https://opentopomap.org\"&gt;OpenTopoMap&lt;/a&gt; (&lt;a href=\"https://creativecommons.org/licenses/by-sa/3.0/\"&gt;CC-BY-SA&lt;/a&gt;)'\n});\n\n// P\u0159id\u00e1n\u00ed ortofota jako WMS slu\u017eby, ur\u010den\u00ed vrstvy, form\u00e1tu a pr\u016fhlednosti\nvar ortofoto = L.tileLayer.wms(\"https://ags.cuzk.gov.cz/arcgis1/services/ORTOFOTO/MapServer/WMSServer\", {\n    layers: \"0\", \n    format: \"image/png\",\n    transparent: true,\n    attribution: \"&amp;copy \u010c\u00daZK\"\n});\n\n// Na\u010dten\u00ed bodu z GeoJSON z\u00e1pisu\nvar prahaBod = [\n    {\n        \"type\": \"FeatureCollection\",\n        \"features\": [\n        {\n            \"type\": \"Feature\",\n            \"properties\": {},\n            \"geometry\": {\n            \"coordinates\": [\n                14.41581389404206,\n                50.0970543797564\n            ],\n            \"type\": \"Point\"\n            }\n        }\n        ]\n    }\n];\n\n// P\u0159i\u0159azen\u00ed GeoJSONu do mapov\u00e9 vrstvy a jej\u00ed p\u0159id\u00e1n\u00ed do mapy\nvar prahaBodLayer = L.geoJSON(prahaBod).addTo(map);\n\n// Na\u010dten\u00ed GeoJSONu z prom\u011bnn\u00e9 \"mesta\" ulo\u017een\u00e9 v souboru \"mesta_GeoJSON.js\"\nvar mestaLayer = L.geoJSON(mesta, {\nonEachFeature: function (feature, layer) {\n    if (feature.properties &amp;&amp; feature.properties.nazev) {\n        // layer.bindPopup(feature.properties.nazev); // Oby\u010dejn\u00fd popup\n        layer.bindPopup(`Jm\u00e9no m\u011bsta je &lt;b&gt;${feature.properties.nazev}&lt;/b&gt;`); // Vylep\u0161en\u00fd popup\n    }\n}\n}).addTo(map);\n\n// Prom\u011bnn\u00e1 uchov\u00e1vaj\u00edc\u00ed podkladov\u00e9 mapy, mezi kter\u00fdmi chceme p\u0159ep\u00ednat\nvar baseMaps = {\n    \"OpenStreetMap\": osm, // \"popis mapy\": nazevPromenne\n    \"OpenTopoMap\": otm,\n    \"Ortofoto \u010cR\": ortofoto\n};\n\n// Prom\u011bnn\u00e1 uchov\u00e1vaj\u00edc\u00ed mapov\u00e9 vrstvy, kter\u00e9 chceme zobrazovat a skr\u00fdvat\nvar overlayMaps = {\n    \"Praha\": prahaBodLayer,\n    \"M\u011bsta\": mestaLayer\n};\n\n// Grafick\u00e9 p\u0159ep\u00edn\u00e1n\u00ed podkladov\u00fdch map\nvar layerControl = L.control.layers(baseMaps, overlayMaps, {collapsed: false}).addTo(map);\n</code></pre> <pre><code>/* Velikost mapov\u00e9ho okna */\n#map {\n    height: 800px;\n    width: 60%;\n}\n</code></pre>"},{"location":"cviceni/cviceni4/#tvorba-kartogramu","title":"Tvorba kartogramu","text":"<p>V\u00edce informac\u00ed o tvorb\u011b kartogramu v Leaflet je na str\u00e1nk\u00e1ch dokumentace.</p>"},{"location":"cviceni/cviceni4/#1-pripojeni-dat-orp","title":"1) P\u0159ipojen\u00ed dat ORP","text":"<p> P\u0159\u00edprava GeoJSON v GIS a jeho kontrola</p> <p>Pro vytvo\u0159en\u00ed kartogramu vyu\u017eijeme data obc\u00ed s roz\u0161\u00ed\u0159enou p\u016fsobnost\u00ed (ORP) z datasetu Arc\u010cR 4.3. Zde nalezneme \u0159adu zaj\u00edmav\u00fdch statistick\u00fdch dat, kter\u00e1 v n\u00e1sleduj\u00edc\u00edch n\u011bkolika cvi\u010den\u00edch vizualizujeme metodami tematick\u00e9 kartografie \u010di infografikou.</p> <p>1) Nejprve bude nutn\u00e9 prot\u0159\u00eddit atributy ve vrstv\u011b ORP dle obr\u00e1zku n\u00ed\u017ee.</p> <p> Vybran\u00e9 atributy z vrstvy ORP </p> <p>2) D\u00e1le polygony generalizujeme pro webov\u00e9 prost\u0159ed\u00ed geoprocesingovou funkc\u00ed Smooth Shared Edges. Vyu\u017eijeme algoritmus <code>PAEK</code> a <code>Smoothing Tolerance</code> nastav\u00edme na <code>1500 m</code>.</p> <p>3) Z\u00e1v\u011brem provedeme export do GeoJSONu pomoc\u00ed funkce Features to JSON. Za\u0161krtneme <code>Output to GeoJSON</code> a <code>Project to WGS_1984</code>.</p> <p>Vyexportovan\u00fd GeoJSON m\u016f\u017eeme validovat (zkontrolovat) pomoc\u00ed n\u011bkter\u00e9ho z webov\u00fdch n\u00e1stroj\u016f:</p> <ul> <li>GeoJSONLint: n\u00e1hled na data</li> </ul> <p> Kontrola a n\u00e1hled GeoJSONu pomoc\u00ed GeoJSONLint </p> <ul> <li>GeoJSON validator: validace p\u0159\u00edmo ze souboru - v\u00fdpis p\u0159\u00edpadn\u00fdch chyb  Kontrola GeoJSON pomoc\u00ed GeoJSON validator </li> </ul> <p> GeoJSON s daty ORP</p> <p>Nyn\u00ed se dostaneme k na\u010dten\u00ed polygon\u016f ORP s atributy. Je pot\u0159eba vytvo\u0159it nov\u00fd js soubor, nap\u0159. <code>ORP_GeoJSON.js</code>, ve kter\u00e9m bude vlo\u017een\u00fd GeoJSON s ORP, kter\u00fd jsme si dop\u0159edu p\u0159ipravili v GIS. Postup p\u0159ipojen\u00ed bude velmi podobn\u00fd jako v p\u0159\u00edpad\u011b bod\u016f m\u011bst. V\u00a0podstat\u011b vytvo\u0159\u00edme novou prom\u011bnnou <code>ORP</code>, do kter\u00e9 p\u0159i\u0159ad\u00edme GeoJSON.</p> <p>Struktura nov\u00e9ho souboru bude n\u00e1sleduj\u00edc\u00ed:</p> ORP_GeoJSON.js <pre><code>var ORP = {\"type\":\"FeatureCollection\",\"features\":\n[\n    ... // Zde jsou ostatn\u00ed na\u010dten\u00e1 data z GeoJSONu \n]\n};\n</code></pre> <p>P\u0159ipojen\u00ed v hlavi\u010dce <code>index.html</code>:</p> index.html <pre><code>&lt;!-- Na\u010dten\u00ed souboru s ORP GeoJSON--&gt;\n&lt;script src=\"ORP_GeoJSON.js\"&gt;&lt;/script&gt;\n</code></pre> <p>Provedeme jednoduch\u00e9 na\u010dten\u00ed polygon\u016f ORP do aplikace. Na\u010d\u00edt\u00e1n\u00ed dat ORP mus\u00edme vypsat t\u00e9m\u011b\u0159 a\u017e na konci skriptu. Tedy ve\u0161ker\u00e9 v\u00fdpo\u010detn\u00ed \u010di jin\u00e9 funkce k n\u011bmu vzta\u017een\u00e9 vlo\u017e\u00edme v k\u00f3du p\u0159ed jeho na\u010dten\u00ed.</p> script.js <pre><code>// Na\u010dten\u00ed GeoJSONu s polygony ORP do mapy\nvar ORPLayer = L.geoJSON(ORP).addTo(map);\n</code></pre> <p> Zobrazen\u00ed polygon\u016f ORP v mapov\u00e9 aplikaci</p> Stav k\u00f3du po dokon\u010den\u00ed kroku 1) P\u0159ipojen\u00ed dat ORP index.htmlscript.jsstyle.css - beze zm\u011bny <pre><code>&lt;!DOCTYPE html&gt; \n&lt;html&gt; \n&lt;head&gt; \n    &lt;meta charset=\"UTF-8\"&gt; \n    &lt;meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"&gt;\n    &lt;link rel=\"stylesheet\" href=\"style.css\"&gt;\n\n    &lt;!-- Na\u010dten\u00ed souboru s m\u011bsty GeoJSON--&gt;\n    &lt;script src=\"mesta_GeoJSON.js\"&gt;&lt;/script&gt;\n\n    &lt;!-- Na\u010dten\u00ed souboru s ORP GeoJSON--&gt;\n    &lt;script src=\"ORP_GeoJSON.js\"&gt;&lt;/script&gt;\n\n    &lt;!-- Extern\u00ed p\u0159ipojen\u00ed CSS symbologie Leaflet--&gt;\n    &lt;link rel=\"stylesheet\" href=\"https://unpkg.com/leaflet@1.9.4/dist/leaflet.css\"\n    integrity=\"sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=\"\n    crossorigin=\"\"/&gt;\n\n\n    &lt;!-- Extern\u00ed p\u0159ipojen\u00ed JS knihovny -&gt; vlo\u017eit a\u017e po p\u0159ipojen\u00ed CSS souboru --&gt;\n    &lt;script src=\"https://unpkg.com/leaflet@1.9.4/dist/leaflet.js\"\n    integrity=\"sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=\"\n    crossorigin=\"\"&gt;&lt;/script&gt;\n\n    &lt;title&gt;Moje prvn\u00ed Leaflet mapa&lt;/title&gt; \n&lt;/head&gt;\n&lt;body&gt; \n\n    &lt;h1&gt;P\u011bkn\u00e1 mapa v Leafletu&lt;/h1&gt; \n\n    &lt;div id=\"map\"&gt;&lt;/div&gt;\n    &lt;script src=\"script.js\"&gt;&lt;/script&gt;\n\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre> <pre><code>// Nastaven\u00ed mapy, jej\u00edho st\u0159edu a \u00farovn\u011b p\u0159ibl\u00ed\u017een\u00ed\nvar map = L.map('map').setView([49.860, 15.315], 8); // V\u00fdb\u011br bodu zhruba uprost\u0159ed republiky\n\n// Ur\u010den\u00ed podkladov\u00e9 mapy, maxim\u00e1ln\u00ed \u00farovn\u011b p\u0159ibl\u00ed\u017een\u00ed a zdroje dat\nvar osm = L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {\n    maxZoom: 19,\n    attribution: '&amp;copy; &lt;a href=\"http://www.openstreetmap.org/copyright\"&gt;OpenStreetMap&lt;/a&gt;'\n}).addTo(map);\n\n// Definice podkladov\u00e9 OpenTopoMap\nvar otm = L.tileLayer('https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png', {\n    maxZoom: 17,\n    attribution: 'Map data: &amp;copy; &lt;a href=\"https://www.openstreetmap.org/copyright\"&gt;OpenStreetMap&lt;/a&gt; contributors, &lt;a href=\"http://viewfinderpanoramas.org\"&gt;SRTM&lt;/a&gt; | Map style: &amp;copy; &lt;a href=\"https://opentopomap.org\"&gt;OpenTopoMap&lt;/a&gt; (&lt;a href=\"https://creativecommons.org/licenses/by-sa/3.0/\"&gt;CC-BY-SA&lt;/a&gt;)'\n});\n\n// P\u0159id\u00e1n\u00ed ortofota jako WMS slu\u017eby, ur\u010den\u00ed vrstvy, form\u00e1tu a pr\u016fhlednosti\nvar ortofoto = L.tileLayer.wms(\"https://ags.cuzk.gov.cz/arcgis1/services/ORTOFOTO/MapServer/WMSServer\", {\n    layers: \"0\", \n    format: \"image/png\",\n    transparent: true,\n    attribution: \"&amp;copy \u010c\u00daZK\"\n});\n\n// Na\u010dten\u00ed bodu z GeoJSON z\u00e1pisu\nvar prahaBod = [\n    {\n        \"type\": \"FeatureCollection\",\n        \"features\": [\n        {\n            \"type\": \"Feature\",\n            \"properties\": {},\n            \"geometry\": {\n            \"coordinates\": [\n                14.41581389404206,\n                50.0970543797564\n            ],\n            \"type\": \"Point\"\n            }\n        }\n        ]\n    }\n];\n\n// P\u0159i\u0159azen\u00ed GeoJSONu do mapov\u00e9 vrstvy a jej\u00ed p\u0159id\u00e1n\u00ed do mapy\nvar prahaBodLayer = L.geoJSON(prahaBod).addTo(map);\n\n// Na\u010dten\u00ed GeoJSONu z prom\u011bnn\u00e9 \"mesta\" ulo\u017een\u00e9 v souboru \"mesta_GeoJSON.js\"\nvar mestaLayer = L.geoJSON(mesta, {\nonEachFeature: function (feature, layer) {\n    if (feature.properties &amp;&amp; feature.properties.nazev) {\n        // layer.bindPopup(feature.properties.nazev); // Oby\u010dejn\u00fd popup\n        layer.bindPopup(`Jm\u00e9no m\u011bsta je &lt;b&gt;${feature.properties.nazev}&lt;/b&gt;`); // Vylep\u0161en\u00fd popup\n    }\n}\n}).addTo(map);\n\n// Na\u010dten\u00ed GeoJSONu s polygony ORP do mapy\nvar ORPLayer = L.geoJSON(ORP).addTo(map);\n\n// Prom\u011bnn\u00e1 uchov\u00e1vaj\u00edc\u00ed podkladov\u00e9 mapy, mezi kter\u00fdmi chceme p\u0159ep\u00ednat\nvar baseMaps = {\n    \"OpenStreetMap\": osm, // \"popis mapy\": nazevPromenne\n    \"OpenTopoMap\": otm,\n    \"Ortofoto \u010cR\": ortofoto\n};\n\n// Prom\u011bnn\u00e1 uchov\u00e1vaj\u00edc\u00ed mapov\u00e9 vrstvy, kter\u00e9 chceme zobrazovat a skr\u00fdvat\nvar overlayMaps = {\n    \"Praha\": prahaBodLayer,\n    \"M\u011bsta\": mestaLayer\n};\n\n// Grafick\u00e9 p\u0159ep\u00edn\u00e1n\u00ed podkladov\u00fdch map\nvar layerControl = L.control.layers(baseMaps, overlayMaps, {collapsed: false}).addTo(map);\n</code></pre> <pre><code>/* Velikost mapov\u00e9ho okna */\n#map {\n    height: 800px;\n    width: 60%;\n}\n</code></pre>"},{"location":"cviceni/cviceni4/#2-zakladni-staticky-kartogram","title":"2) Z\u00e1kladn\u00ed statick\u00fd kartogram","text":"<p>Pro vytvo\u0159en\u00ed kartogramu je pot\u0159eba nejprve upravit na\u010d\u00edt\u00e1n\u00ed bod\u016f z GeoJSONu.</p> script.js <pre><code>// Na\u010dten\u00ed GeoJSONu s polygony ORP do mapy\nvar ORPLayer = L.geoJSON(ORP,{\n    style: kartogram, \n}).addTo(map);\n</code></pre> <p>Po p\u0159i\u0159azen\u00ed stylu <code>kartogram</code> do vrstvy <code>ORPLayer</code> bude pot\u0159eba vytvo\u0159it barvnou stupnici pro kartogram. Pro p\u0159edstavu o rozsahu dat m\u016f\u017eeme vyu\u017e\u00edt n\u00e1hled v GISu. </p> <p> V\u00fdpo\u010det hodnoty zobrazovan\u00e9ho atributu p\u0159\u00edmo v JavaScriptu</p> <p>Pokud m\u00e1me z GISu p\u0159ipraven\u00fd atribut pro vizualizaci, m\u016f\u017eeme pokra\u010dovat s p\u0159\u00edpravou barevn\u00e9 stupnice n\u00ed\u017ee. Nicm\u00e9n\u011b, v t\u00e9to uk\u00e1zce si je\u0161t\u011b mus\u00edme dopo\u010d\u00edtat hustotu obyvatelstva v ka\u017ed\u00e9m ORP.</p> script.js <pre><code>// V\u00fdpo\u010det nov\u00e9ho atributu pro ka\u017ed\u00fd prvek ORP \n// (hustota obyvatelstva = po\u010det obyvatel / plocha), p\u0159evod z m2 na km2 -&gt; vyn\u00e1soben\u00ed 1 000 000\nORP.features.forEach(function(feature){\n    if(feature.properties.Shape_Area &amp;&amp; feature.properties.poc_obyv_SLDB_2021){\n        feature.properties.hustota = (feature.properties.poc_obyv_SLDB_2021/feature.properties.Shape_Area)*1000000\n    }else{\n        feature.properties.hustota = 0\n    }\n})\n</code></pre> <p>V tomto p\u0159\u00edkladu budeme pracovat s hustotou obyvatelstva v jednotliv\u00fdch ORP, ale je mo\u017en\u00e9 pou\u017e\u00edt jin\u00fd vhodn\u00fd relativn\u00ed atribut. Barevnou stupnici m\u016f\u017eeme vytvo\u0159it pomoc\u00ed n\u00e1stroje ColorBrewer.</p> script.js <pre><code>// Vytvo\u0159en\u00ed barevn\u00e9 stupnice\nfunction getColor(d) {\nreturn d &gt; 1000 ? '#800026' :\n        d &gt; 500  ? '#BD0026' :\n        d &gt; 200  ? '#E31A1C' :\n        d &gt; 100  ? '#FC4E2A' :\n        d &gt; 50   ? '#FD8D3C' :\n        d &gt; 20   ? '#FEB24C' :\n                    '#FFEDA0'; // V\u00fdchoz\u00ed barva\n}\n</code></pre> <p>Pro vytvo\u0159en\u00ed statick\u00e9ho kartogramu je nutn\u00e9 je\u0161t\u011b definovat jeho styl, ve kter\u00e9m ur\u010d\u00edme atribut, kter\u00fd chceme vizualizovat. D\u00e1le m\u016f\u017eeme upravit styl vrstvy (pr\u016fhlednost, ohrani\u010den\u00ed apod.).</p> script.js <pre><code>// Styl kartogramu\nfunction kartogram(feature) {\nreturn {\n    fillColor: getColor(feature.properties.hustota), // Styl na z\u00e1klad\u011b atributu \"hustota\"\n    weight: 1,\n    opacity: 1,\n    color: 'white',\n    fillOpacity: 0.7\n};\n}\n</code></pre> <p>Z\u00e1v\u011brem pouze odstran\u00edme vykreslov\u00e1n\u00ed bodov\u00fdch vrstev p\u0159i na\u010dten\u00ed mapy \u2013 ponech\u00e1me je pouze v seznamu vrstev (smaz\u00e1n\u00edm p\u0159\u00edslu\u0161n\u00fdch <code>.addTo(map)</code>). Do seznamu p\u0159id\u00e1me nov\u011b vytvo\u0159enou vrstvu kartogramu <code>ORPLayer</code>.</p> script.js <pre><code>// Prom\u011bnn\u00e1 uchov\u00e1vaj\u00edc\u00ed mapov\u00e9 vrstvy, kter\u00e9 chceme zobrazovat a skr\u00fdvat\nvar overlayMaps = {\n    \"Praha\": prahaBodLayer,\n    \"M\u011bsta\": mestaLayer,\n    \"Hustota obyvatelstva\": ORPLayer\n};\n</code></pre> <p> Vytvo\u0159en\u00ed statick\u00e9ho (neinteraktivn\u00edho) kartogramu</p> Stav k\u00f3du po dokon\u010den\u00ed kroku 2) Z\u00e1kladn\u00ed statick\u00fd kartogram index.html - beze zm\u011bnyscript.jsstyle.css - beze zm\u011bny <pre><code>&lt;!DOCTYPE html&gt; \n&lt;html&gt; \n&lt;head&gt; \n    &lt;meta charset=\"UTF-8\"&gt; \n    &lt;meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"&gt;\n    &lt;link rel=\"stylesheet\" href=\"style.css\"&gt;\n\n    &lt;!-- Na\u010dten\u00ed souboru s m\u011bsty GeoJSON--&gt;\n    &lt;script src=\"mesta_GeoJSON.js\"&gt;&lt;/script&gt;\n\n    &lt;!-- Na\u010dten\u00ed souboru s ORP GeoJSON--&gt;\n    &lt;script src=\"ORP_GeoJSON.js\"&gt;&lt;/script&gt;\n\n    &lt;!-- Extern\u00ed p\u0159ipojen\u00ed CSS symbologie Leaflet--&gt;\n    &lt;link rel=\"stylesheet\" href=\"https://unpkg.com/leaflet@1.9.4/dist/leaflet.css\"\n    integrity=\"sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=\"\n    crossorigin=\"\"/&gt;\n\n\n    &lt;!-- Extern\u00ed p\u0159ipojen\u00ed JS knihovny -&gt; vlo\u017eit a\u017e po p\u0159ipojen\u00ed CSS souboru --&gt;\n    &lt;script src=\"https://unpkg.com/leaflet@1.9.4/dist/leaflet.js\"\n    integrity=\"sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=\"\n    crossorigin=\"\"&gt;&lt;/script&gt;\n\n    &lt;title&gt;Moje prvn\u00ed Leaflet mapa&lt;/title&gt; \n&lt;/head&gt;\n&lt;body&gt; \n\n    &lt;h1&gt;P\u011bkn\u00e1 mapa v Leafletu&lt;/h1&gt; \n\n    &lt;div id=\"map\"&gt;&lt;/div&gt;\n    &lt;script src=\"script.js\"&gt;&lt;/script&gt;\n\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre> <pre><code>// Nastaven\u00ed mapy, jej\u00edho st\u0159edu a \u00farovn\u011b p\u0159ibl\u00ed\u017een\u00ed\nvar map = L.map('map').setView([49.860, 15.315], 8); // V\u00fdb\u011br bodu zhruba uprost\u0159ed republiky\n\n// Ur\u010den\u00ed podkladov\u00e9 mapy, maxim\u00e1ln\u00ed \u00farovn\u011b p\u0159ibl\u00ed\u017een\u00ed a zdroje dat\nvar osm = L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {\n    maxZoom: 19,\n    attribution: '&amp;copy; &lt;a href=\"http://www.openstreetmap.org/copyright\"&gt;OpenStreetMap&lt;/a&gt;'\n}).addTo(map);\n\n// Definice podkladov\u00e9 OpenTopoMap\nvar otm = L.tileLayer('https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png', {\n    maxZoom: 17,\n    attribution: 'Map data: &amp;copy; &lt;a href=\"https://www.openstreetmap.org/copyright\"&gt;OpenStreetMap&lt;/a&gt; contributors, &lt;a href=\"http://viewfinderpanoramas.org\"&gt;SRTM&lt;/a&gt; | Map style: &amp;copy; &lt;a href=\"https://opentopomap.org\"&gt;OpenTopoMap&lt;/a&gt; (&lt;a href=\"https://creativecommons.org/licenses/by-sa/3.0/\"&gt;CC-BY-SA&lt;/a&gt;)'\n});\n\n// P\u0159id\u00e1n\u00ed ortofota jako WMS slu\u017eby, ur\u010den\u00ed vrstvy, form\u00e1tu a pr\u016fhlednosti\nvar ortofoto = L.tileLayer.wms(\"https://ags.cuzk.gov.cz/arcgis1/services/ORTOFOTO/MapServer/WMSServer\", {\n    layers: \"0\", \n    format: \"image/png\",\n    transparent: true,\n    attribution: \"&amp;copy \u010c\u00daZK\"\n});\n\n// Na\u010dten\u00ed bodu z GeoJSON z\u00e1pisu\nvar prahaBod = [\n    {\n        \"type\": \"FeatureCollection\",\n        \"features\": [\n        {\n            \"type\": \"Feature\",\n            \"properties\": {},\n            \"geometry\": {\n            \"coordinates\": [\n                14.41581389404206,\n                50.0970543797564\n            ],\n            \"type\": \"Point\"\n            }\n        }\n        ]\n    }\n];\n\n// P\u0159i\u0159azen\u00ed GeoJSONu do mapov\u00e9 vrstvy a jej\u00ed p\u0159id\u00e1n\u00ed do mapy\nvar prahaBodLayer = L.geoJSON(prahaBod);\n\n// Na\u010dten\u00ed GeoJSONu z prom\u011bnn\u00e9 \"mesta\" ulo\u017een\u00e9 v souboru \"mesta_GeoJSON.js\"\nvar mestaLayer = L.geoJSON(mesta, {\nonEachFeature: function (feature, layer) {\n    if (feature.properties &amp;&amp; feature.properties.nazev) {\n        // layer.bindPopup(feature.properties.nazev); // Oby\u010dejn\u00fd popup\n        layer.bindPopup(`Jm\u00e9no m\u011bsta je &lt;b&gt;${feature.properties.nazev}&lt;/b&gt;`); // Vylep\u0161en\u00fd popup\n    }\n}\n});\n\n// V\u00fdpo\u010det nov\u00e9ho atributu pro ka\u017ed\u00fd prvek ORP \n// (hustota obyvatelstva = po\u010det obyvatel / plocha), p\u0159evod z m2 na km2 -&gt; vyn\u00e1soben\u00ed 1 000 000\nORP.features.forEach(function(feature){\n    if(feature.properties.Shape_Area &amp;&amp; feature.properties.poc_obyv_SLDB_2021){\n        feature.properties.hustota = (feature.properties.poc_obyv_SLDB_2021/feature.properties.Shape_Area)*1000000\n    }else{\n        feature.properties.hustota = 0\n    }\n})\n\n// Vytvo\u0159en\u00ed barevn\u00e9 stupnice\nfunction getColor(d) {\nreturn d &gt; 1000 ? '#800026' :\n        d &gt; 500  ? '#BD0026' :\n        d &gt; 200  ? '#E31A1C' :\n        d &gt; 100  ? '#FC4E2A' :\n        d &gt; 50   ? '#FD8D3C' :\n        d &gt; 20   ? '#FEB24C' :\n                    '#FFEDA0'; // V\u00fdchoz\u00ed barva\n}\n\n// Styl kartogramu\nfunction kartogram(feature) {\nreturn {\n    fillColor: getColor(feature.properties.hustota), // Styl na z\u00e1klad\u011b atributu \"hustota\"\n    weight: 1,\n    opacity: 1,\n    color: 'white',\n    fillOpacity: 0.7\n};\n}\n\n// Na\u010dten\u00ed GeoJSONu s polygony ORP do mapy\nvar ORPLayer = L.geoJSON(ORP,{\n    style: kartogram \n}).addTo(map);\n\n// Prom\u011bnn\u00e1 uchov\u00e1vaj\u00edc\u00ed podkladov\u00e9 mapy, mezi kter\u00fdmi chceme p\u0159ep\u00ednat\nvar baseMaps = {\n    \"OpenStreetMap\": osm, // \"popis mapy\": nazevPromenne\n    \"OpenTopoMap\": otm,\n    \"Ortofoto \u010cR\": ortofoto\n};\n\n// Prom\u011bnn\u00e1 uchov\u00e1vaj\u00edc\u00ed mapov\u00e9 vrstvy, kter\u00e9 chceme zobrazovat a skr\u00fdvat\nvar overlayMaps = {\n    \"Praha\": prahaBodLayer,\n    \"M\u011bsta\": mestaLayer,\n    \"Hustota obyvatelstva\": ORPLayer\n};\n\n// Grafick\u00e9 p\u0159ep\u00edn\u00e1n\u00ed podkladov\u00fdch map\nvar layerControl = L.control.layers(baseMaps, overlayMaps, {collapsed: false}).addTo(map);\n</code></pre> <pre><code>/* Velikost mapov\u00e9ho okna */\n#map {\n    height: 800px;\n    width: 60%;\n}\n</code></pre>"},{"location":"cviceni/cviceni4/#3-interaktivni-kartogram","title":"3) Interaktivn\u00ed kartogram","text":"<p>Nyn\u00ed statick\u00fd kartogram uprav\u00edme tak, aby byl interaktivn\u00ed, a tedy vhodn\u00fd pro webovou mapovou aplikaci.</p> <p>V prvn\u00ed \u0159ad\u011b nastav\u00edme zv\u00fdrazn\u011bn\u00ed a v\u00fdb\u011br polygonu po najet\u00ed kurzoru my\u0161i.</p> script.js <pre><code>// V\u00fdb\u011br prvku po najet\u00ed kurzorem my\u0161i\nfunction highlightFeature(e) {\n    var layer = e.target;\n\n    // \u00daprava stylu vybran\u00e9ho prvku = jeho zv\u00fdrazn\u011bn\u00ed\n    layer.setStyle({\n        weight: 5,\n        color: '#666',\n        dashArray: '',\n        fillOpacity: 0.7\n    });\n\n    layer.bringToFront();\n}\n</code></pre> <p>D\u00e1le p\u0159id\u00e1me p\u0159ibl\u00ed\u017een\u00ed mapy na vybran\u00fd polygon po kliknut\u00ed lev\u00e9ho tla\u010d\u00edtka my\u0161i.</p> script.js <pre><code>// P\u0159ibl\u00ed\u017een\u00ed na vybran\u00fd polygon po kliknut\u00ed my\u0161\u00ed\nfunction zoomToFeature(e) {\n    map.fitBounds(e.target.getBounds());\n}\n</code></pre> <p>Abychom byli schopni p\u0159istupovat k jednotliv\u00fdm prvk\u016fm kartogramu, je pot\u0159eba vytvo\u0159it funkci <code>onEachFeature</code>, ve kter\u00e9 definujeme procesy v\u00fdb\u011bru polygonu a p\u0159ibl\u00ed\u017een\u00ed na n\u011bj. </p> script.js <pre><code>// P\u0159\u00edstup k jednotliv\u00fdm polygon\u016f ve vrstv\u011b\nfunction onEachFeature(feature, layer) {\n    layer.on({\n        mouseover: highlightFeature,\n        click: zoomToFeature\n    });\n}\n</code></pre> <p>Pro vytvo\u0159en\u00ed funk\u010dn\u00edho k\u00f3du mus\u00edme p\u0159i\u0159adit funkci <code>onEachFeature</code> do definice vrstvy:</p> script.js <pre><code>// Na\u010dten\u00ed GeoJSONu s polygony ORP do mapy\nvar ORPLayer = L.geoJSON(ORP,{\n    style: kartogram, \n    onEachFeature: onEachFeature\n}).addTo(map);\n</code></pre> <p>P\u0159i otestov\u00e1n\u00ed aplikace v sou\u010dasn\u00e9m stavu zjist\u00edme, \u017ee se vybran\u00e9 polygony nevyp\u00ednaj\u00ed, tzn. z\u016fst\u00e1vaj\u00ed st\u00e1le zv\u00fdrazn\u011bn\u00e9.</p> <p> ORP z\u016fst\u00e1vaj\u00ed vybran\u00e9 i po p\u0159ejet\u00ed my\u0161i na jin\u00fd polygon</p> <p>V k\u00f3du je pot\u0159eba p\u0159idat o\u0161et\u0159en\u00ed tohoto stavu tak, aby se styl dan\u00e9ho polygonu resetoval do z\u00e1kladn\u00edho nastaven\u00ed.</p> script.js <pre><code>// Resetov\u00e1n\u00ed stylu kartogramu po zru\u0161en\u00ed jeho v\u00fdb\u011bru my\u0161\u00ed\nfunction resetHighlight(e) {\n    ORPLayer.resetStyle(e.target);\n}\n</code></pre> <p>Pro spr\u00e1vn\u00e9 fungov\u00e1n\u00ed je nutn\u00e9 nov\u011b vytvo\u0159enou funkci <code>resetHighlight</code> p\u0159idat do funkce <code>onEachFeature</code>.</p> script.js <pre><code>// P\u0159\u00edstup k jednotliv\u00fdm polygon\u016f ve vrstv\u011b\nfunction onEachFeature(feature, layer) {\nlayer.on({\n    mouseover: highlightFeature,\n    mouseout: resetHighlight,\n    click: zoomToFeature\n});\n}\n</code></pre> <p>Aplikace n\u00e1sledn\u011b funguje spr\u00e1vn\u011b, tedy po najej\u00ed my\u0161i se vybere v\u017edy jeden polygon. Ten se po zm\u011bn\u011b v\u00fdb\u011bru op\u011bt skryje a zv\u00fdrazn\u00ed se dal\u0161\u00ed vybran\u00fd polygon.</p> <p> Interaktivn\u00ed v\u00fdb\u011br prvku v map\u011b</p> Stav k\u00f3du po dokon\u010den\u00ed kroku 3) Interaktivn\u00ed kartogram index.html - beze zm\u011bnyscript.jsstyle.css - beze zm\u011bny <pre><code>&lt;!DOCTYPE html&gt; \n&lt;html&gt; \n&lt;head&gt; \n    &lt;meta charset=\"UTF-8\"&gt; \n    &lt;meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"&gt;\n    &lt;link rel=\"stylesheet\" href=\"style.css\"&gt;\n\n    &lt;!-- Na\u010dten\u00ed souboru s m\u011bsty GeoJSON--&gt;\n    &lt;script src=\"mesta_GeoJSON.js\"&gt;&lt;/script&gt;\n\n    &lt;!-- Na\u010dten\u00ed souboru s ORP GeoJSON--&gt;\n    &lt;script src=\"ORP_GeoJSON.js\"&gt;&lt;/script&gt;\n\n    &lt;!-- Extern\u00ed p\u0159ipojen\u00ed CSS symbologie Leaflet--&gt;\n    &lt;link rel=\"stylesheet\" href=\"https://unpkg.com/leaflet@1.9.4/dist/leaflet.css\"\n    integrity=\"sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=\"\n    crossorigin=\"\"/&gt;\n\n\n    &lt;!-- Extern\u00ed p\u0159ipojen\u00ed JS knihovny -&gt; vlo\u017eit a\u017e po p\u0159ipojen\u00ed CSS souboru --&gt;\n    &lt;script src=\"https://unpkg.com/leaflet@1.9.4/dist/leaflet.js\"\n    integrity=\"sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=\"\n    crossorigin=\"\"&gt;&lt;/script&gt;\n\n    &lt;title&gt;Moje prvn\u00ed Leaflet mapa&lt;/title&gt; \n&lt;/head&gt;\n&lt;body&gt; \n\n    &lt;h1&gt;P\u011bkn\u00e1 mapa v Leafletu&lt;/h1&gt; \n\n    &lt;div id=\"map\"&gt;&lt;/div&gt;\n    &lt;script src=\"script.js\"&gt;&lt;/script&gt;\n\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre> <pre><code>// Nastaven\u00ed mapy, jej\u00edho st\u0159edu a \u00farovn\u011b p\u0159ibl\u00ed\u017een\u00ed\nvar map = L.map('map').setView([49.860, 15.315], 8); // V\u00fdb\u011br bodu zhruba uprost\u0159ed republiky\n\n// Ur\u010den\u00ed podkladov\u00e9 mapy, maxim\u00e1ln\u00ed \u00farovn\u011b p\u0159ibl\u00ed\u017een\u00ed a zdroje dat\nvar osm = L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {\n    maxZoom: 19,\n    attribution: '&amp;copy; &lt;a href=\"http://www.openstreetmap.org/copyright\"&gt;OpenStreetMap&lt;/a&gt;'\n}).addTo(map);\n\n// Definice podkladov\u00e9 OpenTopoMap\nvar otm = L.tileLayer('https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png', {\n    maxZoom: 17,\n    attribution: 'Map data: &amp;copy; &lt;a href=\"https://www.openstreetmap.org/copyright\"&gt;OpenStreetMap&lt;/a&gt; contributors, &lt;a href=\"http://viewfinderpanoramas.org\"&gt;SRTM&lt;/a&gt; | Map style: &amp;copy; &lt;a href=\"https://opentopomap.org\"&gt;OpenTopoMap&lt;/a&gt; (&lt;a href=\"https://creativecommons.org/licenses/by-sa/3.0/\"&gt;CC-BY-SA&lt;/a&gt;)'\n});\n\n// P\u0159id\u00e1n\u00ed ortofota jako WMS slu\u017eby, ur\u010den\u00ed vrstvy, form\u00e1tu a pr\u016fhlednosti\nvar ortofoto = L.tileLayer.wms(\"https://ags.cuzk.gov.cz/arcgis1/services/ORTOFOTO/MapServer/WMSServer\", {\n    layers: \"0\", \n    format: \"image/png\",\n    transparent: true,\n    attribution: \"&amp;copy \u010c\u00daZK\"\n});\n\n// Na\u010dten\u00ed bodu z GeoJSON z\u00e1pisu\nvar prahaBod = [\n    {\n        \"type\": \"FeatureCollection\",\n        \"features\": [\n        {\n            \"type\": \"Feature\",\n            \"properties\": {},\n            \"geometry\": {\n            \"coordinates\": [\n                14.41581389404206,\n                50.0970543797564\n            ],\n            \"type\": \"Point\"\n            }\n        }\n        ]\n    }\n];\n\n// P\u0159i\u0159azen\u00ed GeoJSONu do mapov\u00e9 vrstvy a jej\u00ed p\u0159id\u00e1n\u00ed do mapy\nvar prahaBodLayer = L.geoJSON(prahaBod);\n\n// Na\u010dten\u00ed GeoJSONu z prom\u011bnn\u00e9 \"mesta\" ulo\u017een\u00e9 v souboru \"mesta_GeoJSON.js\"\nvar mestaLayer = L.geoJSON(mesta, {\nonEachFeature: function (feature, layer) {\n    if (feature.properties &amp;&amp; feature.properties.nazev) {\n        // layer.bindPopup(feature.properties.nazev); // Oby\u010dejn\u00fd popup\n        layer.bindPopup(`Jm\u00e9no m\u011bsta je &lt;b&gt;${feature.properties.nazev}&lt;/b&gt;`); // Vylep\u0161en\u00fd popup\n    }\n}\n});\n\n// V\u00fdpo\u010det nov\u00e9ho atributu pro ka\u017ed\u00fd prvek ORP \n// (hustota obyvatelstva = po\u010det obyvatel / plocha), p\u0159evod z m2 na km2 -&gt; vyn\u00e1soben\u00ed 1 000 000\nORP.features.forEach(function(feature){\n    if(feature.properties.Shape_Area &amp;&amp; feature.properties.poc_obyv_SLDB_2021){\n        feature.properties.hustota = (feature.properties.poc_obyv_SLDB_2021/feature.properties.Shape_Area)*1000000\n    }else{\n        feature.properties.hustota = 0\n    }\n})\n\n// Vytvo\u0159en\u00ed barevn\u00e9 stupnice\nfunction getColor(d) {\nreturn d &gt; 1000 ? '#800026' :\n        d &gt; 500  ? '#BD0026' :\n        d &gt; 200  ? '#E31A1C' :\n        d &gt; 100  ? '#FC4E2A' :\n        d &gt; 50   ? '#FD8D3C' :\n        d &gt; 20   ? '#FEB24C' :\n                    '#FFEDA0'; // V\u00fdchoz\u00ed barva\n}\n\n// Styl kartogramu\nfunction kartogram(feature) {\nreturn {\n    fillColor: getColor(feature.properties.hustota), // Styl na z\u00e1klad\u011b atributu \"hustota\"\n    weight: 1,\n    opacity: 1,\n    color: 'white',\n    fillOpacity: 0.7\n};\n}\n\n// V\u00fdb\u011br prvku po najet\u00ed kurzorem my\u0161i\nfunction highlightFeature(e) {\n    var layer = e.target;\n\n    // \u00daprava stylu vybran\u00e9ho prvku = jeho zv\u00fdrazn\u011bn\u00ed\n    layer.setStyle({\n        weight: 5,\n        color: '#666',\n        dashArray: '',\n        fillOpacity: 0.7\n    });\n\n    layer.bringToFront();\n}\n\n// P\u0159ibl\u00ed\u017een\u00ed na vybran\u00fd polygon po kliknut\u00ed my\u0161\u00ed\nfunction zoomToFeature(e) {\n    map.fitBounds(e.target.getBounds());\n}\n\n// Resetov\u00e1n\u00ed stylu kartogramu po zru\u0161en\u00ed jeho v\u00fdb\u011bru my\u0161\u00ed\nfunction resetHighlight(e) {\n    ORPLayer.resetStyle(e.target);\n}\n\n// P\u0159\u00edstup k jednotliv\u00fdm polygon\u016f ve vrstv\u011b\nfunction onEachFeature(feature, layer) {\n    layer.on({\n        mouseover: highlightFeature,\n        mouseout: resetHighlight,\n        click: zoomToFeature\n    });\n}\n\n// Na\u010dten\u00ed GeoJSONu s polygony ORP do mapy\nvar ORPLayer = L.geoJSON(ORP,{\n    style: kartogram, \n    onEachFeature: onEachFeature\n}).addTo(map);\n\n// Prom\u011bnn\u00e1 uchov\u00e1vaj\u00edc\u00ed podkladov\u00e9 mapy, mezi kter\u00fdmi chceme p\u0159ep\u00ednat\nvar baseMaps = {\n    \"OpenStreetMap\": osm, // \"popis mapy\": nazevPromenne\n    \"OpenTopoMap\": otm,\n    \"Ortofoto \u010cR\": ortofoto\n};\n\n// Prom\u011bnn\u00e1 uchov\u00e1vaj\u00edc\u00ed mapov\u00e9 vrstvy, kter\u00e9 chceme zobrazovat a skr\u00fdvat\nvar overlayMaps = {\n    \"Praha\": prahaBodLayer,\n    \"M\u011bsta\": mestaLayer,\n    \"Hustota obyvatelstva\": ORPLayer\n};\n\n// Grafick\u00e9 p\u0159ep\u00edn\u00e1n\u00ed podkladov\u00fdch map\nvar layerControl = L.control.layers(baseMaps, overlayMaps, {collapsed: false}).addTo(map);\n</code></pre> <pre><code>/* Velikost mapov\u00e9ho okna */\n#map {\n    height: 800px;\n    width: 60%;\n}\n</code></pre>"},{"location":"cviceni/cviceni4/#4-pridani-pop-upu-a-legendy","title":"4) P\u0159id\u00e1n\u00ed pop-upu a legendy","text":"<p>Nejprve vyp\u00ed\u0161eme informace o vybran\u00e9m prvku z mapy do samostatn\u00e9ho divu, kter\u00fd vytvo\u0159\u00edme p\u0159\u00edmo pomoc\u00ed js.</p> <p>V informa\u010dn\u00edm pop-upu se vyp\u00ed\u0161e text, kter\u00fd bude vyu\u017e\u00edvat dva atributy polygon\u016f z GeoJSONu - <code>NAZEV</code> a <code>hustota</code> (zaokrouhl\u00edme na 2\u00a0des. m\u00edsta).</p> script.js <pre><code>// Vytvo\u0159en\u00ed pop-upu s informacemi o vybran\u00e9m prvku v map\u011b\nvar info = L.control();\n\ninfo.onAdd = function (map) {\n    this._div = L.DomUtil.create('div', 'info'); // Vytvo\u0159\u00ed div s t\u0159\u00eddou \"info\"\n    this.update();\n    return this._div;\n};\n\n// Funkce pro aktualizaci po-upu na z\u00e1klad\u011b p\u0159edan\u00fdch vlastnost\u00ed prvku\ninfo.update = function (props) {\n    this._div.innerHTML = '&lt;h4&gt;Hustota obyvatel&lt;/h4&gt;' +  (props ?\n        '&lt;b&gt;' + props.nazev + '&lt;/b&gt;&lt;br /&gt;' + props.hustota.toFixed(2) + ' obyv. / km&lt;sup&gt;2&lt;/sup&gt;'\n        : 'Vyber ORP'); // V\u00fdpis, pokud nen\u00ed vybran\u00fd prvek\n};\n\n// Vlo\u017een\u00ed info pop-upu do mapy\ninfo.addTo(map); \n</code></pre> <p>Pro aktualizaci info pop-upu na z\u00e1klad\u011b v\u00fdb\u011bru prvku je\u0161t\u011b mus\u00edme upravit funkce <code>highlightFeature</code> a <code>resetHighlight</code>.</p> script.js <pre><code>// V\u00fdb\u011br prvku po najet\u00ed kurzorem my\u0161i\nfunction highlightFeature(e) {\n    var layer = e.target;\n\n    // \u00daprava stylu vybran\u00e9ho prvku = jeho zv\u00fdrazn\u011bn\u00ed\n    layer.setStyle({\n        weight: 5,\n        color: '#666',\n        dashArray: '',\n        fillOpacity: 0.7\n    });\n\n    layer.bringToFront();\n    info.update(layer.feature.properties); // Aktualizace info pop-upu p\u0159i v\u00fdb\u011bru prvku\n}\n\n// Resetov\u00e1n\u00ed stylu kartogramu po zru\u0161en\u00ed jeho v\u00fdb\u011bru my\u0161\u00ed\nfunction resetHighlight(e) {\n    ORPLayer.resetStyle(e.target);\n    info.update(); // Aktualizace info pop-upu p\u0159i v\u00fdb\u011bru prvku\n}\n</code></pre> <p>V\u00fdsledn\u00e1 aplikace by m\u011bla vypadat zhruba takto. V prav\u00e9m horn\u00edm rohu se vypisuj\u00ed vybran\u00e9 atributy zvolen\u00e9ho polygonu, nicm\u00e9n\u011b je pot\u0159eba vytvo\u0159it styl dan\u00e9ho divu.</p> <p> V\u00fdpis atribut\u016f vybran\u00e9ho prvku</p> <p>\u00daprava stylu divu s pop-upem v souboru <code>style.css</code>:</p> style.css <pre><code>/* Div t\u0159\u00eddy info */\n.info {\n    padding: 6px 8px;\n    font: 14px/16px Arial, Helvetica, sans-serif;\n    background: white;\n    background: rgba(255,255,255,0.8);\n    box-shadow: 0 0 15px rgba(0,0,0,0.2);\n    border-radius: 5px;\n}\n\n/* Nadpis v divu info */\n.info h4 {\n    margin: 0 0 5px;\n    color: #777;\n}\n</code></pre> <p> Upraven\u00fd styl pop-upu pro v\u00fdpis informac\u00ed o prvku</p> <p>V posledn\u00edm kroku p\u0159id\u00e1me legendu a uprav\u00edme jej\u00ed styl.</p> script.js <pre><code>// Vytvo\u0159en\u00ed legendy a nastaven\u00ed jej\u00ed pozice\nvar legend = L.control({position: 'bottomright'});\n\nlegend.onAdd = function (map) {\n\n    var div = L.DomUtil.create('div', 'info legend'),\n        grades = [0, 20, 50, 100, 200, 500, 1000], // Hranice interval\u016f - stejn\u00e9 jako v nastaven\u00ed stylu kartogramu\n        labels = [];\n\n    div.innerHTML += '&lt;h4&gt;Hustota obyvatel&lt;/h4&gt;' + 'obyv. / km&lt;sup&gt;2&lt;/sup&gt;&lt;br /&gt;'; // Nadpis legendy\n\n    // Proch\u00e1zen\u00ed interval\u016f hustoty - pro ka\u017ed\u00fd interval se vygeneruje \u0161t\u00edtek s barevn\u00fdm \u010dtvercem.\n    for (var i = 0; i &lt; grades.length; i++) {\n        div.innerHTML +=\n            '&lt;i style=\"background:' + getColor(grades[i] + 1) + '\"&gt;&lt;/i&gt; ' +\n            grades[i] + (grades[i + 1] ? '&amp;ndash;' + grades[i + 1] + '&lt;br&gt;' : '+');\n    }\n\n    return div;\n};\n\n// P\u0159id\u00e1n\u00ed legendy do mapy\nlegend.addTo(map);\n</code></pre> <p>Pro spr\u00e1vn\u00e9 zobrazen\u00ed v\u0161ech sou\u010d\u00e1st\u00ed legendy mus\u00edme upravit <code>style.css</code>.</p> style.css <pre><code>/* \u00daprava stylu legendy*/\n.legend {\n    line-height: 18px;\n    color: #555;\n}\n\n/* Zobrazen\u00ed \u010dtverc\u016f s barvou stylu ka\u017ed\u00e9ho atributu */\n.legend i {\n    width: 18px;\n    height: 18px;\n    float: left;\n    margin-right: 8px;\n    opacity: 0.7;\n}\n</code></pre> <p> Fin\u00e1ln\u00ed mapa se zobrazenou legendou</p> Stav k\u00f3du po dokon\u010den\u00ed kroku 4) P\u0159id\u00e1n\u00ed pop-upu a legendy index.html - beze zm\u011bnyscript.jsstyle.css <pre><code>&lt;!DOCTYPE html&gt; \n&lt;html&gt; \n&lt;head&gt; \n    &lt;meta charset=\"UTF-8\"&gt; \n    &lt;meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"&gt;\n    &lt;link rel=\"stylesheet\" href=\"style.css\"&gt;\n\n    &lt;!-- Na\u010dten\u00ed souboru s m\u011bsty GeoJSON--&gt;\n    &lt;script src=\"mesta_GeoJSON.js\"&gt;&lt;/script&gt;\n\n    &lt;!-- Na\u010dten\u00ed souboru s ORP GeoJSON--&gt;\n    &lt;script src=\"ORP_GeoJSON.js\"&gt;&lt;/script&gt;\n\n    &lt;!-- Extern\u00ed p\u0159ipojen\u00ed CSS symbologie Leaflet--&gt;\n    &lt;link rel=\"stylesheet\" href=\"https://unpkg.com/leaflet@1.9.4/dist/leaflet.css\"\n    integrity=\"sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=\"\n    crossorigin=\"\"/&gt;\n\n\n    &lt;!-- Extern\u00ed p\u0159ipojen\u00ed JS knihovny -&gt; vlo\u017eit a\u017e po p\u0159ipojen\u00ed CSS souboru --&gt;\n    &lt;script src=\"https://unpkg.com/leaflet@1.9.4/dist/leaflet.js\"\n    integrity=\"sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=\"\n    crossorigin=\"\"&gt;&lt;/script&gt;\n\n    &lt;title&gt;Moje prvn\u00ed Leaflet mapa&lt;/title&gt; \n&lt;/head&gt;\n&lt;body&gt; \n\n    &lt;h1&gt;P\u011bkn\u00e1 mapa v Leafletu&lt;/h1&gt; \n\n    &lt;div id=\"map\"&gt;&lt;/div&gt;\n    &lt;script src=\"script.js\"&gt;&lt;/script&gt;\n\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre> <pre><code>// Nastaven\u00ed mapy, jej\u00edho st\u0159edu a \u00farovn\u011b p\u0159ibl\u00ed\u017een\u00ed\nvar map = L.map('map').setView([49.860, 15.315], 8); // V\u00fdb\u011br bodu zhruba uprost\u0159ed republiky\n\n// Ur\u010den\u00ed podkladov\u00e9 mapy, maxim\u00e1ln\u00ed \u00farovn\u011b p\u0159ibl\u00ed\u017een\u00ed a zdroje dat\nvar osm = L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {\n    maxZoom: 19,\n    attribution: '&amp;copy; &lt;a href=\"http://www.openstreetmap.org/copyright\"&gt;OpenStreetMap&lt;/a&gt;'\n}).addTo(map);\n\n// Definice podkladov\u00e9 OpenTopoMap\nvar otm = L.tileLayer('https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png', {\n    maxZoom: 17,\n    attribution: 'Map data: &amp;copy; &lt;a href=\"https://www.openstreetmap.org/copyright\"&gt;OpenStreetMap&lt;/a&gt; contributors, &lt;a href=\"http://viewfinderpanoramas.org\"&gt;SRTM&lt;/a&gt; | Map style: &amp;copy; &lt;a href=\"https://opentopomap.org\"&gt;OpenTopoMap&lt;/a&gt; (&lt;a href=\"https://creativecommons.org/licenses/by-sa/3.0/\"&gt;CC-BY-SA&lt;/a&gt;)'\n});\n\n// P\u0159id\u00e1n\u00ed ortofota jako WMS slu\u017eby, ur\u010den\u00ed vrstvy, form\u00e1tu a pr\u016fhlednosti\nvar ortofoto = L.tileLayer.wms(\"https://ags.cuzk.gov.cz/arcgis1/services/ORTOFOTO/MapServer/WMSServer\", {\n    layers: \"0\", \n    format: \"image/png\",\n    transparent: true,\n    attribution: \"&amp;copy \u010c\u00daZK\"\n});\n\n// Na\u010dten\u00ed bodu z GeoJSON z\u00e1pisu\nvar prahaBod = [\n    {\n        \"type\": \"FeatureCollection\",\n        \"features\": [\n        {\n            \"type\": \"Feature\",\n            \"properties\": {},\n            \"geometry\": {\n            \"coordinates\": [\n                14.41581389404206,\n                50.0970543797564\n            ],\n            \"type\": \"Point\"\n            }\n        }\n        ]\n    }\n];\n\n// P\u0159i\u0159azen\u00ed GeoJSONu do mapov\u00e9 vrstvy a jej\u00ed p\u0159id\u00e1n\u00ed do mapy\nvar prahaBodLayer = L.geoJSON(prahaBod);\n\n// Na\u010dten\u00ed GeoJSONu z prom\u011bnn\u00e9 \"mesta\" ulo\u017een\u00e9 v souboru \"mesta_GeoJSON.js\"\nvar mestaLayer = L.geoJSON(mesta, {\nonEachFeature: function (feature, layer) {\n    if (feature.properties &amp;&amp; feature.properties.nazev) {\n        // layer.bindPopup(feature.properties.nazev); // Oby\u010dejn\u00fd popup\n        layer.bindPopup(`Jm\u00e9no m\u011bsta je &lt;b&gt;${feature.properties.nazev}&lt;/b&gt;`); // Vylep\u0161en\u00fd popup\n    }\n}\n});\n\n// V\u00fdpo\u010det nov\u00e9ho atributu pro ka\u017ed\u00fd prvek ORP \n// (hustota obyvatelstva = po\u010det obyvatel / plocha), p\u0159evod z m2 na km2 -&gt; vyn\u00e1soben\u00ed 1 000 000\nORP.features.forEach(function(feature){\n    if(feature.properties.Shape_Area &amp;&amp; feature.properties.poc_obyv_SLDB_2021){\n        feature.properties.hustota = (feature.properties.poc_obyv_SLDB_2021/feature.properties.Shape_Area)*1000000\n    }else{\n        feature.properties.hustota = 0\n    }\n})\n\n// Vytvo\u0159en\u00ed barevn\u00e9 stupnice\nfunction getColor(d) {\nreturn d &gt; 1000 ? '#800026' :\n        d &gt; 500  ? '#BD0026' :\n        d &gt; 200  ? '#E31A1C' :\n        d &gt; 100  ? '#FC4E2A' :\n        d &gt; 50   ? '#FD8D3C' :\n        d &gt; 20   ? '#FEB24C' :\n                    '#FFEDA0'; // V\u00fdchoz\u00ed barva\n}\n\n// Styl kartogramu\nfunction kartogram(feature) {\nreturn {\n    fillColor: getColor(feature.properties.hustota), // Styl na z\u00e1klad\u011b atributu \"hustota\"\n    weight: 1,\n    opacity: 1,\n    color: 'white',\n    fillOpacity: 0.7\n};\n}\n\n// V\u00fdb\u011br prvku po najet\u00ed kurzorem my\u0161i\nfunction highlightFeature(e) {\n    var layer = e.target;\n\n    // \u00daprava stylu vybran\u00e9ho prvku = jeho zv\u00fdrazn\u011bn\u00ed\n    layer.setStyle({\n        weight: 5,\n        color: '#666',\n        dashArray: '',\n        fillOpacity: 0.7\n    });\n\n    layer.bringToFront();\n    info.update(layer.feature.properties); // Aktualizace info pop-upu p\u0159i v\u00fdb\u011bru prvku\n}\n\n// P\u0159ibl\u00ed\u017een\u00ed na vybran\u00fd polygon po kliknut\u00ed my\u0161\u00ed\nfunction zoomToFeature(e) {\n    map.fitBounds(e.target.getBounds());\n}\n\n// Resetov\u00e1n\u00ed stylu kartogramu po zru\u0161en\u00ed jeho v\u00fdb\u011bru my\u0161\u00ed\nfunction resetHighlight(e) {\n    ORPLayer.resetStyle(e.target);\n    info.update(); // Aktualizace info pop-upu p\u0159i v\u00fdb\u011bru prvku\n}\n\n// P\u0159\u00edstup k jednotliv\u00fdm polygon\u016f ve vrstv\u011b\nfunction onEachFeature(feature, layer) {\n    layer.on({\n        mouseover: highlightFeature,\n        mouseout: resetHighlight,\n        click: zoomToFeature\n    });\n}\n\n// Vytvo\u0159en\u00ed pop-upu s informacemi o vybran\u00e9m prvku v map\u011b\nvar info = L.control();\n\ninfo.onAdd = function (map) {\n    this._div = L.DomUtil.create('div', 'info'); // Vytvo\u0159\u00ed div s t\u0159\u00eddou \"info\"\n    this.update();\n    return this._div;\n};\n\n// Funkce pro aktualizaci po-upu na z\u00e1klad\u011b p\u0159edan\u00fdch vlastnost\u00ed prvku\ninfo.update = function (props) {\n    this._div.innerHTML = '&lt;h4&gt;Hustota obyvatel&lt;/h4&gt;' +  (props ?\n        '&lt;b&gt;' + props.nazev + '&lt;/b&gt;&lt;br /&gt;' + props.hustota.toFixed(2) + ' obyv. / km&lt;sup&gt;2&lt;/sup&gt;'\n        : 'Vyber ORP'); // V\u00fdpis, pokud nen\u00ed vybran\u00fd prvek\n};\n\n// Vlo\u017een\u00ed info pop-upu do mapy\ninfo.addTo(map); \n\n// Vytvo\u0159en\u00ed legendy a nastaven\u00ed jej\u00ed pozice\nvar legend = L.control({position: 'bottomright'});\n\nlegend.onAdd = function (map) {\n\n    var div = L.DomUtil.create('div', 'info legend'),\n        grades = [0, 20, 50, 100, 200, 500, 1000], // Hranice interval\u016f - stejn\u00e9 jako v nastaven\u00ed stylu kartogramu\n        labels = [];\n\n    div.innerHTML += '&lt;h4&gt;Hustota obyvatel&lt;/h4&gt;' + 'obyv. / km&lt;sup&gt;2&lt;/sup&gt;&lt;br /&gt;'; // Nadpis legendy\n\n    // Proch\u00e1zen\u00ed interval\u016f hustoty - pro ka\u017ed\u00fd interval se vygeneruje \u0161t\u00edtek s barevn\u00fdm \u010dtvercem.\n    for (var i = 0; i &lt; grades.length; i++) {\n        div.innerHTML +=\n            '&lt;i style=\"background:' + getColor(grades[i] + 1) + '\"&gt;&lt;/i&gt; ' +\n            grades[i] + (grades[i + 1] ? '&amp;ndash;' + grades[i + 1] + '&lt;br&gt;' : '+');\n    }\n\n    return div;\n};\n\n// P\u0159id\u00e1n\u00ed legendy do mapy\nlegend.addTo(map);\n\n// Na\u010dten\u00ed GeoJSONu s polygony ORP do mapy\nvar ORPLayer = L.geoJSON(ORP,{\n    style: kartogram, \n    onEachFeature: onEachFeature\n}).addTo(map);\n\n// Prom\u011bnn\u00e1 uchov\u00e1vaj\u00edc\u00ed podkladov\u00e9 mapy, mezi kter\u00fdmi chceme p\u0159ep\u00ednat\nvar baseMaps = {\n    \"OpenStreetMap\": osm, // \"popis mapy\": nazevPromenne\n    \"OpenTopoMap\": otm,\n    \"Ortofoto \u010cR\": ortofoto\n};\n\n// Prom\u011bnn\u00e1 uchov\u00e1vaj\u00edc\u00ed mapov\u00e9 vrstvy, kter\u00e9 chceme zobrazovat a skr\u00fdvat\nvar overlayMaps = {\n    \"Praha\": prahaBodLayer,\n    \"M\u011bsta\": mestaLayer,\n    \"Hustota obyvatelstva\": ORPLayer\n};\n\n// Grafick\u00e9 p\u0159ep\u00edn\u00e1n\u00ed podkladov\u00fdch map\nvar layerControl = L.control.layers(baseMaps, overlayMaps, {collapsed: false}).addTo(map);\n</code></pre> <pre><code>/* Velikost mapov\u00e9ho okna */\n#map {\n    height: 800px;\n    width: 60%;\n}\n\n/* Div t\u0159\u00eddy info */\n.info {\n    padding: 6px 8px;\n    font: 14px/16px Arial, Helvetica, sans-serif;\n    background: white;\n    background: rgba(255,255,255,0.8);\n    box-shadow: 0 0 15px rgba(0,0,0,0.2);\n    border-radius: 5px;\n}\n\n/* Nadpis v divu info */\n.info h4 {\n    margin: 0 0 5px;\n    color: #777;\n}\n\n/* \u00daprava stylu legendy*/\n.legend {\n    line-height: 18px;\n    color: #555;\n}\n\n/* Zobrazen\u00ed \u010dtverc\u016f s barvou stylu ka\u017ed\u00e9ho atributu */\n.legend i {\n    width: 18px;\n    height: 18px;\n    float: left;\n    margin-right: 8px;\n    opacity: 0.7;\n}\n</code></pre>"},{"location":"cviceni/cviceni5/","title":"Cvi\u010den\u00ed 5","text":""},{"location":"cviceni/cviceni5/#d3js-data-driven-documents","title":"D3.js (Data-Driven Documents)","text":"<p>D3.js (Data-Driven Documents) je open-source JavaScriptov\u00e1 knihovna pro manipulaci s dokumenty na z\u00e1klad\u011b dat. Umo\u017e\u0148uje vytv\u00e1\u0159et dynamick\u00e9, interaktivn\u00ed a \u0161k\u00e1lovateln\u00e9 vizualizace dat v prohl\u00ed\u017ee\u010di. Pou\u017e\u00edv\u00e1 k tomu technologie jako SVG, HTML5, CSS a Canvas.</p> <p>Hlavn\u00ed v\u00fdhoda spo\u010d\u00edv\u00e1 v pln\u00e9 kontrole nad vizualizac\u00ed \u2013 na rozd\u00edl od jin\u00fdch knihoven, kter\u00e9 maj\u00ed hotov\u00e9/p\u0159edp\u0159ipraven\u00e9 grafy, D3.js umo\u017e\u0148uje vytvo\u0159it vizualizaci p\u0159esn\u011b podle vlastn\u00edch pot\u0159eb.</p> <p> Uk\u00e1zky vizualizac\u00ed vytvo\u0159en\u00fdch pomoc\u00ed D3.js</p> <p>Knihovna D3.js</p> <p> D3.js in 100 Seconds</p> Z\u00e1kladn\u00ed vlastnosti D3.js <ul> <li> <p></p> <p>V\u00fdb\u011br a manipulace s DOM  Snadn\u00fd v\u00fdb\u011br a \u00faprava HTML a SVG prvky pomoc\u00ed selektor\u016f podobn\u00fdch jQuery.    D\u00edky tomu m\u016f\u017eeme prov\u00e1d\u011bt dynamick\u00e9 \u00fapravy graf\u016f, zm\u011bnu stylu \u010di interaktivitu vizualizac\u00ed.</p> </li> <li> <p> </p> <p>Vazba dat na vizu\u00e1ln\u00ed prvky  D3.js umo\u017e\u0148uje p\u0159ipojit data k HTML/SVG prvk\u016fm a vytv\u00e1\u0159et vizualizace na z\u00e1klad\u011b t\u011bchto dat.</p> </li> <li> <p></p> <p>\u0160k\u00e1lov\u00e1n\u00ed a osy  \u0160irok\u00e9 mo\u017enosti \u0161k\u00e1lov\u00e1n\u00ed dat na r\u016fzn\u00e9 vizu\u00e1ln\u00ed v\u00fdstupy.</p> </li> <li> <p></p> <p>Animace a interaktivita  Umo\u017en\u011bn\u00ed plynul\u00fdch p\u0159echod\u016f a interaktivity.</p> </li> </ul> <p> DOM (Document Object Model)</p> <p>DOM (Document Object Model) je strukturovan\u00e1 reprezentace webov\u00e9 str\u00e1nky, kterou prohl\u00ed\u017ee\u010d vytv\u00e1\u0159\u00ed p\u0159i na\u010dten\u00ed HTML dokumentu. </p> <p>Umo\u017e\u0148uje JavaScriptu manipulovat s obsahem a strukturou str\u00e1nky \u2013 nap\u0159\u00edklad m\u011bnit text, styly nebo dynamicky p\u0159id\u00e1vat prvky.</p> <p>= stromov\u00e1 reprezentace HTML v prohl\u00ed\u017ee\u010di</p> <p>P\u0159\u00edklad jednoduch\u00e9ho HTML:</p> <pre><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n    &lt;title&gt;Moje str\u00e1nka&lt;/title&gt;\n&lt;/head&gt;\n&lt;body&gt;\n    &lt;h1 id=\"nadpis\"&gt;Ahoj, sv\u011bt!&lt;/h1&gt;\n    &lt;p class=\"text\"&gt;Toto je odstavec.&lt;/p&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre> <p>Prohl\u00ed\u017ee\u010d p\u0159evede HTML do struktury DOM takto:</p> <pre><code>Document\n\u251c\u2500\u2500 html\n\u2502   \u251c\u2500\u2500 head\n\u2502   \u2502   \u251c\u2500\u2500 title (\"Moje str\u00e1nka\")\n\u2502   \u251c\u2500\u2500 body\n\u2502       \u251c\u2500\u2500 h1#nadpis (\"Ahoj, sv\u011bt!\")\n\u2502       \u251c\u2500\u2500 p.text (\"Toto je odstavec.\")\n</code></pre> <p>Pomoc\u00ed JavaScriptu pak m\u016f\u017eeme s DOM pracovat nap\u0159\u00edklad n\u00e1sledovn\u011b: <pre><code>// V\u00fdb\u011br prvku\nconst nadpis = document.getElementById(\"nadpis\"); // V\u00fdb\u011br podle ID\nconst odstavec = document.querySelector(\".text\"); // V\u00fdb\u011br podle CSS selektoru\n\n// Zm\u011bna obsahu\nnadpis.textContent = \"Nov\u00fd nadpis\"; // Zm\u011bna textu uvnit\u0159 &lt;h1&gt;\n\n// Zm\u011bna stylu \nodstavec.style.color = \"red\"; // Zm\u011bna barvy textu odstavce na \u010dervenou\n\n// P\u0159id\u00e1n\u00ed nov\u00e9ho prvku\nconst novyOdstavec = document.createElement(\"p\"); // Vytvo\u0159en\u00ed &lt;p&gt;\nnovyOdstavec.textContent = \"Nov\u00fd dynamick\u00fd odstavec!\";\ndocument.body.appendChild(novyOdstavec); // P\u0159id\u00e1n\u00ed do str\u00e1nky\n</code></pre></p> <p>P\u0159\u00edklad dynamick\u00e9ho p\u0159id\u00e1n\u00ed prvku pomoc\u00ed D3.js v DOM: <pre><code>d3.select(\"body\").append(\"p\").text(\"Toto je nov\u00fd odstavec\");\n</code></pre></p>"},{"location":"cviceni/cviceni5/#zakladni-manipulace-s-dom-pomoci-d3js","title":"Z\u00e1kladn\u00ed manipulace s DOM pomoc\u00ed D3.js","text":""},{"location":"cviceni/cviceni5/#1-pripojeni-knihovny-d3js","title":"1) P\u0159ipojen\u00ed knihovny D3.js","text":"<p>Zalo\u017e\u00edme si nov\u00fd projekt. Za\u010dneme s nov\u00fdm pr\u00e1zdn\u00fdm <code>index.html</code> k\u00f3dem, do kter\u00e9ho p\u0159ipoj\u00edme knihovnu D3.js. Vyu\u017eijeme p\u0159ipojen\u00ed pomoc\u00ed UMD+CDN.</p> <p>V k\u00f3du vytvo\u0159\u00edme nadpis pro testov\u00e1n\u00ed manipulace s DOM a pod n\u011bj v <code>body</code> p\u0159ipoj\u00edme nov\u011b vytvo\u0159en\u00fd (zat\u00edm) pr\u00e1zdn\u00fd <code>script.js</code>.</p> index.html <pre><code>&lt;!DOCTYPE html&gt; \n&lt;html&gt; \n&lt;head&gt; \n    &lt;meta charset=\"UTF-8\"&gt; \n    &lt;meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"&gt;\n    &lt;title&gt;YWEK Vizualizace D3.js&lt;/title&gt; \n\n    &lt;!-- P\u0159ipojen\u00ed D3.js --&gt;\n    &lt;script src=\"https://cdn.jsdelivr.net/npm/d3@7\"&gt;&lt;/script&gt;\n\n\n&lt;/head&gt;\n&lt;body&gt; \n\n    &lt;h1&gt;Nadpis&lt;/h1&gt;\n\n    &lt;!-- P\u0159ipojen\u00ed skriptu --&gt;\n    &lt;script src=\"script.js\"&gt;&lt;/script&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>"},{"location":"cviceni/cviceni5/#2-vyber-a-manipulace-s-textem-skrze-javascript","title":"2) V\u00fdb\u011br a manipulace s textem skrze JavaScript","text":"<p>Pomoc\u00ed D3.js m\u016f\u017eeme vyb\u00edrat DOM elementy s pou\u017eit\u00edm jejich CSS selectoru nebo p\u0159\u00edmo jejich n\u00e1zvu.</p> <p>Existuj\u00ed dv\u011b v\u00fdb\u011brov\u00e9 funkce (metody):</p> <ul> <li><code>d3.select()</code> - Vybere prvn\u00ed DOM element, kter\u00fd spl\u0148uje po\u017eadavky v\u00fdb\u011bru. Tyto po\u017eadavky m\u016f\u017eeme nastavit v argumentu funkce.</li> <li><code>d3.selectAll()</code> - Vybere v\u0161echny DOM elementy, kter\u00e9 spl\u0148uj\u00ed po\u017eadavky v\u00fdb\u011bru.</li> </ul> <p>V prvn\u00ed uk\u00e1zce vybereme p\u0159edem vytvo\u0159en\u00fd nadpis str\u00e1nky ur\u010den\u00fd tagem <code>&lt;h1&gt;</code>. Tomuto textu uprav\u00edme barvu.</p> script.js <pre><code>// V\u00fdb\u011br nadpisu h1 a zm\u011bna jeho barvy\nd3.select(\"h1\").style(\"color\", \"red\");\n</code></pre> <p> Zm\u011bna barvy nadpisu</p> <p> V\u00fdb\u011br element\u016f</p> <p>Pokud bychom m\u011bli na webov\u00e9 str\u00e1nce v\u00edce jak jeden nadpis, funkc\u00ed <code>d3.select()</code> se zm\u011bn\u00ed pouze prvn\u00ed z nich.</p> <p> </p> <p>Pokud bychom cht\u011bli zm\u011bnit barvu v\u0161ech nadpis\u016f, museli bychom pou\u017e\u00edt funkci <code>d3.selectAll()</code>.</p> <p> </p> <p>N\u00e1sledn\u011b m\u016f\u017eeme textu p\u0159idat atributy \u010di nastavit dal\u0161\u00ed \u00fapravy jeho stylu.</p> script.js <pre><code>// V\u00fdb\u011br nadpisu h1\nd3.select(\"h1\")\n    .style(\"color\", \"red\") // Zm\u011bna barvy\n    .style(\"font-size\", \"50px\") // Zm\u011bna velikosti\n    .attr(\"class\", \"hlavniNadpis\"); // Ur\u010den\u00ed t\u0159\u00eddy vybran\u00e9ho elementu\n</code></pre> <p> Uk\u00e1zka zm\u011bny atribut\u016f pomoc\u00ed v\u00fdvoj\u00e1\u0159sk\u00e9ho re\u017eimu (tla\u010d\u00edtko F12)</p> <p>Ve v\u00fdsledku je mo\u017en\u00e9 text pomoc\u00ed JavaScriptu kompletn\u011b p\u0159epsat, tak\u017ee z \"Nadpis\" vytvo\u0159\u00edme \"Toto je nov\u00fd nadpis\".</p> script.js <pre><code>// V\u00fdb\u011br nadpisu h1\nd3.select(\"h1\")\n    ...\n    .text(\"Toto je nov\u00fd nadpis\"); // Nov\u00fd text\n</code></pre> <p> P\u0159ehled zm\u011bn v nadpisu</p>"},{"location":"cviceni/cviceni5/#3-vytvoreni-novych-prvku","title":"3) Vytvo\u0159en\u00ed nov\u00fdch prvk\u016f","text":"<p>Pomoc\u00ed D3.js nemus\u00edme manipulovat pouze s ji\u017e vytvo\u0159en\u00fdmi elementy, ale m\u016f\u017eeme vytvo\u0159it nov\u00e9 p\u0159\u00edmo v JavaScriptu.</p> <p>Nejprve do <code>body</code> p\u0159ipoj\u00edme nov\u00fd odstavec (<code>&lt;p&gt;</code>).</p> script.js <pre><code>// Vytvo\u0159en\u00ed nov\u00e9ho odstavce v body\nd3.select(\"body\").append(\"p\").text(\"Zde je nov\u00fd odstavec.\");\n</code></pre> <p> Vytvo\u0159en\u00ed nov\u00e9ho odstavce</p> <p>Takto lze vytvo\u0159it v\u00edce r\u016fzn\u00fdch odstavc\u016f, nap\u0159\u00edklad:</p> script.js <pre><code>// Vytvo\u0159en\u00ed nov\u00fdch odstavc\u016f v body\nd3.select(\"body\").append(\"p\").text(\"Zde je nov\u00fd odstavec.\");\nd3.select(\"body\").append(\"p\").text(\"Zde je dal\u0161\u00ed nov\u00fd odstavec.\");\nd3.select(\"body\").append(\"p\").text(\"Ahoj! J\u00e1 jsem tak\u00e9 nov\u00fd odstavec.\");\n</code></pre> <p> Vytvo\u0159en\u00ed n\u011bkolika nov\u00fdch odstavc\u016f</p> <p>Funkc\u00ed <code>d3.selectAll()</code> m\u016f\u017eeme zm\u011bnit barvu v\u0161em odstavc\u016fm najednou.</p> script.js <pre><code>// Zm\u011bna barvy v\u0161ech odstavc\u016f\nd3.selectAll(\"p\").style(\"color\", \"green\");\n</code></pre> <p> Zm\u011bna barvy v\u0161ech odstavc\u016f</p> Stav k\u00f3du po dokon\u010den\u00ed z\u00e1kladn\u00ed manipulace s DOM pomoc\u00ed D3.js index.htmlscript.js <pre><code>&lt;!DOCTYPE html&gt; \n&lt;html&gt; \n&lt;head&gt; \n    &lt;meta charset=\"UTF-8\"&gt; \n    &lt;meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"&gt;\n    &lt;title&gt;YWEK Vizualizace D3.js&lt;/title&gt; \n\n    &lt;!-- P\u0159ipojen\u00ed D3.js --&gt;\n    &lt;script src=\"https://cdn.jsdelivr.net/npm/d3@7\"&gt;&lt;/script&gt;\n\n\n&lt;/head&gt;\n&lt;body&gt; \n\n    &lt;h1&gt;Nadpis&lt;/h1&gt;\n\n    &lt;!-- P\u0159ipojen\u00ed skriptu --&gt;\n    &lt;script src=\"script.js\"&gt;&lt;/script&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre> <pre><code>// V\u00fdb\u011br nadpisu h1\nd3.select(\"h1\")\n    .style(\"color\", \"red\") // Zm\u011bna barvy\n    .style(\"font-size\", \"50px\") // Zm\u011bna velikosti\n    .attr(\"class\", \"hlavniNadpis\") // Ur\u010den\u00ed t\u0159\u00eddy vybran\u00e9ho elementu\n    .text(\"Toto je nov\u00fd nadpis\"); // Nov\u00fd text\n\n// Vytvo\u0159en\u00ed nov\u00fdch odstavc\u016f v body\nd3.select(\"body\").append(\"p\").text(\"Zde je nov\u00fd odstavec.\");\nd3.select(\"body\").append(\"p\").text(\"Zde je dal\u0161\u00ed nov\u00fd odstavec.\");\nd3.select(\"body\").append(\"p\").text(\"Ahoj! J\u00e1 jsem tak\u00e9 nov\u00fd odstavec.\");\n\n// Zm\u011bna barvy v\u0161ech odstavc\u016f\nd3.selectAll(\"p\").style(\"color\", \"green\");\n</code></pre>"},{"location":"cviceni/cviceni5/#liniovy-graf","title":"Liniov\u00fd graf","text":"<p>V dal\u0161\u00ed \u00faloze vytvo\u0159\u00edme interaktivn\u00ed liniov\u00fd graf, kter\u00fd bude na\u010d\u00edtat data z CSV souboru.</p>"},{"location":"cviceni/cviceni5/#1-vykresleni-os-grafu","title":"1) Vykreslen\u00ed os grafu","text":"<p>Soubor <code>index.html</code> drobn\u011b uprav\u00edme. Vytvo\u0159\u00edme <code>div</code> s n\u00e1zvem <code>containerLineChart</code>, do kter\u00e9ho se bude liniov\u00fd graf vykreslovat. </p> <p>N\u00e1sledn\u011b vytvo\u0159\u00edme nov\u00fd skript <code>script-line-chart.js</code>, kter\u00fd tak\u00e9 p\u0159ipoj\u00edme do k\u00f3du.</p> index.html <pre><code>&lt;!DOCTYPE html&gt; \n&lt;html&gt; \n&lt;head&gt; \n    &lt;meta charset=\"UTF-8\"&gt; \n    &lt;meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"&gt;\n    &lt;title&gt;Graf pomoc\u00ed D3.js&lt;/title&gt; \n\n    &lt;!-- P\u0159ipojen\u00ed D3.js --&gt;\n    &lt;script src=\"https://cdn.jsdelivr.net/npm/d3@7\"&gt;&lt;/script&gt;\n\n&lt;/head&gt;\n&lt;body&gt; \n\n    &lt;h1&gt;Liniov\u00fd graf&lt;/h1&gt;\n\n    &lt;!-- div, ve kter\u00e9m se bude liniov\u00fd graf vykreslovat --&gt;\n    &lt;div id=\"containerLineChart\"&gt;&lt;/div&gt;\n\n    &lt;!-- P\u0159ipojen\u00ed skriptu pro vykreslen\u00ed liniov\u00e9ho grafu --&gt;\n    &lt;script type=\"module\" src=\"script-line-chart.js\"&gt;&lt;/script&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre> <p>Z dokumentace si p\u0159ipoj\u00edme z\u00e1kladn\u00ed vykreslen\u00ed os pro liniov\u00fd graf. K\u00f3d vlo\u017e\u00edme do souboru <code>script-line-chart.js</code>. </p> <p>Zkop\u00edrovan\u00fd k\u00f3d je t\u0159eba lehce upravit - je nutn\u00e9 ur\u010dit spr\u00e1vn\u00e9 ID divu, do kter\u00e9ho budeme graf vykreslovat, tzn. <code>container</code> <code>containerLineChart</code>.</p> script-line-chart.js <pre><code>// Ur\u010den\u00ed velikosti grafu a jeho okraj\u016f\nconst width = 640;\nconst height = 400;\nconst marginTop = 20;\nconst marginRight = 20;\nconst marginBottom = 30;\nconst marginLeft = 40;\n\n// Definice osy x\nconst x = d3.scaleUtc()\n    .domain([new Date(\"2023-01-01\"), new Date(\"2024-01-01\")]) // Hodnoty na ose x\n    .range([marginLeft, width - marginRight]); // \u0160\u00ed\u0159ka osy p\u0159i vykreslen\u00ed grafu\n\n// Definice osy y\nconst y = d3.scaleLinear()\n    .domain([0, 100]) // Hodnoty na ose y\n    .range([height - marginBottom, marginTop]); // V\u00fd\u0161ka osy p\u0159i vykreslen\u00ed grafu\n\n// Vytvo\u0159en\u00ed SVG, do kter\u00e9ho se graf vykresl\u00ed\nconst svg = d3.create(\"svg\")\n    .attr(\"width\", width)\n    .attr(\"height\", height);\n\n// P\u0159id\u00e1n\u00ed osy x do grafu (= vykreslen\u00ed do SVG)\nsvg.append(\"g\")\n    .attr(\"transform\", `translate(0,${height - marginBottom})`)\n    .call(d3.axisBottom(x));\n\n// P\u0159id\u00e1n\u00ed osy y do grafu (= vykreslen\u00ed do SVG)\nsvg.append(\"g\")\n    .attr(\"transform\", `translate(${marginLeft},0)`)\n    .call(d3.axisLeft(y));\n\n// P\u0159ipojen\u00ed prvu SVG (= vykreslen\u00ed ve webov\u00e9 str\u00e1nce)\ncontainerLineChart.append(svg.node());\n</code></pre> <p> Vytvo\u0159en\u00ed pr\u00e1zdn\u00e9ho grafu</p> Stav k\u00f3du po dokon\u010den\u00ed kroku 1) Vykreslen\u00ed os grafu index.htmlscript-line-chart.js <pre><code>&lt;!DOCTYPE html&gt; \n&lt;html&gt; \n&lt;head&gt; \n    &lt;meta charset=\"UTF-8\"&gt; \n    &lt;meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"&gt;\n    &lt;title&gt;Graf pomoc\u00ed D3.js&lt;/title&gt; \n\n    &lt;!-- P\u0159ipojen\u00ed D3.js --&gt;\n    &lt;script src=\"https://cdn.jsdelivr.net/npm/d3@7\"&gt;&lt;/script&gt;\n\n\n&lt;/head&gt;\n&lt;body&gt; \n\n    &lt;h1&gt;Liniov\u00fd graf&lt;/h1&gt;\n\n    &lt;!-- div, ve kter\u00e9m se bude liniov\u00fd graf vykreslovat --&gt;\n    &lt;div id=\"containerLineChart\"&gt;&lt;/div&gt;\n\n    &lt;!-- P\u0159ipojen\u00ed skriptu pro vykreslen\u00ed liniov\u00e9ho grafu --&gt;\n    &lt;script type=\"module\" src=\"script-line-chart.js\"&gt;&lt;/script&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre> <pre><code>// Ur\u010den\u00ed velikosti grafu a jeho okraj\u016f\nconst width = 640;\nconst height = 400;\nconst marginTop = 20;\nconst marginRight = 20;\nconst marginBottom = 30;\nconst marginLeft = 40;\n\n// Definice osy x\nconst x = d3.scaleUtc()\n    .domain([new Date(\"2023-01-01\"), new Date(\"2024-01-01\")]) // Hodnoty na ose x\n    .range([marginLeft, width - marginRight]); // \u0160\u00ed\u0159ka osy p\u0159i vykreslen\u00ed grafu\n\n// Definice osy y\nconst y = d3.scaleLinear()\n    .domain([0, 100]) // Hodnoty na ose y\n    .range([height - marginBottom, marginTop]); // V\u00fd\u0161ka osy p\u0159i vykreslen\u00ed grafu\n\n// Vytvo\u0159en\u00ed SVG, do kter\u00e9ho se graf vykresl\u00ed\nconst svg = d3.create(\"svg\")\n    .attr(\"width\", width)\n    .attr(\"height\", height);\n\n// P\u0159id\u00e1n\u00ed osy x do grafu (= vykreslen\u00ed do SVG)\nsvg.append(\"g\")\n    .attr(\"transform\", `translate(0,${height - marginBottom})`)\n    .call(d3.axisBottom(x));\n\n// P\u0159id\u00e1n\u00ed osy y do grafu (= vykreslen\u00ed do SVG)\nsvg.append(\"g\")\n    .attr(\"transform\", `translate(${marginLeft},0)`)\n    .call(d3.axisLeft(y));\n\n// P\u0159ipojen\u00ed prvu SVG (= vykreslen\u00ed ve webov\u00e9 str\u00e1nce)\ncontainerLineChart.append(svg.node());\n</code></pre>"},{"location":"cviceni/cviceni5/#2-zadani-dat-primo-v-kodu","title":"2) Zad\u00e1n\u00ed dat p\u0159\u00edmo v k\u00f3du","text":"<p>P\u0159ed na\u010dten\u00edm dat z CSV si zkus\u00edme na\u010d\u00edst smy\u0161len\u00e1 data p\u0159\u00edmo z prom\u011bnn\u00e9 v k\u00f3du. </p> <p>Vytvo\u0159\u00edme pole objekt\u016f, ve kter\u00e9m bude rok (osa x) a hodnota (osa y). Roky nebudeme \u0159adit chronologicky za sebou, abychom je pak mohli automatizovan\u011b set\u0159\u00eddit. </p> <p>D\u00e1le ve skriptu (zat\u00edm) pouze manu\u00e1ln\u011b uprav\u00edme rozsah osy x. </p> script-line-chart.js <pre><code>// P\u0159id\u00e1n\u00ed vymy\u0161len\u00fdch testovac\u00edch dat ve form\u00e1tu rok, hodnoty\nconst data = [\n    {rok: 2020, hodnota: 520},\n    {rok: 2000, hodnota: 50},\n    {rok: 2010, hodnota: 10},\n    {rok: 2015, hodnota: 63},\n    {rok: 2005, hodnota: 28},\n    {rok: 2025, hodnota: 19}\n];\n\n// Definice osy x\nconst x = d3.scaleUtc()\n    .domain([2000, 2025]) // Hodnoty na ose x\n    .range([marginLeft, width - marginRight]); // \u0160\u00ed\u0159ka osy p\u0159i vykreslen\u00ed grafu\n</code></pre> <p>D\u00e1le vytvo\u0159\u00edme linii, kterou zad\u00e1me ur\u010den\u00edm x, y hodnot lomov\u00fdch bod\u016f.</p> <p>N\u00e1sledn\u011b definovan\u00e9 linie vykresl\u00edme do ji\u017e vytvo\u0159en\u00e9ho SVG grafu p\u0159id\u00e1n\u00edm elementu <code>&lt;path&gt;</code>.</p> script-line-chart.js <pre><code>// Vytvo\u0159en\u00ed linie, kter\u00e1 bude vykreslena\nconst line= d3.line()\n    .x( d =&gt; x(d.rok)) // Rok -&gt; na ose X\n    .y( d =&gt; y(d.hodnota)); // Hodnota -&gt; na ose Y\n\n// Vykreslen\u00ed linie do SVG    \nsvg.append(\"path\") \n    .datum(data) // Na\u010dten\u00ed cel\u00e9ho pole data k vykreslen\u00ed\n    .attr(\"fill\",\"none\") // Barva v\u00fdpln\u011b vykreslen\u00e9ho obrazce\n    .attr(\"stroke\",\"steelblue\") // Barva vykreslen\u00e9 linie\n    .attr(\"stroke-width\", 3) // Tlou\u0161\u0165ka linie\n    .style(\"stroke-dasharray\", (\"10,3\")) // \u010c\u00e1rkovan\u00e1 linie, vzor \u010d\u00e1rkov\u00e1n\u00ed ur\u010den \u010d\u00edseln\u011b (\u010d\u00e1ra, mezera)\n    .attr(\"d\", line);\n</code></pre> <p> Vykreslen\u00ed vymy\u0161len\u00fdch dat</p> <p>V\u0161imneme si, \u017ee data se vykreslila dle zadan\u00e9ho po\u0159ad\u00ed. Je tedy nutn\u00e9 je se\u0159adit podle rok\u016f. </p> <p>Bu\u010f m\u016f\u017eeme dat p\u0159eskl\u00e1dat ru\u010dn\u011b nebo vyu\u017e\u00edt funkci <code>sort()</code>.</p> script-line-chart.js <pre><code>// Se\u0159azen\u00ed dat vzestupn\u011b\ndata.sort((a, b) =&gt; a.rok - b.rok);\n</code></pre> <p>Data jsou se\u0159azena, ale mus\u00edme zm\u011bnit rozsah osy y \u2013 automatizovan\u011b. Rovnou podobn\u011b nastav\u00edme i rozsah osy x.</p> script-line-chart.js <pre><code>// Definice osy x\nconst x = d3.scaleUtc()\n    .domain(d3.extent(data, i =&gt; i.rok)) // Rozsah osy x - nastaven\u00ed automaticky dle dat\n    .range([marginLeft, width - marginRight]); // \u0160\u00ed\u0159ka osy p\u0159i vykreslen\u00ed grafu\n\n// Definice osy y\nconst y = d3.scaleLinear()\n    .domain(d3.extent(data, d =&gt; d.hodnota)) // Rozsah osy y - nastaven\u00ed automaticky dle dat\n    .range([height - marginBottom, marginTop]); // V\u00fd\u0161ka osy p\u0159i vykreslen\u00ed grafu\n</code></pre> <p>Nyn\u00ed jsou data set\u0159\u00edd\u011bn\u00e1 a je nastaven\u00fd spr\u00e1vn\u00fd rozsah os. D\u00e1le je v\u0161ak pot\u0159eba je\u0161t\u011b upravit datov\u00fd typ objekt\u016f <code>rok</code> vykreslen\u00fdch na ose x. Ta je p\u0159ipojena funkc\u00ed <code>d3.scaleUtc()</code>, tud\u00ed\u017e o\u010dek\u00e1v\u00e1 hodnoty ve form\u011b datumu (rok, m\u011bs\u00edc, den). Sou\u010dasn\u00e9 hodnoty v poli <code>data</code> jsou \u010d\u00edseln\u00e9.</p> <p>Bu\u010f manu\u00e1ln\u011b data uprav\u00edme nebo je p\u0159evedeme automaticky pomoc\u00ed funkce <code>map()</code>. Tato funkce transformuje ka\u017ed\u00fd prvek pole a vytvo\u0159\u00ed nov\u00e9 pole se stejnou strukturou.</p> script-line-chart.js <pre><code>// P\u0159id\u00e1n\u00ed vymy\u0161len\u00fdch testovac\u00edch dat ve form\u00e1tu rok, hodnoty\nconst data = [\n    {rok: 2020, hodnota: 520},\n    {rok: 2000, hodnota: 50},\n    {rok: 2010, hodnota: 10},\n    {rok: 2015, hodnota: 63},\n    {rok: 2005, hodnota: 28},\n    {rok: 2025, hodnota: 19}\n].map(d =&gt; ({ \n    rok: new Date(d.rok, 0, 1), // Nastav\u00ed 1. leden dan\u00e9ho roku\n    hodnota: d.hodnota \n}));;\n</code></pre> <p>Hodnoty se tedy zm\u011bn\u00ed z nap\u0159. <code>{rok: 2025, hodnota: 520}</code> na <code>{rok: new Date(2025, 0, 1), hodnota: 520}</code>.</p> <p> Set\u0159\u00edd\u011bn\u00fd liniov\u00fd graf se spr\u00e1vn\u00fdm z\u00e1pisem rok\u016f</p> Stav k\u00f3du po dokon\u010den\u00ed kroku 2) Zad\u00e1n\u00ed dat p\u0159\u00edmo v k\u00f3du index.html \u2013 beze zm\u011bnyscript-line-chart.js <pre><code>&lt;!DOCTYPE html&gt; \n&lt;html&gt; \n&lt;head&gt; \n    &lt;meta charset=\"UTF-8\"&gt; \n    &lt;meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"&gt;\n    &lt;title&gt;Graf pomoc\u00ed D3.js&lt;/title&gt; \n\n    &lt;!-- P\u0159ipojen\u00ed D3.js --&gt;\n    &lt;script src=\"https://cdn.jsdelivr.net/npm/d3@7\"&gt;&lt;/script&gt;\n\n\n&lt;/head&gt;\n&lt;body&gt; \n\n    &lt;h1&gt;Liniov\u00fd graf&lt;/h1&gt;\n\n    &lt;!-- div, ve kter\u00e9m se bude liniov\u00fd graf vykreslovat --&gt;\n    &lt;div id=\"containerLineChart\"&gt;&lt;/div&gt;\n\n    &lt;!-- P\u0159ipojen\u00ed skriptu pro vykreslen\u00ed liniov\u00e9ho grafu --&gt;\n    &lt;script type=\"module\" src=\"script-line-chart.js\"&gt;&lt;/script&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre> <pre><code>// Ur\u010den\u00ed velikosti grafu a jeho okraj\u016f\nconst width = 640;\nconst height = 400;\nconst marginTop = 20;\nconst marginRight = 20;\nconst marginBottom = 30;\nconst marginLeft = 40;\n\n// P\u0159id\u00e1n\u00ed vymy\u0161len\u00fdch testovac\u00edch dat ve form\u00e1tu rok, hodnoty\nconst data = [\n    {rok: 2020, hodnota: 520},\n    {rok: 2000, hodnota: 50},\n    {rok: 2010, hodnota: 10},\n    {rok: 2015, hodnota: 63},\n    {rok: 2005, hodnota: 28},\n    {rok: 2025, hodnota: 19}\n].map(d =&gt; ({ \n    rok: new Date(d.rok, 0, 1), // Nastav\u00ed 1. leden dan\u00e9ho roku\n    hodnota: d.hodnota \n}));;\n\n// Se\u0159azen\u00ed dat vzestupn\u011b\ndata.sort((a, b) =&gt; a.rok - b.rok);\n\n// Definice osy x\nconst x = d3.scaleUtc()\n    .domain(d3.extent(data, d =&gt; d.rok)) // Rozsah osy x - nastaven\u00ed automaticky dle dat\n    .range([marginLeft, width - marginRight]); // \u0160\u00ed\u0159ka osy p\u0159i vykreslen\u00ed grafu\n\n// Definice osy y\nconst y = d3.scaleLinear()\n    .domain(d3.extent(data, d =&gt; d.hodnota)) // Rozsah osy y - nastaven\u00ed automaticky dle dat\n    .range([height - marginBottom, marginTop]); // V\u00fd\u0161ka osy p\u0159i vykreslen\u00ed grafu\n\n// Vytvo\u0159en\u00ed SVG, do kter\u00e9ho se graf vykresl\u00ed\nconst svg = d3.create(\"svg\")\n    .attr(\"width\", width)\n    .attr(\"height\", height);\n\n// P\u0159id\u00e1n\u00ed osy x do grafu (= vykreslen\u00ed do SVG)\nsvg.append(\"g\")\n    .attr(\"transform\", `translate(0,${height - marginBottom})`)\n    .call(d3.axisBottom(x));\n\n// P\u0159id\u00e1n\u00ed osy y do grafu (= vykreslen\u00ed do SVG)\nsvg.append(\"g\")\n    .attr(\"transform\", `translate(${marginLeft},0)`)\n    .call(d3.axisLeft(y));\n\n// Vytvo\u0159en\u00ed linie, kter\u00e1 bude vykreslena\nconst line= d3.line()\n    .x( d =&gt; x(d.rok)) // Rok -&gt; na ose X\n    .y( d =&gt; y(d.hodnota)); // Hodnota -&gt; na ose Y\n\n// Vykreslen\u00ed linie do SVG    \nsvg.append(\"path\") \n    .datum(data) // Na\u010dten\u00ed cel\u00e9ho pole data k vykreslen\u00ed\n    .attr(\"fill\",\"none\") // Barva v\u00fdpln\u011b vykreslen\u00e9ho obrazce\n    .attr(\"stroke\",\"steelblue\") // Barva vykreslen\u00e9 linie\n    .attr(\"stroke-width\", 3) // Tlou\u0161\u0165ka linie\n    .style(\"stroke-dasharray\", (\"10,3\")) // \u010c\u00e1rkovan\u00e1 linie, vzor \u010d\u00e1rkov\u00e1n\u00ed ur\u010den \u010d\u00edseln\u011b (\u010d\u00e1ra, mezera)\n    .attr(\"d\", line);\n\n// P\u0159ipojen\u00ed prvu SVG (= vykreslen\u00ed ve webov\u00e9 str\u00e1nce)\ncontainerLineChart.append(svg.node());\n</code></pre>"},{"location":"cviceni/cviceni5/#3-import-dat-z-csv","title":"3) Import dat z CSV","text":"<p>Nyn\u00ed si do grafu vykresl\u00edme re\u00e1ln\u00e1 data ve form\u00e1tu CSV, kter\u00ed stahneme z port\u00e1lu \u010cesk\u00e9ho statistick\u00e9ho \u00fa\u0159adu. </p> <p>Hled\u00e1me data, kter\u00e1 jsou ide\u00e1ln\u00ed pro vykreslen\u00ed liniov\u00fdm grafem, nap\u0159\u00edklad pr\u016fm\u011brnou hrubou m\u011bs\u00ed\u010dn\u00ed mzdu.</p> <p> P\u0159ipraven\u00e9 CSV</p> <p>Upravn\u00fd CSV soubor vlo\u017e\u00edme do adres\u00e1\u0159e k ostatn\u00edm k\u00f3d\u016fm.</p> <p>Za\u010dneme smaz\u00e1n\u00edm vymy\u0161len\u00fdch dat v k\u00f3du a nahrazen\u00edm prom\u011bnn\u00e9 <code>data</code> na\u010dten\u00edm rok\u016f a hodnot z CSV. </p> <p>Na konec k\u00f3du pak mus\u00edme p\u0159idat uzav\u0159en\u00ed z\u00e1vorek funkce <code>then()</code>. </p> <p>Asynchronn\u00ed funkce jako then() nebo async() \u010di await() \u0159\u00edkaj\u00ed, \u017ee k\u00f3d \u010dek\u00e1 na dokon\u010den\u00ed n\u011bjak\u00e9 operace (nap\u0159. na\u010d\u00edt\u00e1n\u00ed dat) a pokra\u010duje, a\u017e je tato operace dokon\u010dena.</p> <p>V na\u0161em p\u0159\u00edpad\u011b funkce <code>d3.csv().then(function(data) {...})</code> \u010dek\u00e1 na na\u010dten\u00ed dat CSV, ne\u017e spust\u00ed t\u011blo funkce uvnit\u0159 <code>then()</code>. Tento k\u00f3d nebude proveden okam\u017eit\u011b, ale a\u017e po dokon\u010den\u00ed asynchronn\u00edho po\u017eadavku \u2013 tedy na\u010dten\u00ed v\u0161ech dat.</p> script-line-chart.js <pre><code>// Na\u010dten\u00ed dat z csv\nconst data = d3.csv(\"prumerna_mesicni_mzda_cr.csv\").then( function(data) {\n    data.forEach(d =&gt; { \n        d.rok = new Date(d.rok, 0, 1); // P\u0159eveden\u00ed roku z textu do form\u00e1tu pro datum\n        d.hodnota = d.prumerna_mesicni_mzda; \n    });\n\n... // Zbytek k\u00f3du je stejn\u00fd\n\n// P\u0159ipojen\u00ed prvu SVG (= vykreslen\u00ed ve webov\u00e9 str\u00e1nce)\ncontainerLineChart.append(svg.node());\n });\n</code></pre> <p> Liniov\u00fd graf vytvo\u0159en\u00fd na z\u00e1klad\u011b hodnot z CSV souboru</p> Stav k\u00f3du po dokon\u010den\u00ed kroku 3) Import dat z CSV index.html \u2013 beze zm\u011bnyscript-line-chart.js <pre><code>&lt;!DOCTYPE html&gt; \n&lt;html&gt; \n&lt;head&gt; \n    &lt;meta charset=\"UTF-8\"&gt; \n    &lt;meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"&gt;\n    &lt;title&gt;Graf pomoc\u00ed D3.js&lt;/title&gt; \n\n    &lt;!-- P\u0159ipojen\u00ed D3.js --&gt;\n    &lt;script src=\"https://cdn.jsdelivr.net/npm/d3@7\"&gt;&lt;/script&gt;\n\n\n&lt;/head&gt;\n&lt;body&gt; \n\n    &lt;h1&gt;Liniov\u00fd graf&lt;/h1&gt;\n\n    &lt;!-- div, ve kter\u00e9m se bude liniov\u00fd graf vykreslovat --&gt;\n    &lt;div id=\"containerLineChart\"&gt;&lt;/div&gt;\n\n    &lt;!-- P\u0159ipojen\u00ed skriptu pro vykreslen\u00ed liniov\u00e9ho grafu --&gt;\n    &lt;script type=\"module\" src=\"script-line-chart.js\"&gt;&lt;/script&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre> <pre><code>// Ur\u010den\u00ed velikosti grafu a jeho okraj\u016f\nconst width = 640;\nconst height = 400;\nconst marginTop = 20;\nconst marginRight = 20;\nconst marginBottom = 30;\nconst marginLeft = 40;\n\n// Na\u010dten\u00ed dat z csv\nconst data = d3.csv(\"prumerna_mesicni_mzda_cr.csv\").then( function(data) {\n    data.forEach(d =&gt; { \n        d.rok = new Date(d.rok, 0, 1); // P\u0159eveden\u00ed roku z textu do form\u00e1tu pro datum\n        d.hodnota = d.prumerna_mesicni_mzda; \n    });\n\n// Se\u0159azen\u00ed dat vzestupn\u011b\ndata.sort((a, b) =&gt; a.rok - b.rok);\n\n// Definice osy x\nconst x = d3.scaleUtc()\n    .domain(d3.extent(data, d =&gt; d.rok)) // Rozsah osy x - nastaven\u00ed automaticky dle dat\n    .range([marginLeft, width - marginRight]); // \u0160\u00ed\u0159ka osy p\u0159i vykreslen\u00ed grafu\n\n// Definice osy y\nconst y = d3.scaleLinear()\n    .domain(d3.extent(data, d =&gt; d.hodnota)) // Rozsah osy y - nastaven\u00ed automaticky dle dat\n    .range([height - marginBottom, marginTop]); // V\u00fd\u0161ka osy p\u0159i vykreslen\u00ed grafu\n\n// Vytvo\u0159en\u00ed SVG, do kter\u00e9ho se graf vykresl\u00ed\nconst svg = d3.create(\"svg\")\n    .attr(\"width\", width)\n    .attr(\"height\", height);\n\n// P\u0159id\u00e1n\u00ed osy x do grafu (= vykreslen\u00ed do SVG)\nsvg.append(\"g\")\n    .attr(\"transform\", `translate(0,${height - marginBottom})`)\n    .call(d3.axisBottom(x));\n\n// P\u0159id\u00e1n\u00ed osy y do grafu (= vykreslen\u00ed do SVG)\nsvg.append(\"g\")\n    .attr(\"transform\", `translate(${marginLeft},0)`)\n    .call(d3.axisLeft(y));\n\n// Vytvo\u0159en\u00ed linie, kter\u00e1 bude vykreslena\nconst line= d3.line()\n    .x( d =&gt; x(d.rok)) // Rok -&gt; na ose X\n    .y( d =&gt; y(d.hodnota)); // Hodnota -&gt; na ose Y\n\n// Vykreslen\u00ed linie do SVG    \nsvg.append(\"path\") \n    .datum(data) // Na\u010dten\u00ed cel\u00e9ho pole data k vykreslen\u00ed\n    .attr(\"fill\",\"none\") // Barva v\u00fdpln\u011b vykreslen\u00e9ho obrazce\n    .attr(\"stroke\",\"steelblue\") // Barva vykreslen\u00e9 linie\n    .attr(\"stroke-width\", 3) // Tlou\u0161\u0165ka linie\n    .style(\"stroke-dasharray\", (\"10,3\")) // \u010c\u00e1rkovan\u00e1 linie, vzor \u010d\u00e1rkov\u00e1n\u00ed ur\u010den \u010d\u00edseln\u011b (\u010d\u00e1ra, mezera)\n    .attr(\"d\", line);\n\n// P\u0159ipojen\u00ed prvu SVG (= vykreslen\u00ed ve webov\u00e9 str\u00e1nce)\ncontainerLineChart.append(svg.node());\n});\n</code></pre>"},{"location":"cviceni/cviceni5/#4-popis-grafu-a-interaktivita","title":"4) Popis grafu a interaktivita","text":"<p>V dal\u0161\u00edm kroku p\u0159id\u00e1me n\u00e1zev grafu a zdroj dat.</p> <p>Pokud se texty nevykresluj\u00ed cel\u00e9 nebo zasahuj\u00ed do grafu, je pot\u0159eba upravit jejich pozici (x-ov\u00e1 a y-ov\u00e1) nebo velikosti okraj\u016f (nap\u0159. <code>marginTop</code>).</p> script-line-chart.js <pre><code>// P\u0159id\u00e1n\u00ed n\u00e1zvu grafu\nsvg.append(\"text\")\n    .attr(\"class\", \"title\")\n    .attr(\"x\", width / 2) // x-ov\u00e1 pozice \n    .attr(\"y\", 30) // y-ov\u00e1 pozice\n    .style(\"font-size\", \"24px\") // Velikost fontu\n    .style(\"font-weight\", \"bold\") // Typ fontu\n    .style(\"font-family\", \"sans-serif\") // Typ fontu\n    .attr(\"text-anchor\", \"middle\") // Vzta\u017en\u00fd bod\n    .text(\"V\u00fdvoj pr\u016fm\u011brn\u00e9 hrub\u00e9 m\u011bs\u00ed\u010dn\u00ed mzdy v \u010cesku (v K\u010d)\"); // Text nadpisu\n\n// P\u0159id\u00e1n\u00ed zdroje dat\nsvg.append(\"text\")\n    .attr(\"class\", \"source-credit\")\n    .attr(\"x\", width/2)\n    .attr(\"y\", height)\n    .style(\"font-size\", \"9px\")\n    .style(\"font-family\", \"sans-serif\")\n    .text(\"Zdroj: \u010cS\u00da\");  \n</code></pre> <p> Liniov\u00fd graf s n\u00e1zvem a zdrojem dat</p> <p>N\u00e1sledn\u011b uprav\u00edme k\u00f3d tak, aby se interaktivn\u011b zv\u00fdraznil vybran\u00fd bod na grafu po najet\u00ed kurzoru my\u0161i na linii. Tato \u00faprava je ji\u017e pom\u011brn\u011b n\u00e1ro\u010dn\u00e1, tud\u00ed\u017e si cel\u00fd k\u00f3d vlo\u017e\u00edme v bloku jako celek.</p> script-line-chart.js <pre><code>// Vykreslen\u00ed indik\u00e1toru zobrazuj\u00edc\u00edho vybranu hodnotu grafu    \nconst circle = svg.append(\"circle\")\n    .attr(\"fill\", \"steelblue\") // V\u00fdpl\u0148\n    .style(\"stroke\", \"white\") // Ohrani\u010den\u00ed\n    .attr(\"opacity\", .70); // Pr\u016fhlednost \n\n// Vytvo\u0159en\u00ed listening rectangle, kter\u00fd bude \u010d\u00edst data z cel\u00e9ho grafu; propojen\u00ed se stylem v html    \nconst listeningRect = svg.append(\"rect\")\n    .attr(\"width\", width)\n    .attr(\"height\", height);\n\n// Zvolen\u00ed spr\u00e1vn\u00fdch hodnot z grafu na z\u00e1klad\u011b pozice my\u0161i    \nlisteningRect.on(\"mousemove\", function (event) {\n    const [xCoord] = d3.pointer(event, this);\n    const bisectDatum = d3.bisector(d =&gt; d.rok).left; // Nalezen\u00ed nejbli\u017e\u0161\u00edho bodu z grafu k pozici my\u0161i\n    const x0 = x.invert(xCoord);\n    const i = bisectDatum(data, x0, 1);\n    const d0 = data[i - 1];\n    const d1 = data[i];\n    const d = x0 - d0.rok &gt; d1.rok- x0 ? d1 : d0;\n    const xPos = x(d.rok); // Do xPos se p\u0159i\u0159ad\u00ed vybran\u00fd datum (z na\u010dten\u00fdch dat) na ose x\n    const yPos = y(d.hodnota); // Do yPos se p\u0159i\u0159ad\u00ed vybran\u00e1 hodnota (z na\u010dten\u00fdch dat) na ose y\n\n    // Aktualizov\u00e1n\u00ed pozice kru\u017enice na z\u00e1klad\u011b pozice my\u0161i\n    circle.attr(\"cx\", xPos)\n        .attr(\"cy\", yPos);\n\n    // Nastaven\u00ed polom\u011bru kru\u017enice\n    circle.transition()\n        .duration(50) // Rychlost zm\u011bny polom\u011bru kru\u017enice na zobrazovan\u00fd polom\u011br\n        .attr(\"r\", 5); // Zobrazovan\u00fd polom\u011br\n});\n\n// Skryt\u00ed kru\u017enice p\u0159i opu\u0161t\u011bn\u00ed grafu my\u0161\u00ed\nlisteningRect.on(\"mouseleave\", function () {\n    circle.transition()\n      .duration(50)\n      .attr(\"r\", 0);\n});\n</code></pre> <p>Pro fungov\u00e1n\u00ed interaktivity je pot\u0159ebn\u00e9 vytvo\u0159it <code>style.css</code> a p\u0159idat jej do <code>index.html</code>.</p> style.css <pre><code>rect{\n    pointer-events: all;\n    fill-opacity: 0;\n    stroke-opacity: 0;\n    z-index: 1;\n}\n</code></pre> index.html <pre><code>&lt;link rel=\"stylesheet\" href=\"style.css\"&gt;\n</code></pre> <p> Liniov\u00fd interaktivn\u00ed graf</p> Stav k\u00f3du po dokon\u010den\u00ed kroku 4) Popis grafu a interaktivita index.htmlscript-line-chart.jsstyle.css <pre><code>&lt;!DOCTYPE html&gt; \n&lt;html&gt; \n&lt;head&gt; \n    &lt;meta charset=\"UTF-8\"&gt; \n    &lt;meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"&gt;\n    &lt;title&gt;Graf pomoc\u00ed D3.js&lt;/title&gt; \n\n    &lt;!-- P\u0159ipojen\u00ed D3.js --&gt;\n    &lt;script src=\"https://cdn.jsdelivr.net/npm/d3@7\"&gt;&lt;/script&gt;\n\n    &lt;link rel=\"stylesheet\" href=\"style.css\"&gt;\n&lt;/head&gt;\n&lt;body&gt; \n\n    &lt;h1&gt;Liniov\u00fd graf&lt;/h1&gt;\n\n    &lt;!-- div, ve kter\u00e9m se bude liniov\u00fd graf vykreslovat --&gt;\n    &lt;div id=\"containerLineChart\"&gt;&lt;/div&gt;\n\n    &lt;!-- P\u0159ipojen\u00ed skriptu pro vykreslen\u00ed liniov\u00e9ho grafu --&gt;\n    &lt;script type=\"module\" src=\"script-line-chart.js\"&gt;&lt;/script&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre> <pre><code>// Ur\u010den\u00ed velikosti grafu a jeho okraj\u016f\nconst width = 640;\nconst height = 400;\nconst marginTop = 50;\nconst marginRight = 20;\nconst marginBottom = 30;\nconst marginLeft = 40;\n\n// Na\u010dten\u00ed dat z csv\nconst data = d3.csv(\"prumerna_mesicni_mzda_cr.csv\").then( function(data) {\n    data.forEach(d =&gt; { \n        d.rok = new Date(d.rok, 0, 1); // P\u0159eveden\u00ed roku z textu do form\u00e1tu pro datum\n        d.hodnota = d.prumerna_mesicni_mzda; \n    });\n\n// Se\u0159azen\u00ed dat vzestupn\u011b\ndata.sort((a, b) =&gt; a.rok - b.rok);\n\n// Definice osy x\nconst x = d3.scaleUtc()\n    .domain(d3.extent(data, d =&gt; d.rok)) // Rozsah osy x - nastaven\u00ed automaticky dle dat\n    .range([marginLeft, width - marginRight]); // \u0160\u00ed\u0159ka osy p\u0159i vykreslen\u00ed grafu\n\n// Definice osy y\nconst y = d3.scaleLinear()\n    .domain(d3.extent(data, d =&gt; d.hodnota)) // Rozsah osy y - nastaven\u00ed automaticky dle dat\n    .range([height - marginBottom, marginTop]); // V\u00fd\u0161ka osy p\u0159i vykreslen\u00ed grafu\n\n// Vytvo\u0159en\u00ed SVG, do kter\u00e9ho se graf vykresl\u00ed\nconst svg = d3.create(\"svg\")\n    .attr(\"width\", width)\n    .attr(\"height\", height);\n\n// P\u0159id\u00e1n\u00ed osy x do grafu (= vykreslen\u00ed do SVG)\nsvg.append(\"g\")\n    .attr(\"transform\", `translate(0,${height - marginBottom})`)\n    .call(d3.axisBottom(x));\n\n// P\u0159id\u00e1n\u00ed osy y do grafu (= vykreslen\u00ed do SVG)\nsvg.append(\"g\")\n    .attr(\"transform\", `translate(${marginLeft},0)`)\n    .call(d3.axisLeft(y));\n\n// Vytvo\u0159en\u00ed linie, kter\u00e1 bude vykreslena\nconst line= d3.line()\n    .x( d =&gt; x(d.rok)) // Rok -&gt; na ose X\n    .y( d =&gt; y(d.hodnota)); // Hodnota -&gt; na ose Y\n\n// Vykreslen\u00ed linie do SVG    \nsvg.append(\"path\") \n    .datum(data) // Na\u010dten\u00ed cel\u00e9ho pole data k vykreslen\u00ed\n    .attr(\"fill\",\"none\") // Barva v\u00fdpln\u011b vykreslen\u00e9ho obrazce\n    .attr(\"stroke\",\"steelblue\") // Barva vykreslen\u00e9 linie\n    .attr(\"stroke-width\", 3) // Tlou\u0161\u0165ka linie\n    .style(\"stroke-dasharray\", (\"10,3\")) // \u010c\u00e1rkovan\u00e1 linie, vzor \u010d\u00e1rkov\u00e1n\u00ed ur\u010den \u010d\u00edseln\u011b (\u010d\u00e1ra, mezera)\n    .attr(\"d\", line);\n\n// P\u0159id\u00e1n\u00ed n\u00e1zvu grafu\nsvg.append(\"text\")\n    .attr(\"class\", \"title\")\n    .attr(\"x\", width / 2) // x-ov\u00e1 pozice \n    .attr(\"y\", 30) // y-ov\u00e1 pozice\n    .style(\"font-size\", \"24px\") // Velikost fontu\n    .style(\"font-weight\", \"bold\") // Typ fontu\n    .style(\"font-family\", \"sans-serif\") // Typ fontu\n    .attr(\"text-anchor\", \"middle\") // Vzta\u017en\u00fd bod\n    .text(\"V\u00fdvoj pr\u016fm\u011brn\u00e9 hrub\u00e9 m\u011bs\u00ed\u010dn\u00ed mzdy v \u010cesku (v K\u010d)\"); // Text nadpisu\n\n// P\u0159id\u00e1n\u00ed zdroje dat\nsvg.append(\"text\")\n    .attr(\"class\", \"source-credit\")\n    .attr(\"x\", width/2)\n    .attr(\"y\", height)\n    .style(\"font-size\", \"9px\")\n    .style(\"font-family\", \"sans-serif\")\n    .text(\"Zdroj: \u010cS\u00da\");\n\n// Vykreslen\u00ed indik\u00e1toru zobrazuj\u00edc\u00edho vybranu hodnotu grafu    \nconst circle = svg.append(\"circle\")\n    .attr(\"fill\", \"steelblue\") // V\u00fdpl\u0148\n    .style(\"stroke\", \"white\") // Ohrani\u010den\u00ed\n    .attr(\"opacity\", .70); // Pr\u016fhlednost \n\n// Vytvo\u0159en\u00ed listening rectangle, kter\u00fd bude \u010d\u00edst data z cel\u00e9ho grafu; propojen\u00ed se stylem v html    \nconst listeningRect = svg.append(\"rect\")\n    .attr(\"width\", width)\n    .attr(\"height\", height);\n\n// Zvolen\u00ed spr\u00e1vn\u00fdch hodnot z grafu na z\u00e1klad\u011b pozice my\u0161i    \nlisteningRect.on(\"mousemove\", function (event) {\n    const [xCoord] = d3.pointer(event, this);\n    const bisectDatum = d3.bisector(d =&gt; d.rok).left; // Nalezen\u00ed nejbli\u017e\u0161\u00edho bodu z grafu k pozici my\u0161i\n    const x0 = x.invert(xCoord);\n    const i = bisectDatum(data, x0, 1);\n    const d0 = data[i - 1];\n    const d1 = data[i];\n    const d = x0 - d0.rok &gt; d1.rok- x0 ? d1 : d0;\n    const xPos = x(d.rok); // Do xPos se p\u0159i\u0159ad\u00ed vybran\u00fd datum (z na\u010dten\u00fdch dat) na ose x\n    const yPos = y(d.hodnota); // Do yPos se p\u0159i\u0159ad\u00ed vybran\u00e1 hodnota (z na\u010dten\u00fdch dat) na ose y\n\n    // Aktualizov\u00e1n\u00ed pozice kru\u017enice na z\u00e1klad\u011b pozice my\u0161i\n    circle.attr(\"cx\", xPos)\n        .attr(\"cy\", yPos);\n\n    // Nastaven\u00ed polom\u011bru kru\u017enice\n    circle.transition()\n        .duration(50) // Rychlost zm\u011bny polom\u011bru kru\u017enice na zobrazovan\u00fd polom\u011br\n        .attr(\"r\", 5); // Zobrazovan\u00fd polom\u011br\n});\n\n// Skryt\u00ed kru\u017enice p\u0159i opu\u0161t\u011bn\u00ed grafu my\u0161\u00ed\nlisteningRect.on(\"mouseleave\", function () {\n    circle.transition()\n    .duration(50)\n    .attr(\"r\", 0);\n});    \n\n// P\u0159ipojen\u00ed prvu SVG (= vykreslen\u00ed ve webov\u00e9 str\u00e1nce)\ncontainerLineChart.append(svg.node());\n});\n</code></pre> <pre><code>rect{\n    pointer-events: all;\n    fill-opacity: 0;\n    stroke-opacity: 0;\n    z-index: 1;\n}\n</code></pre>"},{"location":"cviceni/cviceni5/#5-vytvoreni-pop-upu-pro-vypis-vybrane-hodnoty-grafu","title":"5) Vytvo\u0159en\u00ed pop-upu pro v\u00fdpis vybran\u00e9 hodnoty grafu","text":"<p>C\u00edlem fin\u00e1ln\u00edho kroku bude vytvo\u0159en\u00ed pop-upu, ve kter\u00e9m se budou interaktivn\u011b vypisovat hodnoty z grafu.</p> <p>Nejprve nastv\u00edme styl budouc\u00edho pop-upu ve <code>style.css</code>.</p> style.css <pre><code>.popup {\n    position: absolute;\n    padding: 10px;\n    background-color: steelblue;\n    color: white;\n    border: 1px solid white;\n    border-radius: 10px;\n    display: none;\n    opacity: .70;\n}\n</code></pre> <p>N\u00e1sledn\u011b vytvo\u0159\u00edme pomoc\u00ed JavaScriptu div, do kter\u00e9ho pop-up vykresl\u00edme.</p> script-line-chart.js <pre><code>// Vytvo\u0159en\u00ed popupu\nconst popup = d3.select(\"body\")\n    .append(\"div\")\n    .attr(\"class\", \"popup\");\n</code></pre> <p>Z\u00e1v\u011brem nastav\u00edme vykreslen\u00ed pop-upu uvnit\u0159 funkce <code>mousemove</code>, ur\u010d\u00edme jeho odsazen\u00ed od kurzoru my\u0161i a vypisovan\u00fd text.</p> <p>N\u00e1sledn\u011b skryjeme pop-up p\u0159i opu\u0161t\u011bn\u00ed grafu my\u0161\u00ed uvnit\u0159 funkce <code>mouseleave</code>.</p> script-line-chart.js <pre><code>// Zvolen\u00ed spr\u00e1vn\u00fdch hodnot z grafu na z\u00e1klad\u011b pozice my\u0161i    \nlisteningRect.on(\"mousemove\", function (event) {\n    ...\n\n    // Aktualizace popupu \n    popup.style(\"display\", \"block\")\n        .style(\"left\", `${event.pageX + 15}px`)\n        .style(\"top\", `${event.pageY - 40}px`)\n        .html(`&lt;strong&gt;Rok:&lt;/strong&gt; ${d.rok.getFullYear()}&lt;br&gt;&lt;strong&gt;Pr\u016fm\u011brn\u00e1 mzda:&lt;/strong&gt; ${d.hodnota.toLocaleString()} K\u010d`);\n});\n\n// Skryt\u00ed kru\u017enice a pop-upu p\u0159i opu\u0161t\u011bn\u00ed grafu my\u0161\u00ed\nlisteningRect.on(\"mouseleave\", function () {\n    ...\n\n    popup.style(\"display\", \"none\");\n});    \n</code></pre> <p> Liniov\u00fd interaktivn\u00ed graf s pop-upem</p> Stav k\u00f3du po dokon\u010den\u00ed kroku 5) Vytvo\u0159en\u00ed pop-upu pro v\u00fdpis vybran\u00e9 hodnoty grafu index.html \u2013 beze zm\u011bnyscript-line-chart.jsstyle.css <pre><code>&lt;!DOCTYPE html&gt; \n&lt;html&gt; \n&lt;head&gt; \n    &lt;meta charset=\"UTF-8\"&gt; \n    &lt;meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"&gt;\n    &lt;title&gt;Graf pomoc\u00ed D3.js&lt;/title&gt; \n\n    &lt;!-- P\u0159ipojen\u00ed D3.js --&gt;\n    &lt;script src=\"https://cdn.jsdelivr.net/npm/d3@7\"&gt;&lt;/script&gt;\n\n    &lt;link rel=\"stylesheet\" href=\"style.css\"&gt;\n&lt;/head&gt;\n&lt;body&gt; \n\n    &lt;h1&gt;Liniov\u00fd graf&lt;/h1&gt;\n\n    &lt;!-- div, ve kter\u00e9m se bude liniov\u00fd graf vykreslovat --&gt;\n    &lt;div id=\"containerLineChart\"&gt;&lt;/div&gt;\n\n    &lt;!-- P\u0159ipojen\u00ed skriptu pro vykreslen\u00ed liniov\u00e9ho grafu --&gt;\n    &lt;script type=\"module\" src=\"script-line-chart.js\"&gt;&lt;/script&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre> <pre><code>// Ur\u010den\u00ed velikosti grafu a jeho okraj\u016f\nconst width = 640;\nconst height = 400;\nconst marginTop = 50;\nconst marginRight = 20;\nconst marginBottom = 30;\nconst marginLeft = 40;\n\n// Na\u010dten\u00ed dat z csv\nconst data = d3.csv(\"prumerna_mesicni_mzda_cr.csv\").then( function(data) {\n    data.forEach(d =&gt; { \n        d.rok = new Date(d.rok, 0, 1); // P\u0159eveden\u00ed roku z textu do form\u00e1tu pro datum\n        d.hodnota = d.prumerna_mesicni_mzda; \n    });\n\n// Se\u0159azen\u00ed dat vzestupn\u011b\ndata.sort((a, b) =&gt; a.rok - b.rok);\n\n// Definice osy x\nconst x = d3.scaleUtc()\n    .domain(d3.extent(data, d =&gt; d.rok)) // Rozsah osy x - nastaven\u00ed automaticky dle dat\n    .range([marginLeft, width - marginRight]); // \u0160\u00ed\u0159ka osy p\u0159i vykreslen\u00ed grafu\n\n// Definice osy y\nconst y = d3.scaleLinear()\n    .domain(d3.extent(data, d =&gt; d.hodnota)) // Rozsah osy y - nastaven\u00ed automaticky dle dat\n    .range([height - marginBottom, marginTop]); // V\u00fd\u0161ka osy p\u0159i vykreslen\u00ed grafu\n\n// Vytvo\u0159en\u00ed SVG, do kter\u00e9ho se graf vykresl\u00ed\nconst svg = d3.create(\"svg\")\n    .attr(\"width\", width)\n    .attr(\"height\", height);\n\n// P\u0159id\u00e1n\u00ed osy x do grafu (= vykreslen\u00ed do SVG)\nsvg.append(\"g\")\n    .attr(\"transform\", `translate(0,${height - marginBottom})`)\n    .call(d3.axisBottom(x));\n\n// P\u0159id\u00e1n\u00ed osy y do grafu (= vykreslen\u00ed do SVG)\nsvg.append(\"g\")\n    .attr(\"transform\", `translate(${marginLeft},0)`)\n    .call(d3.axisLeft(y));\n\n// Vytvo\u0159en\u00ed popupu\nconst popup = d3.select(\"body\")\n    .append(\"div\")\n    .attr(\"class\", \"popup\");\n\n// Vytvo\u0159en\u00ed linie, kter\u00e1 bude vykreslena\nconst line= d3.line()\n    .x( d =&gt; x(d.rok)) // Rok -&gt; na ose X\n    .y( d =&gt; y(d.hodnota)); // Hodnota -&gt; na ose Y\n\n// Vykreslen\u00ed linie do SVG    \nsvg.append(\"path\") \n    .datum(data) // Na\u010dten\u00ed cel\u00e9ho pole data k vykreslen\u00ed\n    .attr(\"fill\",\"none\") // Barva v\u00fdpln\u011b vykreslen\u00e9ho obrazce\n    .attr(\"stroke\",\"steelblue\") // Barva vykreslen\u00e9 linie\n    .attr(\"stroke-width\", 3) // Tlou\u0161\u0165ka linie\n    .style(\"stroke-dasharray\", (\"10,3\")) // \u010c\u00e1rkovan\u00e1 linie, vzor \u010d\u00e1rkov\u00e1n\u00ed ur\u010den \u010d\u00edseln\u011b (\u010d\u00e1ra, mezera)\n    .attr(\"d\", line);\n\n// P\u0159id\u00e1n\u00ed n\u00e1zvu grafu\nsvg.append(\"text\")\n    .attr(\"class\", \"title\")\n    .attr(\"x\", width / 2) // x-ov\u00e1 pozice \n    .attr(\"y\", 30) // y-ov\u00e1 pozice\n    .style(\"font-size\", \"24px\") // Velikost fontu\n    .style(\"font-weight\", \"bold\") // Typ fontu\n    .style(\"font-family\", \"sans-serif\") // Typ fontu\n    .attr(\"text-anchor\", \"middle\") // Vzta\u017en\u00fd bod\n    .text(\"V\u00fdvoj pr\u016fm\u011brn\u00e9 hrub\u00e9 m\u011bs\u00ed\u010dn\u00ed mzdy v \u010cesku (v K\u010d)\"); // Text nadpisu\n\n// P\u0159id\u00e1n\u00ed zdroje dat\nsvg.append(\"text\")\n    .attr(\"class\", \"source-credit\")\n    .attr(\"x\", width/2)\n    .attr(\"y\", height)\n    .style(\"font-size\", \"9px\")\n    .style(\"font-family\", \"sans-serif\")\n    .text(\"Zdroj: \u010cS\u00da\");\n\n// Vykreslen\u00ed indik\u00e1toru zobrazuj\u00edc\u00edho vybranu hodnotu grafu    \nconst circle = svg.append(\"circle\")\n    .attr(\"fill\", \"steelblue\") // V\u00fdpl\u0148\n    .style(\"stroke\", \"white\") // Ohrani\u010den\u00ed\n    .attr(\"opacity\", .70); // Pr\u016fhlednost \n\n// Vytvo\u0159en\u00ed listening rectangle, kter\u00fd bude \u010d\u00edst data z cel\u00e9ho grafu; propojen\u00ed se stylem v html    \nconst listeningRect = svg.append(\"rect\")\n    .attr(\"width\", width)\n    .attr(\"height\", height);\n\n// Zvolen\u00ed spr\u00e1vn\u00fdch hodnot z grafu na z\u00e1klad\u011b pozice my\u0161i    \nlisteningRect.on(\"mousemove\", function (event) {\n    const [xCoord] = d3.pointer(event, this);\n    const bisectDatum = d3.bisector(d =&gt; d.rok).left; // Nalezen\u00ed nejbli\u017e\u0161\u00edho bodu z grafu k pozici my\u0161i\n    const x0 = x.invert(xCoord);\n    const i = bisectDatum(data, x0, 1);\n    const d0 = data[i - 1];\n    const d1 = data[i];\n    const d = x0 - d0.rok &gt; d1.rok- x0 ? d1 : d0;\n    const xPos = x(d.rok); // Do xPos se p\u0159i\u0159ad\u00ed vybran\u00fd datum (z na\u010dten\u00fdch dat) na ose x\n    const yPos = y(d.hodnota); // Do yPos se p\u0159i\u0159ad\u00ed vybran\u00e1 hodnota (z na\u010dten\u00fdch dat) na ose y\n\n    // Aktualizov\u00e1n\u00ed pozice kru\u017enice na z\u00e1klad\u011b pozice my\u0161i\n    circle.attr(\"cx\", xPos)\n        .attr(\"cy\", yPos);\n\n    // Nastaven\u00ed polom\u011bru kru\u017enice\n    circle.transition()\n        .duration(50) // Rychlost zm\u011bny polom\u011bru kru\u017enice na zobrazovan\u00fd polom\u011br\n        .attr(\"r\", 5); // Zobrazovan\u00fd polom\u011br\n\n    // Aktualizace popupu \n    popup.style(\"display\", \"block\")\n        .style(\"left\", `${event.pageX + 15}px`)\n        .style(\"top\", `${event.pageY - 40}px`)\n        .html(`&lt;strong&gt;Rok:&lt;/strong&gt; ${d.rok.getFullYear()}&lt;br&gt;&lt;strong&gt;Pr\u016fm\u011brn\u00e1 mzda:&lt;/strong&gt; ${d.hodnota.toLocaleString()} K\u010d`);\n});\n\n// Skryt\u00ed kru\u017enice p\u0159i opu\u0161t\u011bn\u00ed grafu my\u0161\u00ed\nlisteningRect.on(\"mouseleave\", function () {\n    circle.transition()\n    .duration(50)\n    .attr(\"r\", 0);\n\n    popup.style(\"display\", \"none\");\n});    \n\n// P\u0159ipojen\u00ed prvu SVG (= vykreslen\u00ed ve webov\u00e9 str\u00e1nce)\ncontainerLineChart.append(svg.node());\n});\n</code></pre> <pre><code>rect{\n    pointer-events: all;\n    fill-opacity: 0;\n    stroke-opacity: 0;\n    z-index: 1;\n}\n\n.popup {\n    position: absolute;\n    padding: 10px;\n    background-color: steelblue;\n    color: white;\n    border: 1px solid white;\n    border-radius: 10px;\n    display: none;\n    opacity: .70;\n}\n</code></pre> <p> U\u017eite\u010dn\u00e9 odkazy</p> <ul> <li>styly v D3: http://www.d3noob.org/2014/02/styles-in-d3js.html</li> <li>atributy v D3: http://www.d3noob.org/2014/02/attributes-in-d3js.html</li> <li>p\u0159evod \u010dasu: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date</li> <li>sloupcov\u00fd graf: https://www.tutorialsteacher.com/d3js/create-bar-chart-using-d3js</li> </ul>"},{"location":"cviceni/cviceni6/","title":"Cvi\u010den\u00ed 6","text":"<p>N\u00e1pln\u00ed tohoto cvi\u010den\u00ed bude tvorba kartodiagramu, kter\u00fd vytvo\u0159\u00edme d\u00edky propojen\u00ed knihoven Leaflet a D3.js nad daty ORP, kter\u00e1 byla pou\u017eita ve cvi\u010den\u00ed\u00a04.</p> <p> P\u0159\u00edprava dat a rozlo\u017een\u00ed str\u00e1nky</p> P\u0159ipraven\u00fd k\u00f3d (bez soubor\u016f na\u010d\u00edtan\u00fdch dat ORP) index.htmlscript.jsscript-chart.jsstyle.css <pre><code>&lt;!DOCTYPE html&gt; \n&lt;html&gt; \n&lt;head&gt; \n    &lt;meta charset=\"UTF-8\"&gt; \n    &lt;meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"&gt;\n    &lt;link rel=\"stylesheet\" href=\"style.css\"&gt;\n\n    &lt;!-- Na\u010dten\u00ed souboru s body ORP GeoJSON--&gt;\n    &lt;script src=\"ORP_body_GeoJSON.js\"&gt;&lt;/script&gt;\n\n    &lt;!-- Na\u010dten\u00ed souboru s ORP GeoJSON--&gt;\n    &lt;script src=\"ORP_GeoJSON.js\"&gt;&lt;/script&gt;\n\n    &lt;!-- Extern\u00ed p\u0159ipojen\u00ed CSS symbologie Leaflet--&gt;\n    &lt;link rel=\"stylesheet\" href=\"https://unpkg.com/leaflet@1.9.4/dist/leaflet.css\"\n    integrity=\"sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=\"\n    crossorigin=\"\"/&gt;\n\n    &lt;!-- Extern\u00ed p\u0159ipojen\u00ed JS knihovny -&gt; vlo\u017eit a\u017e po p\u0159ipojen\u00ed CSS souboru --&gt;\n    &lt;script src=\"https://unpkg.com/leaflet@1.9.4/dist/leaflet.js\"\n    integrity=\"sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=\"\n    crossorigin=\"\"&gt;&lt;/script&gt;\n\n    &lt;!-- P\u0159ipojen\u00ed D3.js --&gt;\n    &lt;script src=\"https://cdn.jsdelivr.net/npm/d3@7\"&gt;&lt;/script&gt;\n\n    &lt;title&gt;Moje druh\u00e1 Leaflet mapa&lt;/title&gt; \n&lt;/head&gt;\n&lt;body&gt; \n\n    &lt;h1&gt;Propojen\u00ed knihovny Leaflet s D3.js&lt;/h1&gt; \n\n    &lt;!-- Rozd\u011blen\u00ed str\u00e1nky na mapu a graf, pom\u011br je nastaven\u00fd pomoc\u00ed CSS --&gt;\n    &lt;div id=\"container\"&gt;\n        &lt;div id=\"map\"&gt;&lt;/div&gt;\n        &lt;div id=\"containerChart\"&gt;&lt;/div&gt;\n    &lt;/div&gt;\n\n    &lt;!-- Na\u010dten\u00ed skript\u016f ovl\u00e1daj\u00edc\u00ed mapu --&gt;\n    &lt;script src=\"script.js\"&gt;&lt;/script&gt;\n\n    &lt;!-- Na\u010dten\u00ed skript\u016f ovl\u00e1daj\u00edc\u00ed graf --&gt;\n    &lt;script type=\"module\" src=\"script-chart.js\"&gt;&lt;/script&gt;\n\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre> <pre><code>// Nastaven\u00ed mapy, jej\u00edho st\u0159edu a \u00farovn\u011b p\u0159ibl\u00ed\u017een\u00ed\nvar map = L.map('map').setView([49.860, 15.315], 8); // V\u00fdb\u011br bodu zhruba uprost\u0159ed republiky\n\n// Ur\u010den\u00ed podkladov\u00e9 mapy, maxim\u00e1ln\u00ed \u00farovn\u011b p\u0159ibl\u00ed\u017een\u00ed a zdroje dat\nvar osm = L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {\n    maxZoom: 19,\n    attribution: '&amp;copy; &lt;a href=\"http://www.openstreetmap.org/copyright\"&gt;OpenStreetMap&lt;/a&gt;'\n}).addTo(map);\n\n// Definice podkladov\u00e9 OpenTopoMap\nvar otm = L.tileLayer('https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png', {\n    maxZoom: 17,\n    attribution: 'Map data: &amp;copy; &lt;a href=\"https://www.openstreetmap.org/copyright\"&gt;OpenStreetMap&lt;/a&gt; contributors, &lt;a href=\"http://viewfinderpanoramas.org\"&gt;SRTM&lt;/a&gt; | Map style: &amp;copy; &lt;a href=\"https://opentopomap.org\"&gt;OpenTopoMap&lt;/a&gt; (&lt;a href=\"https://creativecommons.org/licenses/by-sa/3.0/\"&gt;CC-BY-SA&lt;/a&gt;)'\n});\n\n// P\u0159id\u00e1n\u00ed ortofota jako WMS slu\u017eby, ur\u010den\u00ed vrstvy, form\u00e1tu a pr\u016fhlednosti\nvar ortofoto = L.tileLayer.wms(\"https://ags.cuzk.gov.cz/arcgis1/services/ORTOFOTO/MapServer/WMSServer\", {\n    layers: \"0\", \n    format: \"image/png\",\n    transparent: true,\n    attribution: \"&amp;copy \u010c\u00daZK\"\n});\n\n// V\u00fdpo\u010det nov\u00e9ho atributu pro ka\u017ed\u00fd prvek ORP \n// (hustota obyvatelstva = po\u010det obyvatel / plocha), p\u0159evod z m2 na km2 -&gt; vyn\u00e1soben\u00ed 1 000 000\nORP.features.forEach(function(feature){\n    if(feature.properties.Shape_Area &amp;&amp; feature.properties.poc_obyv_SLDB_2021){\n        feature.properties.hustota = (feature.properties.poc_obyv_SLDB_2021/feature.properties.Shape_Area)*1000000\n    }else{\n        feature.properties.hustota = 0\n    }\n})\n\n// Vytvo\u0159en\u00ed barevn\u00e9 stupnice\nfunction getColor(d) {\nreturn d &gt; 1000 ? '#800026' :\n        d &gt; 500  ? '#BD0026' :\n        d &gt; 200  ? '#E31A1C' :\n        d &gt; 100  ? '#FC4E2A' :\n        d &gt; 50   ? '#FD8D3C' :\n        d &gt; 20   ? '#FEB24C' :\n                    '#FFEDA0'; // V\u00fdchoz\u00ed barva\n}\n\n// Styl kartogramu\nfunction kartogram(feature) {\nreturn {\n    fillColor: getColor(feature.properties.hustota), // Styl na z\u00e1klad\u011b atributu \"hustota\"\n    weight: 1,\n    opacity: 1,\n    color: 'white',\n    fillOpacity: 0.7\n};\n}\n\n// V\u00fdb\u011br prvku po najet\u00ed kurzorem my\u0161i\nfunction highlightFeature(e) {\n    var layer = e.target;\n\n    // \u00daprava stylu vybran\u00e9ho prvku = jeho zv\u00fdrazn\u011bn\u00ed\n    layer.setStyle({\n        weight: 5,\n        color: '#666',\n        dashArray: '',\n        fillOpacity: 0.7\n    });\n\n    layer.bringToFront();\n    info.update(layer.feature.properties); // Aktualizace info pop-upu p\u0159i v\u00fdb\u011bru prvku\n}\n\n// P\u0159ibl\u00ed\u017een\u00ed na vybran\u00fd polygon po kliknut\u00ed my\u0161\u00ed\nfunction zoomToFeature(e) {\n    map.fitBounds(e.target.getBounds());\n}\n\n// Resetov\u00e1n\u00ed stylu kartogramu po zru\u0161en\u00ed jeho v\u00fdb\u011bru my\u0161\u00ed\nfunction resetHighlight(e) {\n    ORPLayer.resetStyle(e.target);\n    info.update(); // Aktualizace info pop-upu p\u0159i v\u00fdb\u011bru prvku\n}\n\n// P\u0159\u00edstup k jednotliv\u00fdm polygon\u016f ve vrstv\u011b\nfunction onEachFeature(feature, layer) {\n    layer.on({\n        mouseover: highlightFeature,\n        mouseout: resetHighlight,\n        click: zoomToFeature\n    });\n}\n\n// Vytvo\u0159en\u00ed pop-upu s informacemi o vybran\u00e9m prvku v map\u011b\nvar info = L.control();\n\ninfo.onAdd = function (map) {\n    this._div = L.DomUtil.create('div', 'info'); // Vytvo\u0159\u00ed div s t\u0159\u00eddou \"info\"\n    this.update();\n    return this._div;\n};\n\n// Funkce pro aktualizaci po-upu na z\u00e1klad\u011b p\u0159edan\u00fdch vlastnost\u00ed prvku\ninfo.update = function (props) {\n    this._div.innerHTML = '&lt;h4&gt;Hustota obyvatel&lt;/h4&gt;' +  (props ?\n        '&lt;b&gt;' + props.nazev + '&lt;/b&gt;&lt;br /&gt;' + props.hustota.toFixed(2) + ' obyv. / km&lt;sup&gt;2&lt;/sup&gt;'\n        : 'Vyber ORP'); // V\u00fdpis, pokud nen\u00ed vybran\u00fd prvek\n};\n\n// Vlo\u017een\u00ed info pop-upu do mapy\ninfo.addTo(map); \n\n// Vytvo\u0159en\u00ed legendy a nastaven\u00ed jej\u00ed pozice\nvar legend = L.control({position: 'bottomright'});\n\nlegend.onAdd = function (map) {\n\n    var div = L.DomUtil.create('div', 'info legend'),\n        grades = [0, 20, 50, 100, 200, 500, 1000], // Hranice interval\u016f - stejn\u00e9 jako v nastaven\u00ed stylu kartogramu\n        labels = [];\n\n    div.innerHTML += '&lt;h4&gt;Hustota obyvatel&lt;/h4&gt;' + 'obyv. / km&lt;sup&gt;2&lt;/sup&gt;&lt;br /&gt;'; // Nadpis legendy\n\n    // Proch\u00e1zen\u00ed interval\u016f hustoty - pro ka\u017ed\u00fd interval se vygeneruje \u0161t\u00edtek s barevn\u00fdm \u010dtvercem.\n    for (var i = 0; i &lt; grades.length; i++) {\n        div.innerHTML +=\n            '&lt;i style=\"background:' + getColor(grades[i] + 1) + '\"&gt;&lt;/i&gt; ' +\n            grades[i] + (grades[i + 1] ? '&amp;ndash;' + grades[i + 1] + '&lt;br&gt;' : '+');\n    }\n\n    return div;\n};\n\n// P\u0159id\u00e1n\u00ed legendy do mapy\nlegend.addTo(map);\n\n// Na\u010dten\u00ed GeoJSONu s polygony ORP do mapy\nvar ORPLayer = L.geoJSON(ORP,{\n    style: kartogram, \n    onEachFeature: onEachFeature\n}).addTo(map);\n\n// Na\u010dten\u00ed GeoJSONu s body ORP do mapy\nvar ORPPoints = L.geoJSON(ORP_body).addTo(map);\n\n// Prom\u011bnn\u00e1 uchov\u00e1vaj\u00edc\u00ed podkladov\u00e9 mapy, mezi kter\u00fdmi chceme p\u0159ep\u00ednat\nvar baseMaps = {\n    \"OpenStreetMap\": osm, // \"popis mapy\": nazevPromenne\n    \"OpenTopoMap\": otm,\n    \"Ortofoto \u010cR\": ortofoto\n};\n\n// Prom\u011bnn\u00e1 uchov\u00e1vaj\u00edc\u00ed mapov\u00e9 vrstvy, kter\u00e9 chceme zobrazovat a skr\u00fdvat\nvar overlayMaps = {\n    \"Body ORP\": ORPPoints,\n    \"Hustota obyvatelstva\": ORPLayer\n};\n\n// Grafick\u00e9 p\u0159ep\u00edn\u00e1n\u00ed podkladov\u00fdch map\nvar layerControl = L.control.layers(baseMaps, overlayMaps, {collapsed: false}).addTo(map);\n</code></pre> <pre><code>// Ur\u010den\u00ed velikosti grafu a jeho okraj\u016f\nconst width = 640;\nconst height = 400;\nconst marginTop = 20;\nconst marginRight = 20;\nconst marginBottom = 30;\nconst marginLeft = 40;\n\n// Definice osy x\nconst x = d3.scaleUtc()\n    .domain([new Date(\"2023-01-01\"), new Date(\"2024-01-01\")]) // Hodnoty na ose x\n    .range([marginLeft, width - marginRight]); // \u0160\u00ed\u0159ka osy p\u0159i vykreslen\u00ed grafu\n\n// Definice osy y\nconst y = d3.scaleLinear()\n    .domain([0, 100]) // Hodnoty na ose y\n    .range([height - marginBottom, marginTop]); // V\u00fd\u0161ka osy p\u0159i vykreslen\u00ed grafu\n\n// Vytvo\u0159en\u00ed SVG, do kter\u00e9ho se graf vykresl\u00ed\nconst svg = d3.create(\"svg\")\n    .attr(\"width\", width)\n    .attr(\"height\", height);\n\n// P\u0159id\u00e1n\u00ed osy x do grafu (= vykreslen\u00ed do SVG)\nsvg.append(\"g\")\n    .attr(\"transform\", `translate(0,${height - marginBottom})`)\n    .call(d3.axisBottom(x));\n\n// P\u0159id\u00e1n\u00ed osy y do grafu (= vykreslen\u00ed do SVG)\nsvg.append(\"g\")\n    .attr(\"transform\", `translate(${marginLeft},0)`)\n    .call(d3.axisLeft(y));\n\n// P\u0159ipojen\u00ed prvu SVG (= vykreslen\u00ed ve webov\u00e9 str\u00e1nce)\ncontainerChart.append(svg.node());\n</code></pre> <pre><code>/* Rozd\u011blen\u00ed str\u00e1nky */\n#container {\n    display: flex;\n    width: 100%;\n}\n\n\n/* Velikost mapov\u00e9ho okna */\n#map {\n    height: 800px;\n    width: 60%;\n}\n\n/* Velikost divu pro graf a jeho vycentrov\u00e1n\u00ed */\n#containerChart {\n    width: 40%;\n    justify-content: center;\n    align-items: center;\n    display: flex;\n}\n\n/* Div t\u0159\u00eddy info */\n.info {\n    padding: 6px 8px;\n    font: 14px/16px Arial, Helvetica, sans-serif;\n    background: white;\n    background: rgba(255,255,255,0.8);\n    box-shadow: 0 0 15px rgba(0,0,0,0.2);\n    border-radius: 5px;\n}\n\n/* Nadpis v divu info */\n.info h4 {\n    margin: 0 0 5px;\n    color: #777;\n}\n\n/* \u00daprava stylu legendy*/\n.legend {\n    line-height: 18px;\n    color: #555;\n}\n\n/* Zobrazen\u00ed \u010dtverc\u016f s barvou stylu ka\u017ed\u00e9ho atributu */\n.legend i {\n    width: 18px;\n    height: 18px;\n    float: left;\n    margin-right: 8px;\n    opacity: 0.7;\n}\n</code></pre>"},{"location":"cviceni/cviceni6/#priprava-dat","title":"P\u0159\u00edprava dat","text":"<p>Pro vytvo\u0159en\u00ed kartodiagramu mus\u00edme v GISu p\u0159ev\u00e9st polygonovou vrstvu ORP na body pomoc\u00ed funkce Feature to Point.</p> <p>Do vrstvy byly z\u00e1rove\u0148 p\u0159id\u00e1ny informace o v\u00fdstavb\u011b byt\u016f, kter\u00e9 tak\u00e9 vyu\u017eijeme pro vizualizaci.</p> <p> GeoJSON s body ORP</p> <p> GeoJSON s polygony ORP</p> <p>Mapu ze cvi\u010den\u00ed 4 uprav\u00edme tak, aby v n\u00ed byl zobrazen\u00fd pouze kartogram a bodov\u00e1 vrstva ORP.</p> <p> </p>"},{"location":"cviceni/cviceni6/#rozlozeni-stranky","title":"Rozlo\u017een\u00ed str\u00e1nky","text":"<p>P\u0159ed jakoukoliv dal\u0161\u00ed \u00fapravou mapy \u010di grafu nejprve na str\u00e1nku k map\u011b p\u0159ipoj\u00edme vykreslen\u00ed os grafu z dokumentace (ten budeme upravovat pozd\u011bji).</p> <p>Str\u00e1nku rozd\u011bl\u00edme pomoc\u00ed flexbox v pom\u011bru 60% (mapa) / 40% (graf). Graf n\u00e1sledn\u011b vycentrujeme uvnit\u0159 divu pomoc\u00ed CSS vlastnost\u00ed <code>justify-content</code> a <code>align-items</code></p> <p> </p> <p>P\u0159ipraven\u00e1 str\u00e1nka by m\u011bla vypadat takto:</p> <p> </p> <p>Na disku S je ke zkop\u00edrov\u00e1n\u00ed slo\u017eka se soubory, ze kter\u00fdch budeme v tomto cvi\u010den\u00ed vych\u00e1zet: <code>S:\\K155\\Public\\155YWEK\\YWEK_cviceni6_Leaflet_D3js</code></p>"},{"location":"cviceni/cviceni6/#tvorba-kartodiagramu","title":"Tvorba kartodiagramu","text":""},{"location":"cviceni/cviceni6/#1-zmena-symbologie-bodove-vrstvy","title":"1) Zm\u011bna symbologie bodov\u00e9 vrstvy","text":"<p>Nejprve zm\u011bn\u00edme symboly bod\u016f ORP, \u010d\u00edm\u017e si p\u0159iprav\u00edme podklad pro diagramy.</p> <p>Pomoc\u00ed funkce <code>pointToLayer</code> p\u0159evedeme body na kruhov\u00e9 symboly, prozat\u00edm se z\u00e1kladn\u00edm vizualiza\u010dn\u00edm stylem. V\u00edce se do\u010dteme v dokumentaci. </p> script.js <pre><code>// Na\u010dten\u00ed GeoJSONu s body ORP do mapy\nvar ORPPoints = L.geoJSON(ORP_body,{\n    pointToLayer: function (feature, latlng) { \n         return L.circleMarker(latlng); // Vykreslen\u00ed kruhov\u00fdch symbol\u016f na sou\u0159adnic\u00edch bod\u016f\n    }\n}).addTo(map);\n</code></pre> <p> Vykreslen\u00ed kru\u017enic na sou\u0159adnic\u00edch bod\u016f</p> <p>P\u0159i proch\u00e1zen\u00ed jednotliv\u00fdch ORP zjist\u00edme, \u017ee po vybr\u00e1n\u00ed ORP se neaktualizuj\u00ed body, kter\u00e9 se postupn\u011b dost\u00e1vaj\u00ed vizu\u00e1ln\u011b pod \u00farove\u0148 polygon\u016f.</p> <p>\u0158e\u0161en\u00ed probl\u00e9mu spo\u010d\u00edv\u00e1 v \u00faprav\u011b funkce <code>highlightFeature</code>, kterou pou\u017e\u00edv\u00e1me pro v\u00fdb\u011br prvku my\u0161\u00ed. Na konec funkce p\u0159id\u00e1me vykreslen\u00ed bod\u016f ORP op\u011bt do pop\u0159ed\u00ed nad ostatn\u00ed vrstvy.</p> script.js <pre><code>// V\u00fdb\u011br prvku po najet\u00ed kurzorem my\u0161i\nfunction highlightFeature(e) {\n    ... // Zbytek funkce\n    ORPPoints.bringToFront(); // Vykreslen\u00ed bod\u016f ORP do pop\u0159ed\u00ed po v\u00fdb\u011bru prvku\n}\n</code></pre> <p> Vykreslen\u00ed bod\u016f do pop\u0159ed\u00ed po v\u00fdb\u011bru polygon\u016f</p> <p>Z\u00e1v\u011brem tohoto kroku vytvo\u0159\u00edme vlastn\u00ed kruhov\u00fd symbol (marker), pomoc\u00ed jeho\u017e body vizualizujeme.</p> <p>V sekci na\u010d\u00edt\u00e1n\u00ed bodov\u00e9 vrstvy p\u0159id\u00e1me nov\u00e9 vlastnosti prom\u011bnn\u00e9 <code>circleMarker</code> zna\u010d\u00edc\u00ed kruhov\u00fd symbol.</p> script.js <pre><code>// Na\u010dten\u00ed GeoJSONu s body ORP do mapy\nvar ORPPoints = L.geoJSON(ORP_body,{\n    pointToLayer: function (feature, latlng) {\n         return L.circleMarker(latlng, {\n            radius: 6,  // Velikost symbolu v px\n            fillColor: \"#ff7800\", // Barva v\u00fdpln\u011b\n            color: \"#000\", // Barva ohrani\u010den\u00ed\n            weight: 1.5, // \u0160\u00ed\u0159ka ohrani\u010den\u00ed v px\n            fillOpacity: 0.8, // Pr\u016fhlednost v\u00fdpln\u011b\n            opacity: 1, // Pr\u016fhlednost ohrani\u010den\u00ed\n         }); // Vykreslen\u00ed kruhov\u00fdch symbol\u016f na sou\u0159adnic\u00edch bod\u016f\n    }\n}).addTo(map);\n</code></pre> <p> Vlastn\u00ed styl bodov\u00e9 vrstvy</p> Stav k\u00f3du po dokon\u010den\u00ed kroku 1) Zm\u011bna symbologie bodov\u00e9 vrstvy index.html \u2013 beze zm\u011bnyscript.jsscript-chart.js \u2013 beze zm\u011bnystyle.css \u2013 beze zm\u011bny <pre><code>&lt;!DOCTYPE html&gt; \n&lt;html&gt; \n&lt;head&gt; \n    &lt;meta charset=\"UTF-8\"&gt; \n    &lt;meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"&gt;\n    &lt;link rel=\"stylesheet\" href=\"style.css\"&gt;\n\n    &lt;!-- Na\u010dten\u00ed souboru s body ORP GeoJSON--&gt;\n    &lt;script src=\"ORP_body_GeoJSON.js\"&gt;&lt;/script&gt;\n\n    &lt;!-- Na\u010dten\u00ed souboru s ORP GeoJSON--&gt;\n    &lt;script src=\"ORP_GeoJSON.js\"&gt;&lt;/script&gt;\n\n    &lt;!-- Extern\u00ed p\u0159ipojen\u00ed CSS symbologie Leaflet--&gt;\n    &lt;link rel=\"stylesheet\" href=\"https://unpkg.com/leaflet@1.9.4/dist/leaflet.css\"\n    integrity=\"sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=\"\n    crossorigin=\"\"/&gt;\n\n    &lt;!-- Extern\u00ed p\u0159ipojen\u00ed JS knihovny -&gt; vlo\u017eit a\u017e po p\u0159ipojen\u00ed CSS souboru --&gt;\n    &lt;script src=\"https://unpkg.com/leaflet@1.9.4/dist/leaflet.js\"\n    integrity=\"sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=\"\n    crossorigin=\"\"&gt;&lt;/script&gt;\n\n    &lt;!-- P\u0159ipojen\u00ed D3.js --&gt;\n    &lt;script src=\"https://cdn.jsdelivr.net/npm/d3@7\"&gt;&lt;/script&gt;\n\n    &lt;title&gt;Moje druh\u00e1 Leaflet mapa&lt;/title&gt; \n&lt;/head&gt;\n&lt;body&gt; \n\n    &lt;h1&gt;Propojen\u00ed knihovny Leaflet s D3.js&lt;/h1&gt; \n\n    &lt;!-- Rozd\u011blen\u00ed str\u00e1nky na mapu a graf, pom\u011br je nastaven\u00fd pomoc\u00ed CSS --&gt;\n    &lt;div id=\"container\"&gt;\n        &lt;div id=\"map\"&gt;&lt;/div&gt;\n        &lt;div id=\"containerChart\"&gt;&lt;/div&gt;\n    &lt;/div&gt;\n\n    &lt;!-- Na\u010dten\u00ed skript\u016f ovl\u00e1daj\u00edc\u00ed mapu --&gt;\n    &lt;script src=\"script.js\"&gt;&lt;/script&gt;\n\n    &lt;!-- Na\u010dten\u00ed skript\u016f ovl\u00e1daj\u00edc\u00ed graf --&gt;\n    &lt;script type=\"module\" src=\"script-chart.js\"&gt;&lt;/script&gt;\n\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre> <pre><code>// Nastaven\u00ed mapy, jej\u00edho st\u0159edu a \u00farovn\u011b p\u0159ibl\u00ed\u017een\u00ed\nvar map = L.map('map').setView([49.860, 15.315], 8); // V\u00fdb\u011br bodu zhruba uprost\u0159ed republiky\n\n// Ur\u010den\u00ed podkladov\u00e9 mapy, maxim\u00e1ln\u00ed \u00farovn\u011b p\u0159ibl\u00ed\u017een\u00ed a zdroje dat\nvar osm = L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {\n    maxZoom: 19,\n    attribution: '&amp;copy; &lt;a href=\"http://www.openstreetmap.org/copyright\"&gt;OpenStreetMap&lt;/a&gt;'\n}).addTo(map);\n\n// Definice podkladov\u00e9 OpenTopoMap\nvar otm = L.tileLayer('https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png', {\n    maxZoom: 17,\n    attribution: 'Map data: &amp;copy; &lt;a href=\"https://www.openstreetmap.org/copyright\"&gt;OpenStreetMap&lt;/a&gt; contributors, &lt;a href=\"http://viewfinderpanoramas.org\"&gt;SRTM&lt;/a&gt; | Map style: &amp;copy; &lt;a href=\"https://opentopomap.org\"&gt;OpenTopoMap&lt;/a&gt; (&lt;a href=\"https://creativecommons.org/licenses/by-sa/3.0/\"&gt;CC-BY-SA&lt;/a&gt;)'\n});\n\n// P\u0159id\u00e1n\u00ed ortofota jako WMS slu\u017eby, ur\u010den\u00ed vrstvy, form\u00e1tu a pr\u016fhlednosti\nvar ortofoto = L.tileLayer.wms(\"https://ags.cuzk.gov.cz/arcgis1/services/ORTOFOTO/MapServer/WMSServer\", {\n    layers: \"0\", \n    format: \"image/png\",\n    transparent: true,\n    attribution: \"&amp;copy \u010c\u00daZK\"\n});\n\n// V\u00fdpo\u010det nov\u00e9ho atributu pro ka\u017ed\u00fd prvek ORP \n// (hustota obyvatelstva = po\u010det obyvatel / plocha), p\u0159evod z m2 na km2 -&gt; vyn\u00e1soben\u00ed 1 000 000\nORP.features.forEach(function(feature){\n    if(feature.properties.Shape_Area &amp;&amp; feature.properties.poc_obyv_SLDB_2021){\n        feature.properties.hustota = (feature.properties.poc_obyv_SLDB_2021/feature.properties.Shape_Area)*1000000\n    }else{\n        feature.properties.hustota = 0\n    }\n})\n\n// Vytvo\u0159en\u00ed barevn\u00e9 stupnice\nfunction getColor(d) {\nreturn d &gt; 1000 ? '#800026' :\n        d &gt; 500  ? '#BD0026' :\n        d &gt; 200  ? '#E31A1C' :\n        d &gt; 100  ? '#FC4E2A' :\n        d &gt; 50   ? '#FD8D3C' :\n        d &gt; 20   ? '#FEB24C' :\n                    '#FFEDA0'; // V\u00fdchoz\u00ed barva\n}\n\n// Styl kartogramu\nfunction kartogram(feature) {\nreturn {\n    fillColor: getColor(feature.properties.hustota), // Styl na z\u00e1klad\u011b atributu \"hustota\"\n    weight: 1,\n    opacity: 1,\n    color: 'white',\n    fillOpacity: 0.7\n};\n}\n\n// V\u00fdb\u011br prvku po najet\u00ed kurzorem my\u0161i\nfunction highlightFeature(e) {\n    var layer = e.target;\n\n    // \u00daprava stylu vybran\u00e9ho prvku = jeho zv\u00fdrazn\u011bn\u00ed\n    layer.setStyle({\n        weight: 5,\n        color: '#666',\n        dashArray: '',\n        fillOpacity: 0.7\n    });\n\n    layer.bringToFront();\n    info.update(layer.feature.properties); // Aktualizace info pop-upu p\u0159i v\u00fdb\u011bru prvku\n    ORPPoints.bringToFront(); // Vykreslen\u00ed bod\u016f ORP do pop\u0159ed\u00ed po v\u00fdb\u011bru prvku\n}\n\n// P\u0159ibl\u00ed\u017een\u00ed na vybran\u00fd polygon po kliknut\u00ed my\u0161\u00ed\nfunction zoomToFeature(e) {\n    map.fitBounds(e.target.getBounds());\n}\n\n// Resetov\u00e1n\u00ed stylu kartogramu po zru\u0161en\u00ed jeho v\u00fdb\u011bru my\u0161\u00ed\nfunction resetHighlight(e) {\n    ORPLayer.resetStyle(e.target);\n    info.update(); // Aktualizace info pop-upu p\u0159i v\u00fdb\u011bru prvku\n}\n\n// P\u0159\u00edstup k jednotliv\u00fdm polygon\u016f ve vrstv\u011b\nfunction onEachFeature(feature, layer) {\n    layer.on({\n        mouseover: highlightFeature,\n        mouseout: resetHighlight,\n        click: zoomToFeature\n    });\n}\n\n// Vytvo\u0159en\u00ed pop-upu s informacemi o vybran\u00e9m prvku v map\u011b\nvar info = L.control();\n\ninfo.onAdd = function (map) {\n    this._div = L.DomUtil.create('div', 'info'); // Vytvo\u0159\u00ed div s t\u0159\u00eddou \"info\"\n    this.update();\n    return this._div;\n};\n\n// Funkce pro aktualizaci po-upu na z\u00e1klad\u011b p\u0159edan\u00fdch vlastnost\u00ed prvku\ninfo.update = function (props) {\n    this._div.innerHTML = '&lt;h4&gt;Hustota obyvatel&lt;/h4&gt;' +  (props ?\n        '&lt;b&gt;' + props.nazev + '&lt;/b&gt;&lt;br /&gt;' + props.hustota.toFixed(2) + ' obyv. / km&lt;sup&gt;2&lt;/sup&gt;'\n        : 'Vyber ORP'); // V\u00fdpis, pokud nen\u00ed vybran\u00fd prvek\n};\n\n// Vlo\u017een\u00ed info pop-upu do mapy\ninfo.addTo(map); \n\n// Vytvo\u0159en\u00ed legendy a nastaven\u00ed jej\u00ed pozice\nvar legend = L.control({position: 'bottomright'});\n\nlegend.onAdd = function (map) {\n\n    var div = L.DomUtil.create('div', 'info legend'),\n        grades = [0, 20, 50, 100, 200, 500, 1000], // Hranice interval\u016f - stejn\u00e9 jako v nastaven\u00ed stylu kartogramu\n        labels = [];\n\n    div.innerHTML += '&lt;h4&gt;Hustota obyvatel&lt;/h4&gt;' + 'obyv. / km&lt;sup&gt;2&lt;/sup&gt;&lt;br /&gt;'; // Nadpis legendy\n\n    // Proch\u00e1zen\u00ed interval\u016f hustoty - pro ka\u017ed\u00fd interval se vygeneruje \u0161t\u00edtek s barevn\u00fdm \u010dtvercem.\n    for (var i = 0; i &lt; grades.length; i++) {\n        div.innerHTML +=\n            '&lt;i style=\"background:' + getColor(grades[i] + 1) + '\"&gt;&lt;/i&gt; ' +\n            grades[i] + (grades[i + 1] ? '&amp;ndash;' + grades[i + 1] + '&lt;br&gt;' : '+');\n    }\n\n    return div;\n};\n\n// P\u0159id\u00e1n\u00ed legendy do mapy\nlegend.addTo(map);\n\n// Na\u010dten\u00ed GeoJSONu s polygony ORP do mapy\nvar ORPLayer = L.geoJSON(ORP,{\n    style: kartogram, \n    onEachFeature: onEachFeature\n}).addTo(map);\n\n// Na\u010dten\u00ed GeoJSONu s body ORP do mapy\nvar ORPPoints = L.geoJSON(ORP_body,{\n    pointToLayer: function (feature, latlng) {\n        return L.circleMarker(latlng, {\n            radius: 6,  // Velikost symbolu v px\n            fillColor: \"#ff7800\", // Barva v\u00fdpln\u011b\n            color: \"#000\", // Barva ohrani\u010den\u00ed\n            weight: 1.5, // \u0160\u00ed\u0159ka ohrani\u010den\u00ed v px\n            fillOpacity: 0.8, // Pr\u016fhlednost v\u00fdpln\u011b\n            opacity: 1, // Pr\u016fhlednost ohrani\u010den\u00ed\n        }); // Vykreslen\u00ed kruhov\u00fdch symbol\u016f na sou\u0159adnic\u00edch bod\u016f\n    }\n}).addTo(map);\n\n// Prom\u011bnn\u00e1 uchov\u00e1vaj\u00edc\u00ed podkladov\u00e9 mapy, mezi kter\u00fdmi chceme p\u0159ep\u00ednat\nvar baseMaps = {\n    \"OpenStreetMap\": osm, // \"popis mapy\": nazevPromenne\n    \"OpenTopoMap\": otm,\n    \"Ortofoto \u010cR\": ortofoto\n};\n\n// Prom\u011bnn\u00e1 uchov\u00e1vaj\u00edc\u00ed mapov\u00e9 vrstvy, kter\u00e9 chceme zobrazovat a skr\u00fdvat\nvar overlayMaps = {\n    \"Body ORP\": ORPPoints,\n    \"Hustota obyvatelstva\": ORPLayer\n};\n\n// Grafick\u00e9 p\u0159ep\u00edn\u00e1n\u00ed podkladov\u00fdch map\nvar layerControl = L.control.layers(baseMaps, overlayMaps, {collapsed: false}).addTo(map);\n</code></pre> <pre><code>// Ur\u010den\u00ed velikosti grafu a jeho okraj\u016f\nconst width = 640;\nconst height = 400;\nconst marginTop = 20;\nconst marginRight = 20;\nconst marginBottom = 30;\nconst marginLeft = 40;\n\n// Definice osy x\nconst x = d3.scaleUtc()\n    .domain([new Date(\"2023-01-01\"), new Date(\"2024-01-01\")]) // Hodnoty na ose x\n    .range([marginLeft, width - marginRight]); // \u0160\u00ed\u0159ka osy p\u0159i vykreslen\u00ed grafu\n\n// Definice osy y\nconst y = d3.scaleLinear()\n    .domain([0, 100]) // Hodnoty na ose y\n    .range([height - marginBottom, marginTop]); // V\u00fd\u0161ka osy p\u0159i vykreslen\u00ed grafu\n\n// Vytvo\u0159en\u00ed SVG, do kter\u00e9ho se graf vykresl\u00ed\nconst svg = d3.create(\"svg\")\n    .attr(\"width\", width)\n    .attr(\"height\", height);\n\n// P\u0159id\u00e1n\u00ed osy x do grafu (= vykreslen\u00ed do SVG)\nsvg.append(\"g\")\n    .attr(\"transform\", `translate(0,${height - marginBottom})`)\n    .call(d3.axisBottom(x));\n\n// P\u0159id\u00e1n\u00ed osy y do grafu (= vykreslen\u00ed do SVG)\nsvg.append(\"g\")\n    .attr(\"transform\", `translate(${marginLeft},0)`)\n    .call(d3.axisLeft(y));\n\n// P\u0159ipojen\u00ed prvu SVG (= vykreslen\u00ed ve webov\u00e9 str\u00e1nce)\ncontainerChart.append(svg.node());\n</code></pre> <pre><code>/* Rozd\u011blen\u00ed str\u00e1nky */\n#container {\n    display: flex;\n    width: 100%;\n}\n\n\n/* Velikost mapov\u00e9ho okna */\n#map {\n    height: 800px;\n    width: 60%;\n}\n\n/* Velikost divu pro graf a jeho vycentrov\u00e1n\u00ed */\n#containerChart {\n    width: 40%;\n    justify-content: center;\n    align-items: center;\n    display: flex;\n}\n\n/* Div t\u0159\u00eddy info */\n.info {\n    padding: 6px 8px;\n    font: 14px/16px Arial, Helvetica, sans-serif;\n    background: white;\n    background: rgba(255,255,255,0.8);\n    box-shadow: 0 0 15px rgba(0,0,0,0.2);\n    border-radius: 5px;\n}\n\n/* Nadpis v divu info */\n.info h4 {\n    margin: 0 0 5px;\n    color: #777;\n}\n\n/* \u00daprava stylu legendy*/\n.legend {\n    line-height: 18px;\n    color: #555;\n}\n\n/* Zobrazen\u00ed \u010dtverc\u016f s barvou stylu ka\u017ed\u00e9ho atributu */\n.legend i {\n    width: 18px;\n    height: 18px;\n    float: left;\n    margin-right: 8px;\n    opacity: 0.7;\n}\n</code></pre>"},{"location":"cviceni/cviceni6/#2-vytvoreni-kartodiagramu-zobrazujiciho-pocet-obyvatel","title":"2) Vytvo\u0159en\u00ed kartodiagramu zobrazuj\u00edc\u00edho po\u010det obyvatel","text":"<p>Pro vytvo\u0159en\u00ed jednoduch\u00e9ho kartodiagramu vyu\u017eijeme atribut <code>poc_obyv_SLDB_2021</code>, kter\u00fd p\u0159edstavuje po\u010det obyvatel dan\u00e9ho ORP.</p> <p>K\u00f3d uprav\u00edme tak, aby se velikost bodov\u00fdch symbol\u016f p\u0159izp\u016fsobila po\u010dtu obyvatel. Pro lidnat\u011bj\u0161\u00ed ORP bude ukazatel tedy v\u011bt\u0161\u00ed a naopak.</p> <p>Data definuj\u00edc\u00ed velikost kartodiagramu mus\u00edme n\u011bjak\u00fdm vhodn\u00fdm zp\u016fsobem normalizovat, co\u017e provedeme n\u00e1sledovn\u011b:</p> \\[ \\text{size} = \\frac{\\sqrt{\\text{population}}}{30} \\] <p>Vykreslen\u00ed bod\u016f tedy mus\u00edme poupravit:</p> script.js <pre><code>// Na\u010dten\u00ed GeoJSONu s body ORP do mapy\nvar ORPPoints = L.geoJSON(ORP_body,{\n    pointToLayer: function (feature, latlng) {\n        // V\u00fdpis po\u010dtu obyvatel do prom\u011bnn\u00e9\n        var population = feature.properties.poc_obyv_SLDB_2021;\n\n        // \u00daprava velikosti symbolu - v\u00fdpo\u010det polom\u011bru\n        var radiusDiagram = Math.sqrt(population)/30;\n\n         return L.circleMarker(latlng, {\n            radius: radiusDiagram,  // Velikost symbolu v px\n\n            ... // Zbytek vlastnost\u00ed\n\n         }); // Vykreslen\u00ed kruhov\u00fdch symbol\u016f na sou\u0159adnic\u00edch bod\u016f\n    }\n}).addTo(map);\n</code></pre> <p> Nov\u011b vytvo\u0159en\u00fd kartodiagram zobrazuj\u00edc\u00ed po\u010det obyvatel v ka\u017ed\u00e9m ORP</p> <p> Upozorn\u011bn\u00ed</p> <p>Pokud by se n\u011bjak\u00e9 diagramy vykreslovaly opravdu mal\u00e9 \u010di velk\u00e9, m\u016f\u017eeme nastavit jejich minim\u00e1ln\u00ed nebo maxi\u00e1ln\u00ed velikost.</p> <pre><code>radius: radiusDiagram &gt; 2 ? radiusDiagram : 2,  // Minim\u00e1ln\u00ed polom\u011br 2 px\n\nradius: radiusDiagram &lt; 15 ? radiusDiagram : 15,  // Maxim\u00e1ln\u00ed polom\u011br 15 px\n</code></pre> <p>Jak v takov\u00e9m p\u0159\u00edpad\u011b v\u00fdpo\u010det velikosti funguje? Uk\u00e1\u017eeme si to na prvn\u00edm p\u0159\u00edkladu, minim\u00e1ln\u00ed velikosti. </p> <ul> <li> <p>Pokud je vypo\u010dten\u00fd polom\u011br <code>radiusDiagram</code> v\u011bt\u0161\u00ed ne\u017e 2, vykresl\u00ed se velikost diagramu rovna dvojn\u00e1sobku t\u00e9to hodnoty (dvojn\u00e1sobek, proto\u017ee pracujeme s polom\u011brem <code>radiusDiagram</code>).</p> </li> <li> <p>Pokud v\u0161ak podm\u00ednka neplat\u00ed a polom\u011br <code>radiusDiagram</code> je tedy men\u0161\u00ed ne\u017e 2, pak se nastav\u00ed velikost diagramu na 2*2 = 4 px.</p> </li> </ul> <p>Pro novou vrstvu kartodiagramu p\u0159id\u00e1me z\u00e1znam v legend\u011b.</p> script.js <pre><code>// Vytvo\u0159en\u00ed legendy a ur\u010den\u00ed jej\u00ed pozice\nvar diagramLegend = L.control({ position: 'bottomright' });\n\n// Nastaven\u00ed informac\u00ed vykreslen\u00fdch v legend\u011b\ndiagramLegend.onAdd = function (map) {\n    var div = L.DomUtil.create('div', 'info legend'),\n        populations = [10000, 50000, 100000, 500000, 1300000], // Rozsahy hodnot\n        labels = []; // Pr\u00e1zdn\u00e9 pole pro popisy, kter\u00e9 se vyp\u00ed\u0161\u00ed n\u00e1sledn\u011b\n\n    div.innerHTML += '&lt;h4&gt;Po\u010det obyvatel&lt;/h4&gt;'; // Nadpis legendy\n\n    for (var i = 0; i &lt; populations.length; i++) {\n        var radius = Math.sqrt(populations[i]) / 30; // V\u00fdpo\u010det polom\u011bru kruhu\n\n        // Vytvo\u0159en\u00ed popisu legendy - pro ka\u017ed\u00fd interval hodnot se vytvo\u0159\u00ed p\u0159\u00edslu\u0161n\u011b velk\u00e1 kru\u017enice s popisem\n        // Takto vytvo\u0159en\u00e9 kru\u017enice jsou se\u0159azen\u00e9 v legend\u011b pomoc\u00ed display:flex\n        // V legend\u011b mus\u00edme \n        labels.push(\n            `&lt;div style=\"display: flex; align-items: center; margin-bottom: 5px;\"&gt;\n                &lt;i style=\"\n                    background: #ff7800; \n                    width: ${radius * 2}px; \n                    height: ${radius * 2}px; \n                    border-radius: 50%;\n                    display: inline-block;\n                    margin-right: 10px;\n                    flex-shrink: 0;\n                    border: 1.5px solid black;\"&gt; &lt;!-- P\u0159id\u00e1no \u010dern\u00e9 ohrani\u010den\u00ed --&gt;\n                &lt;/i&gt; \n                &lt;span&gt;${populations[i].toLocaleString()} obyv.&lt;/span&gt;\n            &lt;/div&gt;`\n        );\n    }\n\n    div.innerHTML += labels.join(''); // Vlo\u017een\u00ed v\u0161ech popisk\u016f do legendy\n    return div;\n};\n\n// P\u0159id\u00e1n\u00ed legendy pro kartodiagramy do mapy\ndiagramLegend.addTo(map);\n</code></pre> <p> Mapa po p\u0159id\u00e1n\u00ed legendy kartodiagramu</p> Stav k\u00f3du po dokon\u010den\u00ed kroku 2) Vytvo\u0159en\u00ed kartodiagramu zobrazuj\u00edc\u00edho po\u010det obyvatel index.html \u2013 beze zm\u011bnyscript.jsscript-chart.js \u2013 beze zm\u011bnystyle.css \u2013 beze zm\u011bny <pre><code>&lt;!DOCTYPE html&gt; \n&lt;html&gt; \n&lt;head&gt; \n    &lt;meta charset=\"UTF-8\"&gt; \n    &lt;meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"&gt;\n    &lt;link rel=\"stylesheet\" href=\"style.css\"&gt;\n\n    &lt;!-- Na\u010dten\u00ed souboru s body ORP GeoJSON--&gt;\n    &lt;script src=\"ORP_body_GeoJSON.js\"&gt;&lt;/script&gt;\n\n    &lt;!-- Na\u010dten\u00ed souboru s ORP GeoJSON--&gt;\n    &lt;script src=\"ORP_GeoJSON.js\"&gt;&lt;/script&gt;\n\n    &lt;!-- Extern\u00ed p\u0159ipojen\u00ed CSS symbologie Leaflet--&gt;\n    &lt;link rel=\"stylesheet\" href=\"https://unpkg.com/leaflet@1.9.4/dist/leaflet.css\"\n    integrity=\"sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=\"\n    crossorigin=\"\"/&gt;\n\n    &lt;!-- Extern\u00ed p\u0159ipojen\u00ed JS knihovny -&gt; vlo\u017eit a\u017e po p\u0159ipojen\u00ed CSS souboru --&gt;\n    &lt;script src=\"https://unpkg.com/leaflet@1.9.4/dist/leaflet.js\"\n    integrity=\"sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=\"\n    crossorigin=\"\"&gt;&lt;/script&gt;\n\n    &lt;!-- P\u0159ipojen\u00ed D3.js --&gt;\n    &lt;script src=\"https://cdn.jsdelivr.net/npm/d3@7\"&gt;&lt;/script&gt;\n\n    &lt;title&gt;Moje druh\u00e1 Leaflet mapa&lt;/title&gt; \n&lt;/head&gt;\n&lt;body&gt; \n\n    &lt;h1&gt;Propojen\u00ed knihovny Leaflet s D3.js&lt;/h1&gt; \n\n    &lt;!-- Rozd\u011blen\u00ed str\u00e1nky na mapu a graf, pom\u011br je nastaven\u00fd pomoc\u00ed CSS --&gt;\n    &lt;div id=\"container\"&gt;\n        &lt;div id=\"map\"&gt;&lt;/div&gt;\n        &lt;div id=\"containerChart\"&gt;&lt;/div&gt;\n    &lt;/div&gt;\n\n    &lt;!-- Na\u010dten\u00ed skript\u016f ovl\u00e1daj\u00edc\u00ed mapu --&gt;\n    &lt;script src=\"script.js\"&gt;&lt;/script&gt;\n\n    &lt;!-- Na\u010dten\u00ed skript\u016f ovl\u00e1daj\u00edc\u00ed graf --&gt;\n    &lt;script type=\"module\" src=\"script-chart.js\"&gt;&lt;/script&gt;\n\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre> <pre><code>// Nastaven\u00ed mapy, jej\u00edho st\u0159edu a \u00farovn\u011b p\u0159ibl\u00ed\u017een\u00ed\nvar map = L.map('map').setView([49.860, 16.000], 8); // V\u00fdb\u011br bodu zhruba uprost\u0159ed republiky\n\n// Ur\u010den\u00ed podkladov\u00e9 mapy, maxim\u00e1ln\u00ed \u00farovn\u011b p\u0159ibl\u00ed\u017een\u00ed a zdroje dat\nvar osm = L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {\n    maxZoom: 19,\n    attribution: '&amp;copy; &lt;a href=\"http://www.openstreetmap.org/copyright\"&gt;OpenStreetMap&lt;/a&gt;'\n}).addTo(map);\n\n// Definice podkladov\u00e9 OpenTopoMap\nvar otm = L.tileLayer('https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png', {\n    maxZoom: 17,\n    attribution: 'Map data: &amp;copy; &lt;a href=\"https://www.openstreetmap.org/copyright\"&gt;OpenStreetMap&lt;/a&gt; contributors, &lt;a href=\"http://viewfinderpanoramas.org\"&gt;SRTM&lt;/a&gt; | Map style: &amp;copy; &lt;a href=\"https://opentopomap.org\"&gt;OpenTopoMap&lt;/a&gt; (&lt;a href=\"https://creativecommons.org/licenses/by-sa/3.0/\"&gt;CC-BY-SA&lt;/a&gt;)'\n});\n\n// P\u0159id\u00e1n\u00ed ortofota jako WMS slu\u017eby, ur\u010den\u00ed vrstvy, form\u00e1tu a pr\u016fhlednosti\nvar ortofoto = L.tileLayer.wms(\"https://ags.cuzk.gov.cz/arcgis1/services/ORTOFOTO/MapServer/WMSServer\", {\n    layers: \"0\", \n    format: \"image/png\",\n    transparent: true,\n    attribution: \"&amp;copy \u010c\u00daZK\"\n});\n\n// V\u00fdpo\u010det nov\u00e9ho atributu pro ka\u017ed\u00fd prvek ORP \n// (hustota obyvatelstva = po\u010det obyvatel / plocha), p\u0159evod z m2 na km2 -&gt; vyn\u00e1soben\u00ed 1 000 000\nORP.features.forEach(function(feature){\n    if(feature.properties.Shape_Area &amp;&amp; feature.properties.poc_obyv_SLDB_2021){\n        feature.properties.hustota = (feature.properties.poc_obyv_SLDB_2021/feature.properties.Shape_Area)*1000000\n    }else{\n        feature.properties.hustota = 0\n    }\n})\n\n// Vytvo\u0159en\u00ed barevn\u00e9 stupnice\nfunction getColor(d) {\nreturn d &gt; 1000 ? '#800026' :\n        d &gt; 500  ? '#BD0026' :\n        d &gt; 200  ? '#E31A1C' :\n        d &gt; 100  ? '#FC4E2A' :\n        d &gt; 50   ? '#FD8D3C' :\n        d &gt; 20   ? '#FEB24C' :\n                    '#FFEDA0'; // V\u00fdchoz\u00ed barva\n}\n\n// Styl kartogramu\nfunction kartogram(feature) {\nreturn {\n    fillColor: getColor(feature.properties.hustota), // Styl na z\u00e1klad\u011b atributu \"hustota\"\n    weight: 1,\n    opacity: 1,\n    color: 'white',\n    fillOpacity: 0.7\n};\n}\n\n// V\u00fdb\u011br prvku po najet\u00ed kurzorem my\u0161i\nfunction highlightFeature(e) {\n    var layer = e.target;\n\n    // \u00daprava stylu vybran\u00e9ho prvku = jeho zv\u00fdrazn\u011bn\u00ed\n    layer.setStyle({\n        weight: 5,\n        color: '#666',\n        dashArray: '',\n        fillOpacity: 0.7\n    });\n\n    layer.bringToFront();\n    info.update(layer.feature.properties); // Aktualizace info pop-upu p\u0159i v\u00fdb\u011bru prvku\n    ORPPoints.bringToFront(); // Vykreslen\u00ed bod\u016f ORP do pop\u0159ed\u00ed po v\u00fdb\u011bru prvku\n}\n\n// P\u0159ibl\u00ed\u017een\u00ed na vybran\u00fd polygon po kliknut\u00ed my\u0161\u00ed\nfunction zoomToFeature(e) {\n    map.fitBounds(e.target.getBounds());\n}\n\n// Resetov\u00e1n\u00ed stylu kartogramu po zru\u0161en\u00ed jeho v\u00fdb\u011bru my\u0161\u00ed\nfunction resetHighlight(e) {\n    ORPLayer.resetStyle(e.target);\n    info.update(); // Aktualizace info pop-upu p\u0159i v\u00fdb\u011bru prvku\n}\n\n// P\u0159\u00edstup k jednotliv\u00fdm polygon\u016f ve vrstv\u011b\nfunction onEachFeature(feature, layer) {\n    layer.on({\n        mouseover: highlightFeature,\n        mouseout: resetHighlight,\n        click: zoomToFeature\n    });\n}\n\n// Vytvo\u0159en\u00ed pop-upu s informacemi o vybran\u00e9m prvku v map\u011b\nvar info = L.control();\n\ninfo.onAdd = function (map) {\n    this._div = L.DomUtil.create('div', 'info'); // Vytvo\u0159\u00ed div s t\u0159\u00eddou \"info\"\n    this.update();\n    return this._div;\n};\n\n// Funkce pro aktualizaci po-upu na z\u00e1klad\u011b p\u0159edan\u00fdch vlastnost\u00ed prvku\ninfo.update = function (props) {\n    this._div.innerHTML = '&lt;h4&gt;Hustota obyvatel&lt;/h4&gt;' +  (props ?\n        '&lt;b&gt;' + props.nazev + '&lt;/b&gt;&lt;br /&gt;' + props.hustota.toFixed(2) + ' obyv. / km&lt;sup&gt;2&lt;/sup&gt;'\n        : 'Vyber ORP'); // V\u00fdpis, pokud nen\u00ed vybran\u00fd prvek\n};\n\n// Vlo\u017een\u00ed info pop-upu do mapy\ninfo.addTo(map); \n\n// Vytvo\u0159en\u00ed legendy a nastaven\u00ed jej\u00ed pozice\nvar legend = L.control({position: 'bottomright'});\n\nlegend.onAdd = function (map) {\n\n    var div = L.DomUtil.create('div', 'info legend'),\n        grades = [0, 20, 50, 100, 200, 500, 1000], // Hranice interval\u016f - stejn\u00e9 jako v nastaven\u00ed stylu kartogramu\n        labels = [];\n\n    div.innerHTML += '&lt;h4&gt;Hustota obyvatel&lt;/h4&gt;' + 'obyv. / km&lt;sup&gt;2&lt;/sup&gt;&lt;br /&gt;'; // Nadpis legendy\n\n    // Proch\u00e1zen\u00ed interval\u016f hustoty - pro ka\u017ed\u00fd interval se vygeneruje \u0161t\u00edtek s barevn\u00fdm \u010dtvercem.\n    for (var i = 0; i &lt; grades.length; i++) {\n        div.innerHTML +=\n            '&lt;i style=\"background:' + getColor(grades[i] + 1) + '\"&gt;&lt;/i&gt; ' +\n            grades[i] + (grades[i + 1] ? '&amp;ndash;' + grades[i + 1] + '&lt;br&gt;' : '+');\n    }\n\n    return div;\n};\n\n// P\u0159id\u00e1n\u00ed legendy do mapy\nlegend.addTo(map);\n\n// Na\u010dten\u00ed GeoJSONu s polygony ORP do mapy\nvar ORPLayer = L.geoJSON(ORP,{\n    style: kartogram, \n    onEachFeature: onEachFeature\n}).addTo(map);\n\n// Na\u010dten\u00ed GeoJSONu s body ORP do mapy\nvar ORPPoints = L.geoJSON(ORP_body,{\n    pointToLayer: function (feature, latlng) {\n        // V\u00fdpis po\u010dtu obyvatel do prom\u011bnn\u00e9\n        var population = feature.properties.poc_obyv_SLDB_2021;\n\n        // \u00daprava velikosti symbolu - v\u00fdpo\u010det polom\u011bru\n        var radiusDiagram = Math.sqrt(population)/30;\n\n        return L.circleMarker(latlng, {\n            radius: radiusDiagram,  // Velikost symbolu v px\n            fillColor: \"#ff7800\", // Barva v\u00fdpln\u011b\n            color: \"#000\", // Barva ohrani\u010den\u00ed\n            weight: 1.5, // \u0160\u00ed\u0159ka ohrani\u010den\u00ed v px\n            fillOpacity: 0.8, // Pr\u016fhlednost v\u00fdpln\u011b\n            opacity: 1, // Pr\u016fhlednost ohrani\u010den\u00ed\n        }); // Vykreslen\u00ed kruhov\u00fdch symbol\u016f na sou\u0159adnic\u00edch bod\u016f\n    }\n}).addTo(map);\n\n// Vytvo\u0159en\u00ed legendy a ur\u010den\u00ed jej\u00ed pozice\nvar diagramLegend = L.control({ position: 'bottomright' });\n\n// Nastaven\u00ed informac\u00ed vykreslen\u00fdch v legend\u011b\ndiagramLegend.onAdd = function (map) {\n    var div = L.DomUtil.create('div', 'info legend'),\n        populations = [10000, 50000, 100000, 500000, 1300000], // Rozsahy hodnot\n        labels = []; // Pr\u00e1zdn\u00e9 pole pro popisy, kter\u00e9 se vyp\u00ed\u0161\u00ed n\u00e1sledn\u011b\n\n    div.innerHTML += '&lt;h4&gt;Po\u010det obyvatel&lt;/h4&gt;'; // Nadpis legendy\n\n    for (var i = 0; i &lt; populations.length; i++) {\n        var radius = Math.sqrt(populations[i]) / 30; // V\u00fdpo\u010det polom\u011bru kruhu\n\n        // Vytvo\u0159en\u00ed popisu legendy - pro ka\u017ed\u00fd interval hodnot se vytvo\u0159\u00ed p\u0159\u00edslu\u0161n\u011b velk\u00e1 kru\u017enice s popisem\n        // Takto vytvo\u0159en\u00e9 kru\u017enice jsou se\u0159azen\u00e9 v legend\u011b pomoc\u00ed display:flex\n        // V legend\u011b mus\u00edme \n        labels.push(\n            `&lt;div style=\"display: flex; align-items: center; margin-bottom: 5px;\"&gt;\n                &lt;i style=\"\n                    background: #ff7800; \n                    width: ${radius * 2}px; \n                    height: ${radius * 2}px; \n                    border-radius: 50%;\n                    display: inline-block;\n                    margin-right: 10px;\n                    flex-shrink: 0;\n                    border: 1.5px solid black;\"&gt; &lt;!-- P\u0159id\u00e1no \u010dern\u00e9 ohrani\u010den\u00ed --&gt;\n                &lt;/i&gt; \n                &lt;span&gt;${populations[i].toLocaleString()} obyv.&lt;/span&gt;\n            &lt;/div&gt;`\n        );\n    }\n\n    div.innerHTML += labels.join(''); // Vlo\u017een\u00ed v\u0161ech popisk\u016f do legendy\n    return div;\n};\n\n// P\u0159id\u00e1n\u00ed legendy pro kartodiagramy do mapy\ndiagramLegend.addTo(map);\n\n// Prom\u011bnn\u00e1 uchov\u00e1vaj\u00edc\u00ed podkladov\u00e9 mapy, mezi kter\u00fdmi chceme p\u0159ep\u00ednat\nvar baseMaps = {\n    \"OpenStreetMap\": osm, // \"popis mapy\": nazevPromenne\n    \"OpenTopoMap\": otm,\n    \"Ortofoto \u010cR\": ortofoto\n};\n\n// Prom\u011bnn\u00e1 uchov\u00e1vaj\u00edc\u00ed mapov\u00e9 vrstvy, kter\u00e9 chceme zobrazovat a skr\u00fdvat\nvar overlayMaps = {\n    \"Body ORP\": ORPPoints,\n    \"Hustota obyvatelstva\": ORPLayer\n};\n\n// Grafick\u00e9 p\u0159ep\u00edn\u00e1n\u00ed podkladov\u00fdch map\nvar layerControl = L.control.layers(baseMaps, overlayMaps, {collapsed: false}).addTo(map);\n</code></pre> <pre><code>// Ur\u010den\u00ed velikosti grafu a jeho okraj\u016f\nconst width = 640;\nconst height = 400;\nconst marginTop = 20;\nconst marginRight = 20;\nconst marginBottom = 30;\nconst marginLeft = 40;\n\n// Definice osy x\nconst x = d3.scaleUtc()\n    .domain([new Date(\"2023-01-01\"), new Date(\"2024-01-01\")]) // Hodnoty na ose x\n    .range([marginLeft, width - marginRight]); // \u0160\u00ed\u0159ka osy p\u0159i vykreslen\u00ed grafu\n\n// Definice osy y\nconst y = d3.scaleLinear()\n    .domain([0, 100]) // Hodnoty na ose y\n    .range([height - marginBottom, marginTop]); // V\u00fd\u0161ka osy p\u0159i vykreslen\u00ed grafu\n\n// Vytvo\u0159en\u00ed SVG, do kter\u00e9ho se graf vykresl\u00ed\nconst svg = d3.create(\"svg\")\n    .attr(\"width\", width)\n    .attr(\"height\", height);\n\n// P\u0159id\u00e1n\u00ed osy x do grafu (= vykreslen\u00ed do SVG)\nsvg.append(\"g\")\n    .attr(\"transform\", `translate(0,${height - marginBottom})`)\n    .call(d3.axisBottom(x));\n\n// P\u0159id\u00e1n\u00ed osy y do grafu (= vykreslen\u00ed do SVG)\nsvg.append(\"g\")\n    .attr(\"transform\", `translate(${marginLeft},0)`)\n    .call(d3.axisLeft(y));\n\n// P\u0159ipojen\u00ed prvu SVG (= vykreslen\u00ed ve webov\u00e9 str\u00e1nce)\ncontainerChart.append(svg.node());\n</code></pre> <pre><code>/* Rozd\u011blen\u00ed str\u00e1nky */\n#container {\n    display: flex;\n    width: 100%;\n}\n\n\n/* Velikost mapov\u00e9ho okna */\n#map {\n    height: 800px;\n    width: 60%;\n}\n\n/* Velikost divu pro graf a jeho vycentrov\u00e1n\u00ed */\n#containerChart {\n    width: 40%;\n    justify-content: center;\n    align-items: center;\n    display: flex;\n}\n\n/* Div t\u0159\u00eddy info */\n.info {\n    padding: 6px 8px;\n    font: 14px/16px Arial, Helvetica, sans-serif;\n    background: white;\n    background: rgba(255,255,255,0.8);\n    box-shadow: 0 0 15px rgba(0,0,0,0.2);\n    border-radius: 5px;\n}\n\n/* Nadpis v divu info */\n.info h4 {\n    margin: 0 0 5px;\n    color: #777;\n}\n\n/* \u00daprava stylu legendy*/\n.legend {\n    line-height: 18px;\n    color: #555;\n}\n\n/* Zobrazen\u00ed \u010dtverc\u016f s barvou stylu ka\u017ed\u00e9ho atributu */\n.legend i {\n    width: 18px;\n    height: 18px;\n    float: left;\n    margin-right: 8px;\n    opacity: 0.7;\n}\n</code></pre>"},{"location":"cviceni/cviceni6/#3-strukturni-kartodiagram-zobrazujici-vekove-slozeni","title":"3) Strukturn\u00ed kartodiagram zobrazuj\u00edc\u00ed v\u011bkov\u00e9 slo\u017een\u00ed","text":"<p>V posledn\u00edm kroku si vytvo\u0159\u00edme strukturn\u00ed kartodiagram, kter\u00fd bude m\u00edt sice pro v\u0161echny ORP stejnou velikost, ale bude zobrazovat pom\u011br v\u011bkov\u00e9ho slo\u017een\u00ed na dan\u00e9m \u00fazem\u00ed, tedy v\u011bkovou strukturu.</p> <p>Nejprve si skryjeme vykreslov\u00e1n\u00ed p\u0159edchoz\u00edho kartodiagramu. P\u0159\u00edpadn\u011b m\u016f\u017eeme pracovat s nov\u00fdm k\u00f3dem.</p> <p>V prvn\u00ed f\u00e1zi definujeme, kter\u00e9 atributy budou v diagramu vykreslen\u00e9, tedy <code>poc_obyv_0_14</code>, <code>poc_obyv_15_64</code> a <code>poc_obyv_nad_65</code>.</p> <p>Z\u00e1rove\u0148 definujeme, \u017ee se jedn\u00e1 o kol\u00e1\u010dov\u00fd graf (pie chart).</p> script.js <pre><code>// Vytvo\u0159en\u00ed diagramu pro v\u011bkov\u00e9 skupiny \nvar ageGroups = ORP_body.features.map(function(feature) {\n    return {\n        ...feature, // 3 te\u010dky zna\u010d\u00ed zkop\u00edrov\u00e1n\u00ed vlastnost\u00ed mezi objekty\n        pieData: d3.pie()([feature.properties.poc_obyv_0_14, feature.properties.poc_obyv_15_64, feature.properties.poc_obyv_nad_65])\n    };\n});\n</code></pre> <p>N\u00e1sledn\u011b vytvo\u0159\u00edme funkci <code>createPieCharts</code>, pomoc\u00ed kter\u00e9 definujeme vstupn\u00ed data pro diagramy, jejich barvy a velikosti.</p> <p>Z\u00e1rove\u0148 nastav\u00edme aktualizaci diagram\u016f p\u0159i posunu mapy funkc\u00ed <code>updatePieCharts</code>.</p> script.js <pre><code>// Vytvo\u0159en\u00ed graf\u016f v map\u011b\nfunction createPieCharts() {\n    const overlayPane = map.getPanes().overlayPane;\n\n    // Vykreslen\u00ed do SVG\n    const svg = d3.select(overlayPane).select('svg');\n\n    // Vykreslen\u00ed dat z prom\u011bnn\u00e9 ageGroups\n    const pies = svg.selectAll('g.pie-chart')\n        .data(ageGroups)\n        .enter()\n        .append('g')\n        .attr('opacity', 0.8)\n        .attr('class', 'pie-chart');\n\n    // Nastaven\u00ed velikosti grafu\n    const arcGenerate = d3.arc()\n        .innerRadius(0) // Vnit\u0159n\u00ed polom\u011br\n        .outerRadius(15); // Vn\u011bj\u0161\u00ed polom\u011br\n\n    // Pou\u017eit\u00e9 barvy v diagramu    \n    const getColor = (d, i) =&gt; {\n        const colors = ['blue', 'green', 'red'];\n        return colors[i];\n    };\n\n    // Generov\u00e1n\u00ed diagramu\n    pies.selectAll('path')\n        .data(d =&gt; d.pieData)\n        .enter()\n        .append('path')\n        .attr('d', arcGenerate)\n        .attr('fill', getColor)\n        .attr('stroke', 'white');\n}\n\n// Aktualizace pozice diagram\u016f p\u0159i posunu mapy\nfunction updatePieCharts() {\n    const overlayPane = map.getPanes().overlayPane;\n    const svg = d3.select(overlayPane).select('svg');\n\n    svg.selectAll('g.pie-chart')\n        .attr('transform', d =&gt; {\n            const point = map.latLngToLayerPoint([d.geometry.coordinates[1], d.geometry.coordinates[0]]);\n            return `translate(${point.x}, ${point.y})`;\n        });\n}\n</code></pre> <p>D\u00e1le mus\u00edme vykreslit diagramy na spr\u00e1vn\u00fdch pozic\u00edch v map\u011b.</p> script.js <pre><code>// Vytvo\u0159en\u00ed diagram\u016f a prvotn\u00ed aktualizace (na\u010dten\u00ed)\ncreatePieCharts();\nupdatePieCharts(); // P\u0159i vynech\u00e1n\u00ed tohoto k\u00f3du by se diagramy na\u010detly a\u017e po posunu mapy nebo zoomu\n\n// Aktualizace pozice diagram\u016f p\u0159i posunu mapy nebo zoomov\u00e1n\u00ed\nmap.on('zoomend', updatePieCharts);\n\n// Funkce pro vykreslen\u00ed SVG vrstvy, kter\u00e1 obsahuje v\u0161echny diagramy\nmap.on('layeradd', function (event) {\n    if (event.layer === map) {\n        const overlayPane = map.getPanes().overlayPane;\n        overlayPane.append('svg')  // P\u0159id\u00e1n\u00ed SVG pro vykreslen\u00ed diagram\u016f\n            .attr('width', map.getSize().x)\n            .attr('height', map.getSize().y);\n    }\n});\n</code></pre> <p> Strukturn\u00ed kartodiagram vytvo\u0159en\u00fd pomoc\u00ed knihovny D3.js</p> <p>Z\u00e1v\u011brem p\u0159id\u00e1me op\u011bt legendu.</p> script.js <pre><code>// Vytvo\u0159en\u00ed legendy pro pie chart\nvar pieChartLegend = L.control({ position: 'bottomright' });\n\npieChartLegend.onAdd = function (map) {\n    var div = L.DomUtil.create('div', 'info legend'),\n        ageGroups = ['0-14', '15-64', 'nad 65'], // Popisky pro v\u011bkov\u00e9 skupiny\n        colors = ['blue', 'green', 'red'], // Barvy pro jednotliv\u00e9 v\u011bkov\u00e9 skupiny\n        labels = [];\n\n    div.innerHTML += '&lt;h4&gt;V\u011bkov\u00e9 skupiny&lt;/h4&gt;'; // Nadpis legendy\n\n    // Vytvo\u0159en\u00ed popisk\u016f pro jednotliv\u00e9 v\u011bkov\u00e9 skupiny\n    for (var i = 0; i &lt; ageGroups.length; i++) {\n        labels.push(\n            `&lt;div style=\"display: flex; align-items: center; margin-bottom: 5px;\"&gt;\n                &lt;i style=\"\n                    background: ${colors[i]}; \n                    width: 20px; \n                    height: 20px; \n                    border-radius: 50%;\n                    display: inline-block;\n                    margin-right: 10px;\n                    flex-shrink: 0;\"&gt;\n                &lt;/i&gt; \n                &lt;span&gt;${ageGroups[i]}&lt;/span&gt;\n            &lt;/div&gt;`\n        );\n    }\n\n    div.innerHTML += labels.join(''); // Vlo\u017een\u00ed v\u0161ech popisk\u016f do legendy\n    return div;\n};\n\n// P\u0159id\u00e1n\u00ed legendy pro pie chart do mapy\npieChartLegend.addTo(map);\n</code></pre> <p> P\u0159id\u00e1n\u00ed legendy pro strukturn\u00ed kartodiagram</p> Stav k\u00f3du po dokon\u010den\u00ed kroku 3) Strukturn\u00ed kartodiagram zobrazuj\u00edc\u00ed v\u011bkov\u00e9 slo\u017een\u00ed index.html \u2013 beze zm\u011bnyscript.jsscript-chart.js \u2013 beze zm\u011bnystyle.css \u2013 beze zm\u011bny <pre><code>&lt;!DOCTYPE html&gt; \n&lt;html&gt; \n&lt;head&gt; \n    &lt;meta charset=\"UTF-8\"&gt; \n    &lt;meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"&gt;\n    &lt;link rel=\"stylesheet\" href=\"style.css\"&gt;\n\n    &lt;!-- Na\u010dten\u00ed souboru s body ORP GeoJSON--&gt;\n    &lt;script src=\"ORP_body_GeoJSON.js\"&gt;&lt;/script&gt;\n\n    &lt;!-- Na\u010dten\u00ed souboru s ORP GeoJSON--&gt;\n    &lt;script src=\"ORP_GeoJSON.js\"&gt;&lt;/script&gt;\n\n    &lt;!-- Extern\u00ed p\u0159ipojen\u00ed CSS symbologie Leaflet--&gt;\n    &lt;link rel=\"stylesheet\" href=\"https://unpkg.com/leaflet@1.9.4/dist/leaflet.css\"\n    integrity=\"sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=\"\n    crossorigin=\"\"/&gt;\n\n    &lt;!-- Extern\u00ed p\u0159ipojen\u00ed JS knihovny -&gt; vlo\u017eit a\u017e po p\u0159ipojen\u00ed CSS souboru --&gt;\n    &lt;script src=\"https://unpkg.com/leaflet@1.9.4/dist/leaflet.js\"\n    integrity=\"sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=\"\n    crossorigin=\"\"&gt;&lt;/script&gt;\n\n    &lt;!-- P\u0159ipojen\u00ed D3.js --&gt;\n    &lt;script src=\"https://cdn.jsdelivr.net/npm/d3@7\"&gt;&lt;/script&gt;\n\n    &lt;title&gt;Moje druh\u00e1 Leaflet mapa&lt;/title&gt; \n&lt;/head&gt;\n&lt;body&gt; \n\n    &lt;h1&gt;Propojen\u00ed knihovny Leaflet s D3.js&lt;/h1&gt; \n\n    &lt;!-- Rozd\u011blen\u00ed str\u00e1nky na mapu a graf, pom\u011br je nastaven\u00fd pomoc\u00ed CSS --&gt;\n    &lt;div id=\"container\"&gt;\n        &lt;div id=\"map\"&gt;&lt;/div&gt;\n        &lt;div id=\"containerChart\"&gt;&lt;/div&gt;\n    &lt;/div&gt;\n\n    &lt;!-- Na\u010dten\u00ed skript\u016f ovl\u00e1daj\u00edc\u00ed mapu --&gt;\n    &lt;script src=\"script.js\"&gt;&lt;/script&gt;\n\n    &lt;!-- Na\u010dten\u00ed skript\u016f ovl\u00e1daj\u00edc\u00ed graf --&gt;\n    &lt;script type=\"module\" src=\"script-chart.js\"&gt;&lt;/script&gt;\n\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre> <pre><code>// Nastaven\u00ed mapy, jej\u00edho st\u0159edu a \u00farovn\u011b p\u0159ibl\u00ed\u017een\u00ed\nvar map = L.map('map').setView([49.860, 16.000], 8); // V\u00fdb\u011br bodu zhruba uprost\u0159ed republiky\n\n// Ur\u010den\u00ed podkladov\u00e9 mapy, maxim\u00e1ln\u00ed \u00farovn\u011b p\u0159ibl\u00ed\u017een\u00ed a zdroje dat\nvar osm = L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {\n    maxZoom: 19,\n    attribution: '&amp;copy; &lt;a href=\"http://www.openstreetmap.org/copyright\"&gt;OpenStreetMap&lt;/a&gt;'\n}).addTo(map);\n\n// Definice podkladov\u00e9 OpenTopoMap\nvar otm = L.tileLayer('https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png', {\n    maxZoom: 17,\n    attribution: 'Map data: &amp;copy; &lt;a href=\"https://www.openstreetmap.org/copyright\"&gt;OpenStreetMap&lt;/a&gt; contributors, &lt;a href=\"http://viewfinderpanoramas.org\"&gt;SRTM&lt;/a&gt; | Map style: &amp;copy; &lt;a href=\"https://opentopomap.org\"&gt;OpenTopoMap&lt;/a&gt; (&lt;a href=\"https://creativecommons.org/licenses/by-sa/3.0/\"&gt;CC-BY-SA&lt;/a&gt;)'\n});\n\n// P\u0159id\u00e1n\u00ed ortofota jako WMS slu\u017eby, ur\u010den\u00ed vrstvy, form\u00e1tu a pr\u016fhlednosti\nvar ortofoto = L.tileLayer.wms(\"https://ags.cuzk.gov.cz/arcgis1/services/ORTOFOTO/MapServer/WMSServer\", {\n    layers: \"0\", \n    format: \"image/png\",\n    transparent: true,\n    attribution: \"&amp;copy \u010c\u00daZK\"\n});\n\n// V\u00fdpo\u010det nov\u00e9ho atributu pro ka\u017ed\u00fd prvek ORP \n// (hustota obyvatelstva = po\u010det obyvatel / plocha), p\u0159evod z m2 na km2 -&gt; vyn\u00e1soben\u00ed 1 000 000\nORP.features.forEach(function(feature){\n    if(feature.properties.Shape_Area &amp;&amp; feature.properties.poc_obyv_SLDB_2021){\n        feature.properties.hustota = (feature.properties.poc_obyv_SLDB_2021/feature.properties.Shape_Area)*1000000\n    }else{\n        feature.properties.hustota = 0\n    }\n})\n\n// Vytvo\u0159en\u00ed barevn\u00e9 stupnice\nfunction getColor(d) {\nreturn d &gt; 1000 ? '#800026' :\n        d &gt; 500  ? '#BD0026' :\n        d &gt; 200  ? '#E31A1C' :\n        d &gt; 100  ? '#FC4E2A' :\n        d &gt; 50   ? '#FD8D3C' :\n        d &gt; 20   ? '#FEB24C' :\n                    '#FFEDA0'; // V\u00fdchoz\u00ed barva\n}\n\n// Styl kartogramu\nfunction kartogram(feature) {\nreturn {\n    fillColor: getColor(feature.properties.hustota), // Styl na z\u00e1klad\u011b atributu \"hustota\"\n    weight: 1,\n    opacity: 1,\n    color: 'white',\n    fillOpacity: 0.7\n};\n}\n\n// V\u00fdb\u011br prvku po najet\u00ed kurzorem my\u0161i\nfunction highlightFeature(e) {\n    var layer = e.target;\n\n    // \u00daprava stylu vybran\u00e9ho prvku = jeho zv\u00fdrazn\u011bn\u00ed\n    layer.setStyle({\n        weight: 5,\n        color: '#666',\n        dashArray: '',\n        fillOpacity: 0.7\n    });\n\n    layer.bringToFront();\n    info.update(layer.feature.properties); // Aktualizace info pop-upu p\u0159i v\u00fdb\u011bru prvku\n    ORPPoints.bringToFront(); // Vykreslen\u00ed bod\u016f ORP do pop\u0159ed\u00ed po v\u00fdb\u011bru prvku\n}\n\n// P\u0159ibl\u00ed\u017een\u00ed na vybran\u00fd polygon po kliknut\u00ed my\u0161\u00ed\nfunction zoomToFeature(e) {\n    map.fitBounds(e.target.getBounds());\n}\n\n// Resetov\u00e1n\u00ed stylu kartogramu po zru\u0161en\u00ed jeho v\u00fdb\u011bru my\u0161\u00ed\nfunction resetHighlight(e) {\n    ORPLayer.resetStyle(e.target);\n    info.update(); // Aktualizace info pop-upu p\u0159i v\u00fdb\u011bru prvku\n}\n\n// P\u0159\u00edstup k jednotliv\u00fdm polygon\u016f ve vrstv\u011b\nfunction onEachFeature(feature, layer) {\n    layer.on({\n        mouseover: highlightFeature,\n        mouseout: resetHighlight,\n        click: zoomToFeature\n    });\n}\n\n// Vytvo\u0159en\u00ed pop-upu s informacemi o vybran\u00e9m prvku v map\u011b\nvar info = L.control();\n\ninfo.onAdd = function (map) {\n    this._div = L.DomUtil.create('div', 'info'); // Vytvo\u0159\u00ed div s t\u0159\u00eddou \"info\"\n    this.update();\n    return this._div;\n};\n\n// Funkce pro aktualizaci po-upu na z\u00e1klad\u011b p\u0159edan\u00fdch vlastnost\u00ed prvku\ninfo.update = function (props) {\n    this._div.innerHTML = '&lt;h4&gt;Hustota obyvatel&lt;/h4&gt;' +  (props ?\n        '&lt;b&gt;' + props.nazev + '&lt;/b&gt;&lt;br /&gt;' + props.hustota.toFixed(2) + ' obyv. / km&lt;sup&gt;2&lt;/sup&gt;'\n        : 'Vyber ORP'); // V\u00fdpis, pokud nen\u00ed vybran\u00fd prvek\n};\n\n// Vlo\u017een\u00ed info pop-upu do mapy\ninfo.addTo(map); \n\n// Vytvo\u0159en\u00ed legendy a nastaven\u00ed jej\u00ed pozice\nvar legend = L.control({position: 'bottomright'});\n\nlegend.onAdd = function (map) {\n\n    var div = L.DomUtil.create('div', 'info legend'),\n        grades = [0, 20, 50, 100, 200, 500, 1000], // Hranice interval\u016f - stejn\u00e9 jako v nastaven\u00ed stylu kartogramu\n        labels = [];\n\n    div.innerHTML += '&lt;h4&gt;Hustota obyvatel&lt;/h4&gt;' + 'obyv. / km&lt;sup&gt;2&lt;/sup&gt;&lt;br /&gt;'; // Nadpis legendy\n\n    // Proch\u00e1zen\u00ed interval\u016f hustoty - pro ka\u017ed\u00fd interval se vygeneruje \u0161t\u00edtek s barevn\u00fdm \u010dtvercem.\n    for (var i = 0; i &lt; grades.length; i++) {\n        div.innerHTML +=\n            '&lt;i style=\"background:' + getColor(grades[i] + 1) + '\"&gt;&lt;/i&gt; ' +\n            grades[i] + (grades[i + 1] ? '&amp;ndash;' + grades[i + 1] + '&lt;br&gt;' : '+');\n    }\n\n    return div;\n};\n\n// P\u0159id\u00e1n\u00ed legendy do mapy\nlegend.addTo(map);\n\n// Na\u010dten\u00ed GeoJSONu s polygony ORP do mapy\nvar ORPLayer = L.geoJSON(ORP,{\n    style: kartogram, \n    onEachFeature: onEachFeature\n}).addTo(map);\n\n// Na\u010dten\u00ed GeoJSONu s body ORP do mapy\nvar ORPPoints = L.geoJSON(ORP_body,{\n    pointToLayer: function (feature, latlng) {\n        // V\u00fdpis po\u010dtu obyvatel do prom\u011bnn\u00e9\n        var population = feature.properties.poc_obyv_SLDB_2021;\n\n        // \u00daprava velikosti symbolu - v\u00fdpo\u010det polom\u011bru\n        var radiusDiagram = Math.sqrt(population)/30;\n\n        return L.circleMarker(latlng, {\n            radius: radiusDiagram,  // Velikost symbolu v px\n            fillColor: \"#ff7800\", // Barva v\u00fdpln\u011b\n            color: \"#000\", // Barva ohrani\u010den\u00ed\n            weight: 1.5, // \u0160\u00ed\u0159ka ohrani\u010den\u00ed v px\n            fillOpacity: 0.8, // Pr\u016fhlednost v\u00fdpln\u011b\n            opacity: 1, // Pr\u016fhlednost ohrani\u010den\u00ed\n        }); // Vykreslen\u00ed kruhov\u00fdch symbol\u016f na sou\u0159adnic\u00edch bod\u016f\n    }\n});\n\n// Vytvo\u0159en\u00ed legendy a ur\u010den\u00ed jej\u00ed pozice\nvar diagramLegend = L.control({ position: 'bottomright' });\n\n// Nastaven\u00ed informac\u00ed vykreslen\u00fdch v legend\u011b\ndiagramLegend.onAdd = function (map) {\n    var div = L.DomUtil.create('div', 'info legend'),\n        populations = [10000, 50000, 100000, 500000, 1300000], // Rozsahy hodnot\n        labels = []; // Pr\u00e1zdn\u00e9 pole pro popisy, kter\u00e9 se vyp\u00ed\u0161\u00ed n\u00e1sledn\u011b\n\n    div.innerHTML += '&lt;h4&gt;Po\u010det obyvatel&lt;/h4&gt;'; // Nadpis legendy\n\n    for (var i = 0; i &lt; populations.length; i++) {\n        var radius = Math.sqrt(populations[i]) / 30; // V\u00fdpo\u010det polom\u011bru kruhu\n\n        // Vytvo\u0159en\u00ed popisu legendy - pro ka\u017ed\u00fd interval hodnot se vytvo\u0159\u00ed p\u0159\u00edslu\u0161n\u011b velk\u00e1 kru\u017enice s popisem\n        // Takto vytvo\u0159en\u00e9 kru\u017enice jsou se\u0159azen\u00e9 v legend\u011b pomoc\u00ed display:flex\n        // V legend\u011b mus\u00edme \n        labels.push(\n            `&lt;div style=\"display: flex; align-items: center; margin-bottom: 5px;\"&gt;\n                &lt;i style=\"\n                    background: #ff7800; \n                    width: ${radius * 2}px; \n                    height: ${radius * 2}px; \n                    border-radius: 50%;\n                    display: inline-block;\n                    margin-right: 10px;\n                    flex-shrink: 0;\n                    border: 1.5px solid black;\"&gt; &lt;!-- P\u0159id\u00e1no \u010dern\u00e9 ohrani\u010den\u00ed --&gt;\n                &lt;/i&gt; \n                &lt;span&gt;${populations[i].toLocaleString()} obyv.&lt;/span&gt;\n            &lt;/div&gt;`\n        );\n    }\n\n    div.innerHTML += labels.join(''); // Vlo\u017een\u00ed v\u0161ech popisk\u016f do legendy\n    return div;\n};\n\n// P\u0159id\u00e1n\u00ed legendy pro kartodiagramy do mapy\ndiagramLegend.addTo(map);\n\n// Vytvo\u0159en\u00ed diagramu pro v\u011bkov\u00e9 skupiny \nvar ageGroups = ORP_body.features.map(function(feature) {\n    return {\n        ...feature, // 3 te\u010dky zna\u010d\u00ed zkop\u00edrov\u00e1n\u00ed vlastnost\u00ed mezi objekty\n        pieData: d3.pie()([feature.properties.poc_obyv_0_14, feature.properties.poc_obyv_15_64, feature.properties.poc_obyv_nad_65])\n    };\n});\n\n// Vytvo\u0159en\u00ed graf\u016f v map\u011b\nfunction createPieCharts() {\n    const overlayPane = map.getPanes().overlayPane;\n\n    // Vykreslen\u00ed do SVG\n    const svg = d3.select(overlayPane).select('svg');\n\n    // Vykreslen\u00ed dat z prom\u011bnn\u00e9 ageGroups\n    const pies = svg.selectAll('g.pie-chart')\n        .data(ageGroups)\n        .enter()\n        .append('g')\n        .attr('opacity', 0.8)\n        .attr('class', 'pie-chart');\n\n    // Nastaven\u00ed velikosti grafu\n    const arcGenerate = d3.arc()\n        .innerRadius(0) // Vnit\u0159n\u00ed polom\u011br\n        .outerRadius(15); // Vn\u011bj\u0161\u00ed polom\u011br\n\n    // Pou\u017eit\u00e9 barvy v diagramu    \n    const getColor = (d, i) =&gt; {\n        const colors = ['blue', 'green', 'red'];\n        return colors[i];\n    };\n\n    // Generov\u00e1n\u00ed diagramu\n    pies.selectAll('path')\n        .data(d =&gt; d.pieData)\n        .enter()\n        .append('path')\n        .attr('d', arcGenerate)\n        .attr('fill', getColor)\n        .attr('stroke', 'white');\n}\n\n// Aktualizace pozice diagram\u016f p\u0159i posunu mapy\nfunction updatePieCharts() {\n    const overlayPane = map.getPanes().overlayPane;\n    const svg = d3.select(overlayPane).select('svg');\n\n    svg.selectAll('g.pie-chart')\n        .attr('transform', d =&gt; {\n            const point = map.latLngToLayerPoint([d.geometry.coordinates[1], d.geometry.coordinates[0]]);\n            return `translate(${point.x}, ${point.y})`;\n        });\n}\n\n// Vytvo\u0159en\u00ed diagram\u016f a prvotn\u00ed aktualizace (na\u010dten\u00ed)\ncreatePieCharts();\nupdatePieCharts(); // P\u0159i vynech\u00e1n\u00ed tohoto k\u00f3du by se diagramy na\u010detly a\u017e po posunu mapy nebo zoomu\n\n// Aktualizace pozice diagram\u016f p\u0159i posunu mapy nebo zoomov\u00e1n\u00ed\nmap.on('zoomend', updatePieCharts);\n\n// Funkce pro vykreslen\u00ed SVG vrstvy, kter\u00e1 obsahuje v\u0161echny diagramy\nmap.on('layeradd', function (event) {\n    if (event.layer === map) {\n        const overlayPane = map.getPanes().overlayPane;\n        overlayPane.append('svg')  // P\u0159id\u00e1n\u00ed SVG pro vykreslen\u00ed diagram\u016f\n            .attr('width', map.getSize().x)\n            .attr('height', map.getSize().y);\n    }\n});\n\n// Vytvo\u0159en\u00ed legendy pro pie chart\nvar pieChartLegend = L.control({ position: 'bottomright' });\n\npieChartLegend.onAdd = function (map) {\n    var div = L.DomUtil.create('div', 'info legend'),\n        ageGroups = ['0-14', '15-64', 'nad 65'], // Popisky pro v\u011bkov\u00e9 skupiny\n        colors = ['blue', 'green', 'red'], // Barvy pro jednotliv\u00e9 v\u011bkov\u00e9 skupiny\n        labels = [];\n\n    div.innerHTML += '&lt;h4&gt;V\u011bkov\u00e9 skupiny&lt;/h4&gt;'; // Nadpis legendy\n\n    // Vytvo\u0159en\u00ed popisk\u016f pro jednotliv\u00e9 v\u011bkov\u00e9 skupiny\n    for (var i = 0; i &lt; ageGroups.length; i++) {\n        labels.push(\n            `&lt;div style=\"display: flex; align-items: center; margin-bottom: 5px;\"&gt;\n                &lt;i style=\"\n                    background: ${colors[i]}; \n                    width: 20px; \n                    height: 20px; \n                    border-radius: 50%;\n                    display: inline-block;\n                    margin-right: 10px;\n                    flex-shrink: 0;\"&gt;\n                &lt;/i&gt; \n                &lt;span&gt;${ageGroups[i]}&lt;/span&gt;\n            &lt;/div&gt;`\n        );\n    }\n\n    div.innerHTML += labels.join(''); // Vlo\u017een\u00ed v\u0161ech popisk\u016f do legendy\n    return div;\n};\n\n// P\u0159id\u00e1n\u00ed legendy pro pie chart do mapy\npieChartLegend.addTo(map);\n\n// Prom\u011bnn\u00e1 uchov\u00e1vaj\u00edc\u00ed podkladov\u00e9 mapy, mezi kter\u00fdmi chceme p\u0159ep\u00ednat\nvar baseMaps = {\n    \"OpenStreetMap\": osm, // \"popis mapy\": nazevPromenne\n    \"OpenTopoMap\": otm,\n    \"Ortofoto \u010cR\": ortofoto\n};\n\n// Prom\u011bnn\u00e1 uchov\u00e1vaj\u00edc\u00ed mapov\u00e9 vrstvy, kter\u00e9 chceme zobrazovat a skr\u00fdvat\nvar overlayMaps = {\n    \"Body ORP\": ORPPoints,\n    \"Hustota obyvatelstva\": ORPLayer\n};\n\n// Grafick\u00e9 p\u0159ep\u00edn\u00e1n\u00ed podkladov\u00fdch map\nvar layerControl = L.control.layers(baseMaps, overlayMaps, {collapsed: false}).addTo(map);\n</code></pre> <pre><code>// Ur\u010den\u00ed velikosti grafu a jeho okraj\u016f\nconst width = 640;\nconst height = 400;\nconst marginTop = 20;\nconst marginRight = 20;\nconst marginBottom = 30;\nconst marginLeft = 40;\n\n// Definice osy x\nconst x = d3.scaleUtc()\n    .domain([new Date(\"2023-01-01\"), new Date(\"2024-01-01\")]) // Hodnoty na ose x\n    .range([marginLeft, width - marginRight]); // \u0160\u00ed\u0159ka osy p\u0159i vykreslen\u00ed grafu\n\n// Definice osy y\nconst y = d3.scaleLinear()\n    .domain([0, 100]) // Hodnoty na ose y\n    .range([height - marginBottom, marginTop]); // V\u00fd\u0161ka osy p\u0159i vykreslen\u00ed grafu\n\n// Vytvo\u0159en\u00ed SVG, do kter\u00e9ho se graf vykresl\u00ed\nconst svg = d3.create(\"svg\")\n    .attr(\"width\", width)\n    .attr(\"height\", height);\n\n// P\u0159id\u00e1n\u00ed osy x do grafu (= vykreslen\u00ed do SVG)\nsvg.append(\"g\")\n    .attr(\"transform\", `translate(0,${height - marginBottom})`)\n    .call(d3.axisBottom(x));\n\n// P\u0159id\u00e1n\u00ed osy y do grafu (= vykreslen\u00ed do SVG)\nsvg.append(\"g\")\n    .attr(\"transform\", `translate(${marginLeft},0)`)\n    .call(d3.axisLeft(y));\n\n// P\u0159ipojen\u00ed prvu SVG (= vykreslen\u00ed ve webov\u00e9 str\u00e1nce)\ncontainerChart.append(svg.node());\n</code></pre> <pre><code>/* Rozd\u011blen\u00ed str\u00e1nky */\n#container {\n    display: flex;\n    width: 100%;\n}\n\n\n/* Velikost mapov\u00e9ho okna */\n#map {\n    height: 800px;\n    width: 60%;\n}\n\n/* Velikost divu pro graf a jeho vycentrov\u00e1n\u00ed */\n#containerChart {\n    width: 40%;\n    justify-content: center;\n    align-items: center;\n    display: flex;\n}\n\n/* Div t\u0159\u00eddy info */\n.info {\n    padding: 6px 8px;\n    font: 14px/16px Arial, Helvetica, sans-serif;\n    background: white;\n    background: rgba(255,255,255,0.8);\n    box-shadow: 0 0 15px rgba(0,0,0,0.2);\n    border-radius: 5px;\n}\n\n/* Nadpis v divu info */\n.info h4 {\n    margin: 0 0 5px;\n    color: #777;\n}\n\n/* \u00daprava stylu legendy*/\n.legend {\n    line-height: 18px;\n    color: #555;\n}\n\n/* Zobrazen\u00ed \u010dtverc\u016f s barvou stylu ka\u017ed\u00e9ho atributu */\n.legend i {\n    width: 18px;\n    height: 18px;\n    float: left;\n    margin-right: 8px;\n    opacity: 0.7;\n}\n</code></pre>"},{"location":"cviceni/cviceni6/#propojeni-grafu-a-mapy","title":"Propojen\u00ed grafu a mapy","text":"<p>V t\u00e9to \u010d\u00e1sti si uk\u00e1\u017eeme, jak propojit mapu s\u00a0grafem tak, abychom do grafu interaktivn\u011b vykreslovali hodnoty na z\u00e1klad\u011b v\u00fdb\u011bru v\u00a0map\u011b. Tedy nap\u0159\u00edklad hodnoty pro vybran\u00fd polygon ORP. </p> <p>Voliteln\u00fd dom\u00e1c\u00ed \u00fakol - \u0159e\u0161en\u00ed n\u00ed\u017ee</p> <p>Do p\u0159\u00ed\u0161t\u00edho cvi\u010den\u00ed do k\u00f3du zapracujte propojen\u00ed mapy s grafem v prav\u00e9 \u010d\u00e1sti str\u00e1nky.</p> <p>V\u00fdsledkem bude:</p> <ul> <li> <p>sloupcov\u00fd graf zobrazuj\u00edc\u00ed v\u00fdvoj z\u00e1stavby na dan\u00e9m ORP v pr\u016fb\u011bhu let</p> </li> <li> <p>vyu\u017eijte atributy <code>vystavba_pred1919</code>, <code>vystavba_1920_1945</code>, <code>vystavba_1946_1970</code>, <code>vystavba_1971_1980</code>, <code>vystavba_1981_1990</code>, <code>vystavba_1991_2000</code>, <code>vystavba_2001_2010</code>, <code>vystavba_2011_2015</code> a <code>vystavba_po2016</code>, kter\u00e9 obsahuje polygonov\u00e1 vrstva ORP.</p> </li> <li> <p>graf vhodn\u011b popi\u0161te, p\u0159izp\u016fsobte mu osy a barvy</p> </li> </ul> <p>Po v\u00fdb\u011bru polygonu ORP my\u0161\u00ed v map\u011b se v grafu vykresl\u00ed \u00fadaje o v\u00fdstavb\u011b v pr\u016fb\u011bhu let pro vybran\u00e9 ORP.</p> <p>Budeme vych\u00e1zet z drobn\u011b upraven\u00e9ho k\u00f3du ze za\u010d\u00e1tku cvi\u010den\u00ed p\u0159ed tvorbou kartodiagram\u016f. Vyu\u017eijeme polygonov\u00e1 data ORP.</p> P\u0159ipraven\u00fd k\u00f3d (bez soubor\u016f na\u010d\u00edtan\u00fdch dat ORP) index.htmlscript.jsscript-chart.jsstyle.css <pre><code>&lt;!DOCTYPE html&gt; \n&lt;html&gt; \n&lt;head&gt; \n    &lt;meta charset=\"UTF-8\"&gt; \n    &lt;meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"&gt;\n    &lt;link rel=\"stylesheet\" href=\"style.css\"&gt;\n\n    &lt;!-- Na\u010dten\u00ed souboru s body ORP GeoJSON--&gt;\n    &lt;script src=\"ORP_body_GeoJSON.js\"&gt;&lt;/script&gt;\n\n    &lt;!-- Na\u010dten\u00ed souboru s ORP GeoJSON--&gt;\n    &lt;script src=\"ORP_GeoJSON.js\"&gt;&lt;/script&gt;\n\n    &lt;!-- Extern\u00ed p\u0159ipojen\u00ed CSS symbologie Leaflet--&gt;\n    &lt;link rel=\"stylesheet\" href=\"https://unpkg.com/leaflet@1.9.4/dist/leaflet.css\"\n    integrity=\"sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=\"\n    crossorigin=\"\"/&gt;\n\n    &lt;!-- Extern\u00ed p\u0159ipojen\u00ed JS knihovny -&gt; vlo\u017eit a\u017e po p\u0159ipojen\u00ed CSS souboru --&gt;\n    &lt;script src=\"https://unpkg.com/leaflet@1.9.4/dist/leaflet.js\"\n    integrity=\"sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=\"\n    crossorigin=\"\"&gt;&lt;/script&gt;\n\n    &lt;!-- P\u0159ipojen\u00ed D3.js --&gt;\n    &lt;script src=\"https://cdn.jsdelivr.net/npm/d3@7\"&gt;&lt;/script&gt;\n\n    &lt;title&gt;Moje druh\u00e1 Leaflet mapa&lt;/title&gt; \n&lt;/head&gt;\n&lt;body&gt; \n\n    &lt;h1&gt;Propojen\u00ed knihovny Leaflet s D3.js&lt;/h1&gt; \n\n    &lt;!-- Rozd\u011blen\u00ed str\u00e1nky na mapu a graf, pom\u011br je nastaven\u00fd pomoc\u00ed CSS --&gt;\n    &lt;div id=\"container\"&gt;\n        &lt;div id=\"map\"&gt;&lt;/div&gt;\n        &lt;div id=\"containerChart\"&gt;&lt;/div&gt;\n    &lt;/div&gt;\n\n    &lt;!-- Na\u010dten\u00ed skript\u016f ovl\u00e1daj\u00edc\u00ed mapu --&gt;\n    &lt;script src=\"script.js\"&gt;&lt;/script&gt;\n\n    &lt;!-- Na\u010dten\u00ed skript\u016f ovl\u00e1daj\u00edc\u00ed graf --&gt;\n    &lt;script type=\"module\" src=\"script-chart.js\"&gt;&lt;/script&gt;\n\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre> <pre><code>// Nastaven\u00ed mapy, jej\u00edho st\u0159edu a \u00farovn\u011b p\u0159ibl\u00ed\u017een\u00ed\nvar map = L.map('map').setView([49.860, 15.315], 8); // V\u00fdb\u011br bodu zhruba uprost\u0159ed republiky\n\n// Ur\u010den\u00ed podkladov\u00e9 mapy, maxim\u00e1ln\u00ed \u00farovn\u011b p\u0159ibl\u00ed\u017een\u00ed a zdroje dat\nvar osm = L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {\n    maxZoom: 19,\n    attribution: '&amp;copy; &lt;a href=\"http://www.openstreetmap.org/copyright\"&gt;OpenStreetMap&lt;/a&gt;'\n}).addTo(map);\n\n// Definice podkladov\u00e9 OpenTopoMap\nvar otm = L.tileLayer('https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png', {\n    maxZoom: 17,\n    attribution: 'Map data: &amp;copy; &lt;a href=\"https://www.openstreetmap.org/copyright\"&gt;OpenStreetMap&lt;/a&gt; contributors, &lt;a href=\"http://viewfinderpanoramas.org\"&gt;SRTM&lt;/a&gt; | Map style: &amp;copy; &lt;a href=\"https://opentopomap.org\"&gt;OpenTopoMap&lt;/a&gt; (&lt;a href=\"https://creativecommons.org/licenses/by-sa/3.0/\"&gt;CC-BY-SA&lt;/a&gt;)'\n});\n\n// P\u0159id\u00e1n\u00ed ortofota jako WMS slu\u017eby, ur\u010den\u00ed vrstvy, form\u00e1tu a pr\u016fhlednosti\nvar ortofoto = L.tileLayer.wms(\"https://ags.cuzk.gov.cz/arcgis1/services/ORTOFOTO/MapServer/WMSServer\", {\n    layers: \"0\", \n    format: \"image/png\",\n    transparent: true,\n    attribution: \"&amp;copy \u010c\u00daZK\"\n});\n\n// V\u00fdpo\u010det nov\u00e9ho atributu pro ka\u017ed\u00fd prvek ORP \n// (hustota obyvatelstva = po\u010det obyvatel / plocha), p\u0159evod z m2 na km2 -&gt; vyn\u00e1soben\u00ed 1 000 000\nORP.features.forEach(function(feature){\n    if(feature.properties.Shape_Area &amp;&amp; feature.properties.poc_obyv_SLDB_2021){\n        feature.properties.hustota = (feature.properties.poc_obyv_SLDB_2021/feature.properties.Shape_Area)*1000000\n    }else{\n        feature.properties.hustota = 0\n    }\n})\n\n// Vytvo\u0159en\u00ed barevn\u00e9 stupnice\nfunction getColor(d) {\nreturn d &gt; 1000 ? '#800026' :\n        d &gt; 500  ? '#BD0026' :\n        d &gt; 200  ? '#E31A1C' :\n        d &gt; 100  ? '#FC4E2A' :\n        d &gt; 50   ? '#FD8D3C' :\n        d &gt; 20   ? '#FEB24C' :\n                    '#FFEDA0'; // V\u00fdchoz\u00ed barva\n}\n\n// Styl kartogramu\nfunction kartogram(feature) {\nreturn {\n    fillColor: getColor(feature.properties.hustota), // Styl na z\u00e1klad\u011b atributu \"hustota\"\n    weight: 1,\n    opacity: 1,\n    color: 'white',\n    fillOpacity: 0.7\n};\n}\n\n// V\u00fdb\u011br prvku po najet\u00ed kurzorem my\u0161i\nfunction highlightFeature(e) {\n    var layer = e.target;\n\n    // \u00daprava stylu vybran\u00e9ho prvku = jeho zv\u00fdrazn\u011bn\u00ed\n    layer.setStyle({\n        weight: 5,\n        color: '#666',\n        dashArray: '',\n        fillOpacity: 0.7\n    });\n\n    layer.bringToFront();\n    info.update(layer.feature.properties); // Aktualizace info pop-upu p\u0159i v\u00fdb\u011bru prvku\n}\n\n// P\u0159ibl\u00ed\u017een\u00ed na vybran\u00fd polygon po kliknut\u00ed my\u0161\u00ed\nfunction zoomToFeature(e) {\n    map.fitBounds(e.target.getBounds());\n}\n\n// Resetov\u00e1n\u00ed stylu kartogramu po zru\u0161en\u00ed jeho v\u00fdb\u011bru my\u0161\u00ed\nfunction resetHighlight(e) {\n    ORPLayer.resetStyle(e.target);\n    info.update(); // Aktualizace info pop-upu p\u0159i v\u00fdb\u011bru prvku\n}\n\n// P\u0159\u00edstup k jednotliv\u00fdm polygon\u016f ve vrstv\u011b\nfunction onEachFeature(feature, layer) {\n    layer.on({\n        mouseover: highlightFeature,\n        mouseout: resetHighlight,\n        click: zoomToFeature\n    });\n}\n\n// Vytvo\u0159en\u00ed pop-upu s informacemi o vybran\u00e9m prvku v map\u011b\nvar info = L.control();\n\ninfo.onAdd = function (map) {\n    this._div = L.DomUtil.create('div', 'info'); // Vytvo\u0159\u00ed div s t\u0159\u00eddou \"info\"\n    this.update();\n    return this._div;\n};\n\n// Funkce pro aktualizaci po-upu na z\u00e1klad\u011b p\u0159edan\u00fdch vlastnost\u00ed prvku\ninfo.update = function (props) {\n    this._div.innerHTML = '&lt;h4&gt;Hustota obyvatel&lt;/h4&gt;' +  (props ?\n        '&lt;b&gt;' + props.nazev + '&lt;/b&gt;&lt;br /&gt;' + props.hustota.toFixed(2) + ' obyv. / km&lt;sup&gt;2&lt;/sup&gt;'\n        : 'Vyber ORP'); // V\u00fdpis, pokud nen\u00ed vybran\u00fd prvek\n};\n\n// Vlo\u017een\u00ed info pop-upu do mapy\ninfo.addTo(map); \n\n// Vytvo\u0159en\u00ed legendy a nastaven\u00ed jej\u00ed pozice\nvar legend = L.control({position: 'bottomright'});\n\nlegend.onAdd = function (map) {\n\n    var div = L.DomUtil.create('div', 'info legend'),\n        grades = [0, 20, 50, 100, 200, 500, 1000], // Hranice interval\u016f - stejn\u00e9 jako v nastaven\u00ed stylu kartogramu\n        labels = [];\n\n    div.innerHTML += '&lt;h4&gt;Hustota obyvatel&lt;/h4&gt;' + 'obyv. / km&lt;sup&gt;2&lt;/sup&gt;&lt;br /&gt;'; // Nadpis legendy\n\n    // Proch\u00e1zen\u00ed interval\u016f hustoty - pro ka\u017ed\u00fd interval se vygeneruje \u0161t\u00edtek s barevn\u00fdm \u010dtvercem.\n    for (var i = 0; i &lt; grades.length; i++) {\n        div.innerHTML +=\n            '&lt;i style=\"background:' + getColor(grades[i] + 1) + '\"&gt;&lt;/i&gt; ' +\n            grades[i] + (grades[i + 1] ? '&amp;ndash;' + grades[i + 1] + '&lt;br&gt;' : '+');\n    }\n\n    return div;\n};\n\n// P\u0159id\u00e1n\u00ed legendy do mapy\nlegend.addTo(map);\n\n// Na\u010dten\u00ed GeoJSONu s polygony ORP do mapy\nvar ORPLayer = L.geoJSON(ORP,{\n    style: kartogram, \n    onEachFeature: onEachFeature\n}).addTo(map);\n\n// Prom\u011bnn\u00e1 uchov\u00e1vaj\u00edc\u00ed podkladov\u00e9 mapy, mezi kter\u00fdmi chceme p\u0159ep\u00ednat\nvar baseMaps = {\n    \"OpenStreetMap\": osm, // \"popis mapy\": nazevPromenne\n    \"OpenTopoMap\": otm,\n    \"Ortofoto \u010cR\": ortofoto\n};\n\n// Prom\u011bnn\u00e1 uchov\u00e1vaj\u00edc\u00ed mapov\u00e9 vrstvy, kter\u00e9 chceme zobrazovat a skr\u00fdvat\nvar overlayMaps = {\n    \"Hustota obyvatelstva\": ORPLayer\n};\n\n// Grafick\u00e9 p\u0159ep\u00edn\u00e1n\u00ed podkladov\u00fdch map\nvar layerControl = L.control.layers(baseMaps, overlayMaps, {collapsed: false}).addTo(map);\n</code></pre> <pre><code>// Ur\u010den\u00ed velikosti grafu a jeho okraj\u016f\nconst width = 800;\nconst height = 450;\nconst marginTop = 50;\nconst marginRight = 20;\nconst marginBottom = 40;\nconst marginLeft = 40;\n\n// Definice osy x\nconst x = d3.scaleUtc()\n    .domain([new Date(\"2023-01-01\"), new Date(\"2024-01-01\")]) // Hodnoty na ose x\n    .range([marginLeft, width - marginRight]); // \u0160\u00ed\u0159ka osy p\u0159i vykreslen\u00ed grafu\n\n// Definice osy y\nconst y = d3.scaleLinear()\n    .domain([0, 100]) // Hodnoty na ose y\n    .range([height - marginBottom, marginTop]); // V\u00fd\u0161ka osy p\u0159i vykreslen\u00ed grafu\n\n// Vytvo\u0159en\u00ed SVG, do kter\u00e9ho se graf vykresl\u00ed\nconst svg = d3.create(\"svg\")\n    .attr(\"width\", width)\n    .attr(\"height\", height);\n\n// P\u0159id\u00e1n\u00ed osy x do grafu (= vykreslen\u00ed do SVG)\nsvg.append(\"g\")\n    .attr(\"transform\", `translate(0,${height - marginBottom})`)\n    .call(d3.axisBottom(x));\n\n// P\u0159id\u00e1n\u00ed osy y do grafu (= vykreslen\u00ed do SVG)\nsvg.append(\"g\")\n    .attr(\"transform\", `translate(${marginLeft},0)`)\n    .call(d3.axisLeft(y));\n\n// P\u0159ipojen\u00ed prvu SVG (= vykreslen\u00ed ve webov\u00e9 str\u00e1nce)\ncontainerChart.append(svg.node());\n</code></pre> <pre><code>/* Rozd\u011blen\u00ed str\u00e1nky */\n#container {\n    display: flex;\n    width: 100%;\n}\n\n\n/* Velikost mapov\u00e9ho okna */\n#map {\n    height: 800px;\n    width: 60%;\n}\n\n/* Velikost divu pro graf a jeho vycentrov\u00e1n\u00ed */\n#containerChart {\n    width: 40%;\n    justify-content: center;\n    align-items: center;\n    display: flex;\n}\n\n/* Div t\u0159\u00eddy info */\n.info {\n    padding: 6px 8px;\n    font: 14px/16px Arial, Helvetica, sans-serif;\n    background: white;\n    background: rgba(255,255,255,0.8);\n    box-shadow: 0 0 15px rgba(0,0,0,0.2);\n    border-radius: 5px;\n}\n\n/* Nadpis v divu info */\n.info h4 {\n    margin: 0 0 5px;\n    color: #777;\n}\n\n/* \u00daprava stylu legendy*/\n.legend {\n    line-height: 18px;\n    color: #555;\n}\n\n/* Zobrazen\u00ed \u010dtverc\u016f s barvou stylu ka\u017ed\u00e9ho atributu */\n.legend i {\n    width: 18px;\n    height: 18px;\n    float: left;\n    margin-right: 8px;\n    opacity: 0.7;\n}\n</code></pre>"},{"location":"cviceni/cviceni6/#1-cteni-dat-z-mapy","title":"1) \u010cten\u00ed dat z mapy","text":"<p>Nejprve je nutn\u00e9 zajistit \u010dten\u00ed vybran\u00fdch dat z mapy. To nastav\u00edme uvnit\u0159 funkce <code>onEachFeature</code>. </p> <p>Do n\u00ed p\u0159id\u00e1me vol\u00e1n\u00ed funkce <code>updateChart</code>, jej\u00ed\u017e \u00fakolem je vykreslit nebo aktualizovat graf podle atribut\u016f prvku, na kter\u00fd u\u017eivatel klikne my\u0161\u00ed (v\u00a0na\u0161em p\u0159\u00edpad\u011b polygony ORP). </p> <p>Pro \u00fa\u010dely testov\u00e1n\u00ed si do konzole vyp\u00ed\u0161eme p\u0159ed\u00e1van\u00e9 atributy.</p> script.js <pre><code>// P\u0159\u00edstup k jednotliv\u00fdm polygon\u016f ve vrstv\u011b\nfunction onEachFeature(feature, layer) {\n    layer.on({\n        mouseover: highlightFeature,\n        mouseout: resetHighlight,\n        click: function(e) {\n            // zoomToFeature(e); // P\u0159ibli\u017eov\u00e1n\u00ed na prvek m\u016f\u017eeme nyn\u00ed vypnout\n            console.table(feature.properties); // V\u00fdpis atribut\u016f vybran\u00e9ho prvku do konzole\n            updateChart(feature.properties); // Propojen\u00ed s grafem\n        }\n    });\n}\n</code></pre> <p>Po otev\u0159en\u00ed konzole (tla\u010d\u00edtko F12) m\u016f\u017eeme sledovat vypisov\u00e1n\u00ed p\u0159ed\u00e1van\u00fdch atribut\u016f. </p> <p>Vzhledem k tomu, \u017ee funkce <code>updateChart</code> nen\u00ed definovan\u00e1 a p\u0159esto ji vol\u00e1me, vypisuje konzole chybovou hl\u00e1\u0161ku. Definici t\u00e9to funkce provedeme n\u00e1sledn\u011b ve skriptu s grafem <code>script-chart.js</code>.</p> <p> V\u00fdpis atribut\u016f vybran\u00e9ho prvku do konzole</p> Stav k\u00f3du po dokon\u010den\u00ed kroku 1) \u010cten\u00ed dat z mapy index.html \u2013 beze zm\u011bnyscript.jsscript-chart.js \u2013 beze zm\u011bnystyle.css \u2013 beze zm\u011bny <pre><code>&lt;!DOCTYPE html&gt; \n&lt;html&gt; \n&lt;head&gt; \n    &lt;meta charset=\"UTF-8\"&gt; \n    &lt;meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"&gt;\n    &lt;link rel=\"stylesheet\" href=\"style.css\"&gt;\n\n    &lt;!-- Na\u010dten\u00ed souboru s body ORP GeoJSON--&gt;\n    &lt;script src=\"ORP_body_GeoJSON.js\"&gt;&lt;/script&gt;\n\n    &lt;!-- Na\u010dten\u00ed souboru s ORP GeoJSON--&gt;\n    &lt;script src=\"ORP_GeoJSON.js\"&gt;&lt;/script&gt;\n\n    &lt;!-- Extern\u00ed p\u0159ipojen\u00ed CSS symbologie Leaflet--&gt;\n    &lt;link rel=\"stylesheet\" href=\"https://unpkg.com/leaflet@1.9.4/dist/leaflet.css\"\n    integrity=\"sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=\"\n    crossorigin=\"\"/&gt;\n\n    &lt;!-- Extern\u00ed p\u0159ipojen\u00ed JS knihovny -&gt; vlo\u017eit a\u017e po p\u0159ipojen\u00ed CSS souboru --&gt;\n    &lt;script src=\"https://unpkg.com/leaflet@1.9.4/dist/leaflet.js\"\n    integrity=\"sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=\"\n    crossorigin=\"\"&gt;&lt;/script&gt;\n\n    &lt;!-- P\u0159ipojen\u00ed D3.js --&gt;\n    &lt;script src=\"https://cdn.jsdelivr.net/npm/d3@7\"&gt;&lt;/script&gt;\n\n    &lt;title&gt;Moje druh\u00e1 Leaflet mapa&lt;/title&gt; \n&lt;/head&gt;\n&lt;body&gt; \n\n    &lt;h1&gt;Propojen\u00ed knihovny Leaflet s D3.js&lt;/h1&gt; \n\n    &lt;!-- Rozd\u011blen\u00ed str\u00e1nky na mapu a graf, pom\u011br je nastaven\u00fd pomoc\u00ed CSS --&gt;\n    &lt;div id=\"container\"&gt;\n        &lt;div id=\"map\"&gt;&lt;/div&gt;\n        &lt;div id=\"containerChart\"&gt;&lt;/div&gt;\n    &lt;/div&gt;\n\n    &lt;!-- Na\u010dten\u00ed skript\u016f ovl\u00e1daj\u00edc\u00ed mapu --&gt;\n    &lt;script src=\"script.js\"&gt;&lt;/script&gt;\n\n    &lt;!-- Na\u010dten\u00ed skript\u016f ovl\u00e1daj\u00edc\u00ed graf --&gt;\n    &lt;script type=\"module\" src=\"script-chart.js\"&gt;&lt;/script&gt;\n\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre> <pre><code>// Nastaven\u00ed mapy, jej\u00edho st\u0159edu a \u00farovn\u011b p\u0159ibl\u00ed\u017een\u00ed\nvar map = L.map('map').setView([49.860, 15.315], 8); // V\u00fdb\u011br bodu zhruba uprost\u0159ed republiky\n\n// Ur\u010den\u00ed podkladov\u00e9 mapy, maxim\u00e1ln\u00ed \u00farovn\u011b p\u0159ibl\u00ed\u017een\u00ed a zdroje dat\nvar osm = L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {\n    maxZoom: 19,\n    attribution: '&amp;copy; &lt;a href=\"http://www.openstreetmap.org/copyright\"&gt;OpenStreetMap&lt;/a&gt;'\n}).addTo(map);\n\n// Definice podkladov\u00e9 OpenTopoMap\nvar otm = L.tileLayer('https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png', {\n    maxZoom: 17,\n    attribution: 'Map data: &amp;copy; &lt;a href=\"https://www.openstreetmap.org/copyright\"&gt;OpenStreetMap&lt;/a&gt; contributors, &lt;a href=\"http://viewfinderpanoramas.org\"&gt;SRTM&lt;/a&gt; | Map style: &amp;copy; &lt;a href=\"https://opentopomap.org\"&gt;OpenTopoMap&lt;/a&gt; (&lt;a href=\"https://creativecommons.org/licenses/by-sa/3.0/\"&gt;CC-BY-SA&lt;/a&gt;)'\n});\n\n// P\u0159id\u00e1n\u00ed ortofota jako WMS slu\u017eby, ur\u010den\u00ed vrstvy, form\u00e1tu a pr\u016fhlednosti\nvar ortofoto = L.tileLayer.wms(\"https://ags.cuzk.gov.cz/arcgis1/services/ORTOFOTO/MapServer/WMSServer\", {\n    layers: \"0\", \n    format: \"image/png\",\n    transparent: true,\n    attribution: \"&amp;copy \u010c\u00daZK\"\n});\n\n// V\u00fdpo\u010det nov\u00e9ho atributu pro ka\u017ed\u00fd prvek ORP \n// (hustota obyvatelstva = po\u010det obyvatel / plocha), p\u0159evod z m2 na km2 -&gt; vyn\u00e1soben\u00ed 1 000 000\nORP.features.forEach(function(feature){\n    if(feature.properties.Shape_Area &amp;&amp; feature.properties.poc_obyv_SLDB_2021){\n        feature.properties.hustota = (feature.properties.poc_obyv_SLDB_2021/feature.properties.Shape_Area)*1000000\n    }else{\n        feature.properties.hustota = 0\n    }\n})\n\n// Vytvo\u0159en\u00ed barevn\u00e9 stupnice\nfunction getColor(d) {\nreturn d &gt; 1000 ? '#800026' :\n        d &gt; 500  ? '#BD0026' :\n        d &gt; 200  ? '#E31A1C' :\n        d &gt; 100  ? '#FC4E2A' :\n        d &gt; 50   ? '#FD8D3C' :\n        d &gt; 20   ? '#FEB24C' :\n                    '#FFEDA0'; // V\u00fdchoz\u00ed barva\n}\n\n// Styl kartogramu\nfunction kartogram(feature) {\nreturn {\n    fillColor: getColor(feature.properties.hustota), // Styl na z\u00e1klad\u011b atributu \"hustota\"\n    weight: 1,\n    opacity: 1,\n    color: 'white',\n    fillOpacity: 0.7\n};\n}\n\n// V\u00fdb\u011br prvku po najet\u00ed kurzorem my\u0161i\nfunction highlightFeature(e) {\n    var layer = e.target;\n\n    // \u00daprava stylu vybran\u00e9ho prvku = jeho zv\u00fdrazn\u011bn\u00ed\n    layer.setStyle({\n        weight: 5,\n        color: '#666',\n        dashArray: '',\n        fillOpacity: 0.7\n    });\n\n    layer.bringToFront();\n    info.update(layer.feature.properties); // Aktualizace info pop-upu p\u0159i v\u00fdb\u011bru prvku\n}\n\n// P\u0159ibl\u00ed\u017een\u00ed na vybran\u00fd polygon po kliknut\u00ed my\u0161\u00ed\nfunction zoomToFeature(e) {\n    map.fitBounds(e.target.getBounds());\n}\n\n// Resetov\u00e1n\u00ed stylu kartogramu po zru\u0161en\u00ed jeho v\u00fdb\u011bru my\u0161\u00ed\nfunction resetHighlight(e) {\n    ORPLayer.resetStyle(e.target);\n    info.update(); // Aktualizace info pop-upu p\u0159i v\u00fdb\u011bru prvku\n}\n\n// P\u0159\u00edstup k jednotliv\u00fdm polygon\u016f ve vrstv\u011b\nfunction onEachFeature(feature, layer) {\n    layer.on({\n        mouseover: highlightFeature,\n        mouseout: resetHighlight,\n        click: function(e) {\n            // zoomToFeature(e); // P\u0159ibli\u017eov\u00e1n\u00ed na prvek m\u016f\u017eeme nyn\u00ed vypnout\n            console.table(feature.properties); // V\u00fdpis atribut\u016f vybran\u00e9ho prvku do konzole\n            updateChart(feature.properties); // Propojen\u00ed s grafem\n        }\n    });\n}\n\n// Vytvo\u0159en\u00ed pop-upu s informacemi o vybran\u00e9m prvku v map\u011b\nvar info = L.control();\n\ninfo.onAdd = function (map) {\n    this._div = L.DomUtil.create('div', 'info'); // Vytvo\u0159\u00ed div s t\u0159\u00eddou \"info\"\n    this.update();\n    return this._div;\n};\n\n// Funkce pro aktualizaci po-upu na z\u00e1klad\u011b p\u0159edan\u00fdch vlastnost\u00ed prvku\ninfo.update = function (props) {\n    this._div.innerHTML = '&lt;h4&gt;Hustota obyvatel&lt;/h4&gt;' +  (props ?\n        '&lt;b&gt;' + props.nazev + '&lt;/b&gt;&lt;br /&gt;' + props.hustota.toFixed(2) + ' obyv. / km&lt;sup&gt;2&lt;/sup&gt;'\n        : 'Vyber ORP'); // V\u00fdpis, pokud nen\u00ed vybran\u00fd prvek\n};\n\n// Vlo\u017een\u00ed info pop-upu do mapy\ninfo.addTo(map); \n\n// Vytvo\u0159en\u00ed legendy a nastaven\u00ed jej\u00ed pozice\nvar legend = L.control({position: 'bottomright'});\n\nlegend.onAdd = function (map) {\n\n    var div = L.DomUtil.create('div', 'info legend'),\n        grades = [0, 20, 50, 100, 200, 500, 1000], // Hranice interval\u016f - stejn\u00e9 jako v nastaven\u00ed stylu kartogramu\n        labels = [];\n\n    div.innerHTML += '&lt;h4&gt;Hustota obyvatel&lt;/h4&gt;' + 'obyv. / km&lt;sup&gt;2&lt;/sup&gt;&lt;br /&gt;'; // Nadpis legendy\n\n    // Proch\u00e1zen\u00ed interval\u016f hustoty - pro ka\u017ed\u00fd interval se vygeneruje \u0161t\u00edtek s barevn\u00fdm \u010dtvercem.\n    for (var i = 0; i &lt; grades.length; i++) {\n        div.innerHTML +=\n            '&lt;i style=\"background:' + getColor(grades[i] + 1) + '\"&gt;&lt;/i&gt; ' +\n            grades[i] + (grades[i + 1] ? '&amp;ndash;' + grades[i + 1] + '&lt;br&gt;' : '+');\n    }\n\n    return div;\n};\n\n// P\u0159id\u00e1n\u00ed legendy do mapy\nlegend.addTo(map);\n\n// Na\u010dten\u00ed GeoJSONu s polygony ORP do mapy\nvar ORPLayer = L.geoJSON(ORP,{\n    style: kartogram, \n    onEachFeature: onEachFeature\n}).addTo(map);\n\n// Prom\u011bnn\u00e1 uchov\u00e1vaj\u00edc\u00ed podkladov\u00e9 mapy, mezi kter\u00fdmi chceme p\u0159ep\u00ednat\nvar baseMaps = {\n    \"OpenStreetMap\": osm, // \"popis mapy\": nazevPromenne\n    \"OpenTopoMap\": otm,\n    \"Ortofoto \u010cR\": ortofoto\n};\n\n// Prom\u011bnn\u00e1 uchov\u00e1vaj\u00edc\u00ed mapov\u00e9 vrstvy, kter\u00e9 chceme zobrazovat a skr\u00fdvat\nvar overlayMaps = {\n    \"Hustota obyvatelstva\": ORPLayer\n};\n\n// Grafick\u00e9 p\u0159ep\u00edn\u00e1n\u00ed podkladov\u00fdch map\nvar layerControl = L.control.layers(baseMaps, overlayMaps, {collapsed: false}).addTo(map);\n</code></pre> <pre><code>// Ur\u010den\u00ed velikosti grafu a jeho okraj\u016f\nconst width = 800;\nconst height = 450;\nconst marginTop = 50;\nconst marginRight = 20;\nconst marginBottom = 40;\nconst marginLeft = 40;\n\n// Definice osy x\nconst x = d3.scaleUtc()\n    .domain([new Date(\"2023-01-01\"), new Date(\"2024-01-01\")]) // Hodnoty na ose x\n    .range([marginLeft, width - marginRight]); // \u0160\u00ed\u0159ka osy p\u0159i vykreslen\u00ed grafu\n\n// Definice osy y\nconst y = d3.scaleLinear()\n    .domain([0, 100]) // Hodnoty na ose y\n    .range([height - marginBottom, marginTop]); // V\u00fd\u0161ka osy p\u0159i vykreslen\u00ed grafu\n\n// Vytvo\u0159en\u00ed SVG, do kter\u00e9ho se graf vykresl\u00ed\nconst svg = d3.create(\"svg\")\n    .attr(\"width\", width)\n    .attr(\"height\", height);\n\n// P\u0159id\u00e1n\u00ed osy x do grafu (= vykreslen\u00ed do SVG)\nsvg.append(\"g\")\n    .attr(\"transform\", `translate(0,${height - marginBottom})`)\n    .call(d3.axisBottom(x));\n\n// P\u0159id\u00e1n\u00ed osy y do grafu (= vykreslen\u00ed do SVG)\nsvg.append(\"g\")\n    .attr(\"transform\", `translate(${marginLeft},0)`)\n    .call(d3.axisLeft(y));\n\n// P\u0159ipojen\u00ed prvu SVG (= vykreslen\u00ed ve webov\u00e9 str\u00e1nce)\ncontainerChart.append(svg.node());\n</code></pre> <pre><code>/* Rozd\u011blen\u00ed str\u00e1nky */\n#container {\n    display: flex;\n    width: 100%;\n}\n\n\n/* Velikost mapov\u00e9ho okna */\n#map {\n    height: 800px;\n    width: 60%;\n}\n\n/* Velikost divu pro graf a jeho vycentrov\u00e1n\u00ed */\n#containerChart {\n    width: 40%;\n    justify-content: center;\n    align-items: center;\n    display: flex;\n}\n\n/* Div t\u0159\u00eddy info */\n.info {\n    padding: 6px 8px;\n    font: 14px/16px Arial, Helvetica, sans-serif;\n    background: white;\n    background: rgba(255,255,255,0.8);\n    box-shadow: 0 0 15px rgba(0,0,0,0.2);\n    border-radius: 5px;\n}\n\n/* Nadpis v divu info */\n.info h4 {\n    margin: 0 0 5px;\n    color: #777;\n}\n\n/* \u00daprava stylu legendy*/\n.legend {\n    line-height: 18px;\n    color: #555;\n}\n\n/* Zobrazen\u00ed \u010dtverc\u016f s barvou stylu ka\u017ed\u00e9ho atributu */\n.legend i {\n    width: 18px;\n    height: 18px;\n    float: left;\n    margin-right: 8px;\n    opacity: 0.7;\n}\n</code></pre>"},{"location":"cviceni/cviceni6/#2-priprava-os-grafu-a-jeho-popis","title":"2) P\u0159\u00edprava os grafu a jeho popis","text":"<p>V prvn\u00ed f\u00e1zi mus\u00edme upravit z\u00e1klady grafu, a to jeho osy. Pracovat budeme v souboru <code>script-chart.js</code>.</p> <p>P\u0159ed definov\u00e1n\u00edm osy x ur\u010d\u00edm\u011b popis a zdrojov\u00fd atribut v\u0161ech interval\u016f v\u00fdstavby, kter\u00e9 z\u00edsk\u00e1v\u00e1me z mapov\u00e9 vrstvy polygon\u016f ORP. </p> script-chart.js <pre><code>// P\u0159\u00edprava jednotliv\u00fdch vykreslovan\u00fdch atribut\u016f na ose x\nconst yearKeys = [\n    { label: \"p\u0159ed 1919\", key: \"vystavba_pred1919\" },\n    { label: \"1920\u20131945\", key: \"vystavba_1920_1945\" },\n    { label: \"1946\u20131970\", key: \"vystavba_1946_1970\" },\n    { label: \"1971\u20131980\", key: \"vystavba_1971_1980\" },\n    { label: \"1981\u20131990\", key: \"vystavba_1981_1990\" },\n    { label: \"1991\u20132000\", key: \"vystavba_1991_2000\" },\n    { label: \"2001\u20132010\", key: \"vystavba_2001_2010\" },\n    { label: \"2011\u20132015\", key: \"vystavba_2011_2015\" },\n    { label: \"po 2016\", key: \"vystavba_po2016\" }\n];\n\n// Definice osy x\nconst x = d3.scaleBand()\n    .domain(yearKeys.map(d =&gt; d.label)) // Hodnoty na ose x\n    .range([marginLeft, width - marginRight]) // \u0160\u00ed\u0159ka osy p\u0159i vykreslen\u00ed grafu\n    .padding(0.1); // Mezera mezi jednotliv\u00fdmi sloupci grafu\n</code></pre> <p>N\u00e1sledn\u011b definujeme osu\u00a0y, kter\u00e9 ponech\u00e1me automatick\u00e9 nastaven\u00ed hodnot dle zvolen\u00e9ho polygonu ORP. </p> script-chart.js <pre><code>// Definice osy y\nconst y = d3.scaleLinear()\n    .range([height - marginBottom, marginTop]); // V\u00fd\u0161ka osy p\u0159i vykreslen\u00ed grafu\n</code></pre> <p>Z\u00e1v\u011brem tohoto kroku pro osu\u00a0y definujeme t\u0159\u00eddu. D\u00e1le vytvo\u0159\u00edme nadpis grafu a p\u0159id\u00e1me informaci o zdroji dat. Tyto \u00fapravy je pot\u0159eba p\u0159idat v k\u00f3du a\u017e za vytvo\u0159en\u00ed SVG, do kter\u00e9ho se graf vykresl\u00ed.</p> script-chart.js <pre><code>// P\u0159id\u00e1n\u00ed osy y do grafu (= vykreslen\u00ed do SVG)\nsvg.append(\"g\")\n    .attr(\"transform\", `translate(${marginLeft},0)`)\n    .attr(\"class\", \"y-axis\")\n    .call(d3.axisLeft(y));\n\n// P\u0159id\u00e1n\u00ed n\u00e1zvu grafu\nsvg.append(\"text\")\n    .attr(\"class\", \"title\")\n    .attr(\"x\", width / 2) // x-ov\u00e1 pozice \n    .attr(\"y\", 30) // y-ov\u00e1 pozice\n    .style(\"font-size\", \"24px\") // Velikost fontu\n    .style(\"font-weight\", \"bold\") // Typ fontu\n    .style(\"font-family\", \"sans-serif\") // Typ fontu\n    .attr(\"text-anchor\", \"middle\") // Vzta\u017en\u00fd bod\n    .text(\"V\u00fdvoj v\u00fdstavby v \u010cesku od roku 1919 do sou\u010dasnosti\"); // Text nadpisu\n\n// P\u0159id\u00e1n\u00ed zdroje dat\nsvg.append(\"text\")\n    .attr(\"class\", \"source-credit\")\n    .attr(\"x\", width/2)\n    .attr(\"y\", height)\n    .style(\"font-size\", \"9px\")\n    .style(\"font-family\", \"sans-serif\")\n    .text(\"Zdroj dat: Arc\u010cR 4.3\");\n</code></pre> <p> Graf p\u0159ipraven\u00fd pro vykreslen\u00ed sloupc\u016f s hodnotami v\u00fdstavby</p> <p> Upozorn\u011bn\u00ed</p> <p>Pokud se popisy os p\u0159ekr\u00fdvaj\u00ed s\u00a0nadpisem \u010di s\u00a0textem popisuj\u00edc\u00edm zdroj dat, pak je nutn\u00e9 dle pot\u0159eby zv\u011bt\u0161it okraje <code>marginTop</code>, <code>marginRight</code>, <code>marginBottom</code> nebo <code>marginLeft</code>. </p> <p>P\u0159\u00edpadn\u011b je mo\u017en\u00e9 upravit celkov\u00e9 rozm\u011bry grafu <code>width</code> a <code>height</code>.</p> Stav k\u00f3du po dokon\u010den\u00ed kroku 2) P\u0159\u00edprava os grafu a jeho popis index.html \u2013 beze zm\u011bnyscript.js \u2013 beze zm\u011bnyscript-chart.jsstyle.css \u2013 beze zm\u011bny <pre><code>&lt;!DOCTYPE html&gt; \n&lt;html&gt; \n&lt;head&gt; \n    &lt;meta charset=\"UTF-8\"&gt; \n    &lt;meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"&gt;\n    &lt;link rel=\"stylesheet\" href=\"style.css\"&gt;\n\n    &lt;!-- Na\u010dten\u00ed souboru s body ORP GeoJSON--&gt;\n    &lt;script src=\"ORP_body_GeoJSON.js\"&gt;&lt;/script&gt;\n\n    &lt;!-- Na\u010dten\u00ed souboru s ORP GeoJSON--&gt;\n    &lt;script src=\"ORP_GeoJSON.js\"&gt;&lt;/script&gt;\n\n    &lt;!-- Extern\u00ed p\u0159ipojen\u00ed CSS symbologie Leaflet--&gt;\n    &lt;link rel=\"stylesheet\" href=\"https://unpkg.com/leaflet@1.9.4/dist/leaflet.css\"\n    integrity=\"sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=\"\n    crossorigin=\"\"/&gt;\n\n    &lt;!-- Extern\u00ed p\u0159ipojen\u00ed JS knihovny -&gt; vlo\u017eit a\u017e po p\u0159ipojen\u00ed CSS souboru --&gt;\n    &lt;script src=\"https://unpkg.com/leaflet@1.9.4/dist/leaflet.js\"\n    integrity=\"sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=\"\n    crossorigin=\"\"&gt;&lt;/script&gt;\n\n    &lt;!-- P\u0159ipojen\u00ed D3.js --&gt;\n    &lt;script src=\"https://cdn.jsdelivr.net/npm/d3@7\"&gt;&lt;/script&gt;\n\n    &lt;title&gt;Moje druh\u00e1 Leaflet mapa&lt;/title&gt; \n&lt;/head&gt;\n&lt;body&gt; \n\n    &lt;h1&gt;Propojen\u00ed knihovny Leaflet s D3.js&lt;/h1&gt; \n\n    &lt;!-- Rozd\u011blen\u00ed str\u00e1nky na mapu a graf, pom\u011br je nastaven\u00fd pomoc\u00ed CSS --&gt;\n    &lt;div id=\"container\"&gt;\n        &lt;div id=\"map\"&gt;&lt;/div&gt;\n        &lt;div id=\"containerChart\"&gt;&lt;/div&gt;\n    &lt;/div&gt;\n\n    &lt;!-- Na\u010dten\u00ed skript\u016f ovl\u00e1daj\u00edc\u00ed mapu --&gt;\n    &lt;script src=\"script.js\"&gt;&lt;/script&gt;\n\n    &lt;!-- Na\u010dten\u00ed skript\u016f ovl\u00e1daj\u00edc\u00ed graf --&gt;\n    &lt;script type=\"module\" src=\"script-chart.js\"&gt;&lt;/script&gt;\n\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre> <pre><code>// Nastaven\u00ed mapy, jej\u00edho st\u0159edu a \u00farovn\u011b p\u0159ibl\u00ed\u017een\u00ed\nvar map = L.map('map').setView([49.860, 15.315], 8); // V\u00fdb\u011br bodu zhruba uprost\u0159ed republiky\n\n// Ur\u010den\u00ed podkladov\u00e9 mapy, maxim\u00e1ln\u00ed \u00farovn\u011b p\u0159ibl\u00ed\u017een\u00ed a zdroje dat\nvar osm = L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {\n    maxZoom: 19,\n    attribution: '&amp;copy; &lt;a href=\"http://www.openstreetmap.org/copyright\"&gt;OpenStreetMap&lt;/a&gt;'\n}).addTo(map);\n\n// Definice podkladov\u00e9 OpenTopoMap\nvar otm = L.tileLayer('https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png', {\n    maxZoom: 17,\n    attribution: 'Map data: &amp;copy; &lt;a href=\"https://www.openstreetmap.org/copyright\"&gt;OpenStreetMap&lt;/a&gt; contributors, &lt;a href=\"http://viewfinderpanoramas.org\"&gt;SRTM&lt;/a&gt; | Map style: &amp;copy; &lt;a href=\"https://opentopomap.org\"&gt;OpenTopoMap&lt;/a&gt; (&lt;a href=\"https://creativecommons.org/licenses/by-sa/3.0/\"&gt;CC-BY-SA&lt;/a&gt;)'\n});\n\n// P\u0159id\u00e1n\u00ed ortofota jako WMS slu\u017eby, ur\u010den\u00ed vrstvy, form\u00e1tu a pr\u016fhlednosti\nvar ortofoto = L.tileLayer.wms(\"https://ags.cuzk.gov.cz/arcgis1/services/ORTOFOTO/MapServer/WMSServer\", {\n    layers: \"0\", \n    format: \"image/png\",\n    transparent: true,\n    attribution: \"&amp;copy \u010c\u00daZK\"\n});\n\n// V\u00fdpo\u010det nov\u00e9ho atributu pro ka\u017ed\u00fd prvek ORP \n// (hustota obyvatelstva = po\u010det obyvatel / plocha), p\u0159evod z m2 na km2 -&gt; vyn\u00e1soben\u00ed 1 000 000\nORP.features.forEach(function(feature){\n    if(feature.properties.Shape_Area &amp;&amp; feature.properties.poc_obyv_SLDB_2021){\n        feature.properties.hustota = (feature.properties.poc_obyv_SLDB_2021/feature.properties.Shape_Area)*1000000\n    }else{\n        feature.properties.hustota = 0\n    }\n})\n\n// Vytvo\u0159en\u00ed barevn\u00e9 stupnice\nfunction getColor(d) {\nreturn d &gt; 1000 ? '#800026' :\n        d &gt; 500  ? '#BD0026' :\n        d &gt; 200  ? '#E31A1C' :\n        d &gt; 100  ? '#FC4E2A' :\n        d &gt; 50   ? '#FD8D3C' :\n        d &gt; 20   ? '#FEB24C' :\n                    '#FFEDA0'; // V\u00fdchoz\u00ed barva\n}\n\n// Styl kartogramu\nfunction kartogram(feature) {\nreturn {\n    fillColor: getColor(feature.properties.hustota), // Styl na z\u00e1klad\u011b atributu \"hustota\"\n    weight: 1,\n    opacity: 1,\n    color: 'white',\n    fillOpacity: 0.7\n};\n}\n\n// V\u00fdb\u011br prvku po najet\u00ed kurzorem my\u0161i\nfunction highlightFeature(e) {\n    var layer = e.target;\n\n    // \u00daprava stylu vybran\u00e9ho prvku = jeho zv\u00fdrazn\u011bn\u00ed\n    layer.setStyle({\n        weight: 5,\n        color: '#666',\n        dashArray: '',\n        fillOpacity: 0.7\n    });\n\n    layer.bringToFront();\n    info.update(layer.feature.properties); // Aktualizace info pop-upu p\u0159i v\u00fdb\u011bru prvku\n}\n\n// P\u0159ibl\u00ed\u017een\u00ed na vybran\u00fd polygon po kliknut\u00ed my\u0161\u00ed\nfunction zoomToFeature(e) {\n    map.fitBounds(e.target.getBounds());\n}\n\n// Resetov\u00e1n\u00ed stylu kartogramu po zru\u0161en\u00ed jeho v\u00fdb\u011bru my\u0161\u00ed\nfunction resetHighlight(e) {\n    ORPLayer.resetStyle(e.target);\n    info.update(); // Aktualizace info pop-upu p\u0159i v\u00fdb\u011bru prvku\n}\n\n// P\u0159\u00edstup k jednotliv\u00fdm polygon\u016f ve vrstv\u011b\nfunction onEachFeature(feature, layer) {\n    layer.on({\n        mouseover: highlightFeature,\n        mouseout: resetHighlight,\n        click: function(e) {\n            // zoomToFeature(e); // P\u0159ibli\u017eov\u00e1n\u00ed na prvek m\u016f\u017eeme nyn\u00ed vypnout\n            console.table(feature.properties); // V\u00fdpis atribut\u016f vybran\u00e9ho prvku do konzole\n            updateChart(feature.properties); // Propojen\u00ed s grafem\n        }\n    });\n}\n\n// Vytvo\u0159en\u00ed pop-upu s informacemi o vybran\u00e9m prvku v map\u011b\nvar info = L.control();\n\ninfo.onAdd = function (map) {\n    this._div = L.DomUtil.create('div', 'info'); // Vytvo\u0159\u00ed div s t\u0159\u00eddou \"info\"\n    this.update();\n    return this._div;\n};\n\n// Funkce pro aktualizaci po-upu na z\u00e1klad\u011b p\u0159edan\u00fdch vlastnost\u00ed prvku\ninfo.update = function (props) {\n    this._div.innerHTML = '&lt;h4&gt;Hustota obyvatel&lt;/h4&gt;' +  (props ?\n        '&lt;b&gt;' + props.nazev + '&lt;/b&gt;&lt;br /&gt;' + props.hustota.toFixed(2) + ' obyv. / km&lt;sup&gt;2&lt;/sup&gt;'\n        : 'Vyber ORP'); // V\u00fdpis, pokud nen\u00ed vybran\u00fd prvek\n};\n\n// Vlo\u017een\u00ed info pop-upu do mapy\ninfo.addTo(map); \n\n// Vytvo\u0159en\u00ed legendy a nastaven\u00ed jej\u00ed pozice\nvar legend = L.control({position: 'bottomright'});\n\nlegend.onAdd = function (map) {\n\n    var div = L.DomUtil.create('div', 'info legend'),\n        grades = [0, 20, 50, 100, 200, 500, 1000], // Hranice interval\u016f - stejn\u00e9 jako v nastaven\u00ed stylu kartogramu\n        labels = [];\n\n    div.innerHTML += '&lt;h4&gt;Hustota obyvatel&lt;/h4&gt;' + 'obyv. / km&lt;sup&gt;2&lt;/sup&gt;&lt;br /&gt;'; // Nadpis legendy\n\n    // Proch\u00e1zen\u00ed interval\u016f hustoty - pro ka\u017ed\u00fd interval se vygeneruje \u0161t\u00edtek s barevn\u00fdm \u010dtvercem.\n    for (var i = 0; i &lt; grades.length; i++) {\n        div.innerHTML +=\n            '&lt;i style=\"background:' + getColor(grades[i] + 1) + '\"&gt;&lt;/i&gt; ' +\n            grades[i] + (grades[i + 1] ? '&amp;ndash;' + grades[i + 1] + '&lt;br&gt;' : '+');\n    }\n\n    return div;\n};\n\n// P\u0159id\u00e1n\u00ed legendy do mapy\nlegend.addTo(map);\n\n// Na\u010dten\u00ed GeoJSONu s polygony ORP do mapy\nvar ORPLayer = L.geoJSON(ORP,{\n    style: kartogram, \n    onEachFeature: onEachFeature\n}).addTo(map);\n\n// Prom\u011bnn\u00e1 uchov\u00e1vaj\u00edc\u00ed podkladov\u00e9 mapy, mezi kter\u00fdmi chceme p\u0159ep\u00ednat\nvar baseMaps = {\n    \"OpenStreetMap\": osm, // \"popis mapy\": nazevPromenne\n    \"OpenTopoMap\": otm,\n    \"Ortofoto \u010cR\": ortofoto\n};\n\n// Prom\u011bnn\u00e1 uchov\u00e1vaj\u00edc\u00ed mapov\u00e9 vrstvy, kter\u00e9 chceme zobrazovat a skr\u00fdvat\nvar overlayMaps = {\n    \"Hustota obyvatelstva\": ORPLayer\n};\n\n// Grafick\u00e9 p\u0159ep\u00edn\u00e1n\u00ed podkladov\u00fdch map\nvar layerControl = L.control.layers(baseMaps, overlayMaps, {collapsed: false}).addTo(map);\n</code></pre> <pre><code>// Ur\u010den\u00ed velikosti grafu a jeho okraj\u016f\nconst width = 800;\nconst height = 450;\nconst marginTop = 50;\nconst marginRight = 20;\nconst marginBottom = 40;\nconst marginLeft = 40;\n\n// P\u0159\u00edprava jednotliv\u00fdch vykreslovan\u00fdch atribut\u016f na ose x\nconst yearKeys = [\n    { label: \"p\u0159ed 1919\", key: \"vystavba_pred1919\" },\n    { label: \"1920\u20131945\", key: \"vystavba_1920_1945\" },\n    { label: \"1946\u20131970\", key: \"vystavba_1946_1970\" },\n    { label: \"1971\u20131980\", key: \"vystavba_1971_1980\" },\n    { label: \"1981\u20131990\", key: \"vystavba_1981_1990\" },\n    { label: \"1991\u20132000\", key: \"vystavba_1991_2000\" },\n    { label: \"2001\u20132010\", key: \"vystavba_2001_2010\" },\n    { label: \"2011\u20132015\", key: \"vystavba_2011_2015\" },\n    { label: \"po 2016\", key: \"vystavba_po2016\" }\n];\n\n// Definice osy x\nconst x = d3.scaleBand()\n    .domain(yearKeys.map(d =&gt; d.label)) // Hodnoty na ose x\n    .range([marginLeft, width - marginRight]) // \u0160\u00ed\u0159ka osy p\u0159i vykreslen\u00ed grafu\n    .padding(0.1); // Mezera mezi jednotliv\u00fdmi sloupci grafu\n\n// Definice osy y\nconst y = d3.scaleLinear()\n    .range([height - marginBottom, marginTop]); // V\u00fd\u0161ka osy p\u0159i vykreslen\u00ed grafu\n\n// Vytvo\u0159en\u00ed SVG, do kter\u00e9ho se graf vykresl\u00ed\nconst svg = d3.create(\"svg\")\n    .attr(\"width\", width)\n    .attr(\"height\", height);\n\n// P\u0159id\u00e1n\u00ed n\u00e1zvu grafu\nsvg.append(\"text\")\n    .attr(\"class\", \"title\")\n    .attr(\"x\", width / 2) // x-ov\u00e1 pozice \n    .attr(\"y\", 30) // y-ov\u00e1 pozice\n    .style(\"font-size\", \"24px\") // Velikost fontu\n    .style(\"font-weight\", \"bold\") // Typ fontu\n    .style(\"font-family\", \"sans-serif\") // Typ fontu\n    .attr(\"text-anchor\", \"middle\") // Vzta\u017en\u00fd bod\n    .text(\"V\u00fdvoj v\u00fdstavby v \u010cesku od roku 1919 do sou\u010dasnosti\"); // Text nadpisu\n\n// P\u0159id\u00e1n\u00ed zdroje dat\nsvg.append(\"text\")\n    .attr(\"class\", \"source-credit\")\n    .attr(\"x\", width/2)\n    .attr(\"y\", height)\n    .style(\"font-size\", \"9px\")\n    .style(\"font-family\", \"sans-serif\")\n    .text(\"Zdroj dat: Arc\u010cR 4.3\");\n\n// P\u0159id\u00e1n\u00ed osy x do grafu (= vykreslen\u00ed do SVG)\nsvg.append(\"g\")\n    .attr(\"transform\", `translate(0,${height - marginBottom})`)\n    .call(d3.axisBottom(x));\n\n// P\u0159id\u00e1n\u00ed osy y do grafu (= vykreslen\u00ed do SVG)\nsvg.append(\"g\")\n    .attr(\"transform\", `translate(${marginLeft},0)`)\n    .attr(\"class\", \"y-axis\")\n    .call(d3.axisLeft(y));\n\n// P\u0159ipojen\u00ed prvu SVG (= vykreslen\u00ed ve webov\u00e9 str\u00e1nce)\ncontainerChart.append(svg.node());\n</code></pre> <pre><code>/* Rozd\u011blen\u00ed str\u00e1nky */\n#container {\n    display: flex;\n    width: 100%;\n}\n\n\n/* Velikost mapov\u00e9ho okna */\n#map {\n    height: 800px;\n    width: 60%;\n}\n\n/* Velikost divu pro graf a jeho vycentrov\u00e1n\u00ed */\n#containerChart {\n    width: 40%;\n    justify-content: center;\n    align-items: center;\n    display: flex;\n}\n\n/* Div t\u0159\u00eddy info */\n.info {\n    padding: 6px 8px;\n    font: 14px/16px Arial, Helvetica, sans-serif;\n    background: white;\n    background: rgba(255,255,255,0.8);\n    box-shadow: 0 0 15px rgba(0,0,0,0.2);\n    border-radius: 5px;\n}\n\n/* Nadpis v divu info */\n.info h4 {\n    margin: 0 0 5px;\n    color: #777;\n}\n\n/* \u00daprava stylu legendy*/\n.legend {\n    line-height: 18px;\n    color: #555;\n}\n\n/* Zobrazen\u00ed \u010dtverc\u016f s barvou stylu ka\u017ed\u00e9ho atributu */\n.legend i {\n    width: 18px;\n    height: 18px;\n    float: left;\n    margin-right: 8px;\n    opacity: 0.7;\n}\n</code></pre>"},{"location":"cviceni/cviceni6/#3-propojeni-s-mapou","title":"3) Propojen\u00ed s mapou","text":"<p>V dal\u0161\u00edm kroku mus\u00edme vytvo\u0159it funkci, kter\u00e1 bude p\u0159ev\u00e1d\u011bt data z\u00a0mapy do vhodn\u00e9ho form\u00e1tu k\u00a0vykreslen\u00ed uvnit\u0159 grafu.</p> script-chart.js <pre><code>// Na\u010dten\u00ed informac\u00ed o vybran\u00e9m polygonu pro jejich vykreslen\u00ed do grafu\nfunction extractBuildingData(properties) {\n    return yearKeys.map(d =&gt; ({\n        label: d.label,\n        value: properties[d.key] || 0 // Pokud atribut neexistuje, zobraz\u00ed se jako 0\n    }));\n}\n</code></pre> <p>Pro propojen\u00ed mapy s grafem je n\u00e1sledn\u011b pot\u0159eba definovat aktualizaci dat na z\u00e1klad\u011b v\u00fdb\u011bru polygonu ORP.</p> <p>Ve funkci <code>updateChart</code>, do kter\u00e9 vstupuj\u00ed atributy vybran\u00e9ho prvku z\u00a0mapy, provedeme automatizovan\u00e9 p\u0159epo\u010dten\u00ed hodnot osy\u00a0y dle maxim\u00e1ln\u00ed hodnoty v\u00fdstavby pro vybran\u00fd polygon.</p> <p>N\u00e1sledn\u011b definujeme vykreslen\u00ed sloupc\u016f v\u00a0grafu dle vybran\u00fdch hodnot.</p> script-chart.js <pre><code>// Aktualizace grafu na z\u00e1klad\u011b vybran\u00e9ho polygonu ORP\nfunction updateChart(properties) {\n    const data = extractBuildingData(properties); // Z\u00edsk\u00e1n\u00ed na\u010dten\u00fdch dat\n    const maxValue = d3.max(data, d =&gt; d.value); // Nalezen\u00ed maxim\u00e1ln\u00ed hodnoty pro vykreslen\u00ed hodnot na ose y\n    y.domain([0, maxValue]); // Nastaven\u00ed rozsahu osy y\n\n    // Animovan\u00fd p\u0159epo\u010det hodnot na ose y p\u0159i zm\u011bn\u011b vybran\u00e9ho polygonu\n    svg.select(\".y-axis\")\n    .transition()\n    .duration(500)\n    .call(d3.axisLeft(y));\n\n    // V\u00fdb\u011br v\u0161ech sloupc\u016f pro vykreslen\u00ed hodnot v\u00fdstavby\n    const bars = svg.selectAll(\".bar\")\n    .data(data, d =&gt; d.label);\n\n    // P\u0159id\u00e1n\u00ed nov\u00fdch sloupc\u016f do grafu (pokud je\u0161t\u011b nejsou vykresleny)\n    bars.enter()\n    .append(\"rect\")\n    .attr(\"class\", \"bar\")\n    .attr(\"x\", d =&gt; x(d.label))\n    .attr(\"y\", y(0))\n    .attr(\"width\", x.bandwidth())\n    .attr(\"height\", 0)\n    .attr(\"fill\", \"#3182bd\") // Barevn\u00e1 v\u00fdpl\u0148 v\u0161ech sloupc\u016f\n    .transition()\n    .duration(500)\n    .attr(\"y\", d =&gt; y(d.value))\n    .attr(\"height\", d =&gt; y(0) - y(d.value));\n\n    // Aktualizace existuj\u00edc\u00edch sloupc\u016f v grafu\n    bars.transition()\n    .duration(500)\n    .attr(\"x\", d =&gt; x(d.label))\n    .attr(\"y\", d =&gt; y(d.value))\n    .attr(\"height\", d =&gt; y(0) - y(d.value));\n\n    // Odstran\u011bn\u00ed nepot\u0159ebn\u00fdch sloupc\u016f z p\u0159edchoz\u00edho vybran\u00e9ho polygonu\n    bars.exit()\n    .transition()\n    .duration(500)\n    .attr(\"y\", y(0))\n    .attr(\"height\", 0)\n    .remove();\n}\n\n// Umo\u017en\u011bn\u00ed p\u0159\u00edstupu k aktualizaci grafu z jin\u00fdch skript\u016f\nwindow.updateChart = updateChart;\n</code></pre> <p> Interaktivn\u00ed zobrazen\u00ed hodnot v\u00fdstavby na z\u00e1klad\u011b v\u00fdb\u011bru polygonu v map\u011b</p> <p>Z\u00e1v\u011brem do funkce <code>updateChart</code> p\u0159id\u00e1me zm\u011bnu nadpisu grafu s\u00a0v\u00fdpisem aktu\u00e1ln\u011b vybran\u00e9ho ORP.</p> script-chart.js <pre><code>// Aktualizace grafu na z\u00e1klad\u011b vybran\u00e9ho polygonu ORP\nfunction updateChart(properties) {\n    ... // Zbytek funkce\n\n    // Zm\u011bna nadpisu grafu podle n\u00e1zvu ORP\n    svg.select(\".title\")\n        .text(`V\u00fdvoj v\u00fdstavby v ORP ${properties.nazev}`);\n\n    ... // Zbytek funkce\n}\n</code></pre> <p> Aktualizace nadpisu na z\u00e1klad\u011b vybran\u00e9ho ORP</p> Stav k\u00f3du po dokon\u010den\u00ed kroku 3) Propojen\u00ed s mapou index.html \u2013 beze zm\u011bnyscript.js \u2013 beze zm\u011bnyscript-chart.jsstyle.css \u2013 beze zm\u011bny <pre><code>&lt;!DOCTYPE html&gt; \n&lt;html&gt; \n&lt;head&gt; \n    &lt;meta charset=\"UTF-8\"&gt; \n    &lt;meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"&gt;\n    &lt;link rel=\"stylesheet\" href=\"style.css\"&gt;\n\n    &lt;!-- Na\u010dten\u00ed souboru s body ORP GeoJSON--&gt;\n    &lt;script src=\"ORP_body_GeoJSON.js\"&gt;&lt;/script&gt;\n\n    &lt;!-- Na\u010dten\u00ed souboru s ORP GeoJSON--&gt;\n    &lt;script src=\"ORP_GeoJSON.js\"&gt;&lt;/script&gt;\n\n    &lt;!-- Extern\u00ed p\u0159ipojen\u00ed CSS symbologie Leaflet--&gt;\n    &lt;link rel=\"stylesheet\" href=\"https://unpkg.com/leaflet@1.9.4/dist/leaflet.css\"\n    integrity=\"sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=\"\n    crossorigin=\"\"/&gt;\n\n    &lt;!-- Extern\u00ed p\u0159ipojen\u00ed JS knihovny -&gt; vlo\u017eit a\u017e po p\u0159ipojen\u00ed CSS souboru --&gt;\n    &lt;script src=\"https://unpkg.com/leaflet@1.9.4/dist/leaflet.js\"\n    integrity=\"sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=\"\n    crossorigin=\"\"&gt;&lt;/script&gt;\n\n    &lt;!-- P\u0159ipojen\u00ed D3.js --&gt;\n    &lt;script src=\"https://cdn.jsdelivr.net/npm/d3@7\"&gt;&lt;/script&gt;\n\n    &lt;title&gt;Moje druh\u00e1 Leaflet mapa&lt;/title&gt; \n&lt;/head&gt;\n&lt;body&gt; \n\n    &lt;h1&gt;Propojen\u00ed knihovny Leaflet s D3.js&lt;/h1&gt; \n\n    &lt;!-- Rozd\u011blen\u00ed str\u00e1nky na mapu a graf, pom\u011br je nastaven\u00fd pomoc\u00ed CSS --&gt;\n    &lt;div id=\"container\"&gt;\n        &lt;div id=\"map\"&gt;&lt;/div&gt;\n        &lt;div id=\"containerChart\"&gt;&lt;/div&gt;\n    &lt;/div&gt;\n\n    &lt;!-- Na\u010dten\u00ed skript\u016f ovl\u00e1daj\u00edc\u00ed mapu --&gt;\n    &lt;script src=\"script.js\"&gt;&lt;/script&gt;\n\n    &lt;!-- Na\u010dten\u00ed skript\u016f ovl\u00e1daj\u00edc\u00ed graf --&gt;\n    &lt;script type=\"module\" src=\"script-chart.js\"&gt;&lt;/script&gt;\n\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre> <pre><code>// Nastaven\u00ed mapy, jej\u00edho st\u0159edu a \u00farovn\u011b p\u0159ibl\u00ed\u017een\u00ed\nvar map = L.map('map').setView([49.860, 15.315], 8); // V\u00fdb\u011br bodu zhruba uprost\u0159ed republiky\n\n// Ur\u010den\u00ed podkladov\u00e9 mapy, maxim\u00e1ln\u00ed \u00farovn\u011b p\u0159ibl\u00ed\u017een\u00ed a zdroje dat\nvar osm = L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {\n    maxZoom: 19,\n    attribution: '&amp;copy; &lt;a href=\"http://www.openstreetmap.org/copyright\"&gt;OpenStreetMap&lt;/a&gt;'\n}).addTo(map);\n\n// Definice podkladov\u00e9 OpenTopoMap\nvar otm = L.tileLayer('https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png', {\n    maxZoom: 17,\n    attribution: 'Map data: &amp;copy; &lt;a href=\"https://www.openstreetmap.org/copyright\"&gt;OpenStreetMap&lt;/a&gt; contributors, &lt;a href=\"http://viewfinderpanoramas.org\"&gt;SRTM&lt;/a&gt; | Map style: &amp;copy; &lt;a href=\"https://opentopomap.org\"&gt;OpenTopoMap&lt;/a&gt; (&lt;a href=\"https://creativecommons.org/licenses/by-sa/3.0/\"&gt;CC-BY-SA&lt;/a&gt;)'\n});\n\n// P\u0159id\u00e1n\u00ed ortofota jako WMS slu\u017eby, ur\u010den\u00ed vrstvy, form\u00e1tu a pr\u016fhlednosti\nvar ortofoto = L.tileLayer.wms(\"https://ags.cuzk.gov.cz/arcgis1/services/ORTOFOTO/MapServer/WMSServer\", {\n    layers: \"0\", \n    format: \"image/png\",\n    transparent: true,\n    attribution: \"&amp;copy \u010c\u00daZK\"\n});\n\n// V\u00fdpo\u010det nov\u00e9ho atributu pro ka\u017ed\u00fd prvek ORP \n// (hustota obyvatelstva = po\u010det obyvatel / plocha), p\u0159evod z m2 na km2 -&gt; vyn\u00e1soben\u00ed 1 000 000\nORP.features.forEach(function(feature){\n    if(feature.properties.Shape_Area &amp;&amp; feature.properties.poc_obyv_SLDB_2021){\n        feature.properties.hustota = (feature.properties.poc_obyv_SLDB_2021/feature.properties.Shape_Area)*1000000\n    }else{\n        feature.properties.hustota = 0\n    }\n})\n\n// Vytvo\u0159en\u00ed barevn\u00e9 stupnice\nfunction getColor(d) {\nreturn d &gt; 1000 ? '#800026' :\n        d &gt; 500  ? '#BD0026' :\n        d &gt; 200  ? '#E31A1C' :\n        d &gt; 100  ? '#FC4E2A' :\n        d &gt; 50   ? '#FD8D3C' :\n        d &gt; 20   ? '#FEB24C' :\n                    '#FFEDA0'; // V\u00fdchoz\u00ed barva\n}\n\n// Styl kartogramu\nfunction kartogram(feature) {\nreturn {\n    fillColor: getColor(feature.properties.hustota), // Styl na z\u00e1klad\u011b atributu \"hustota\"\n    weight: 1,\n    opacity: 1,\n    color: 'white',\n    fillOpacity: 0.7\n};\n}\n\n// V\u00fdb\u011br prvku po najet\u00ed kurzorem my\u0161i\nfunction highlightFeature(e) {\n    var layer = e.target;\n\n    // \u00daprava stylu vybran\u00e9ho prvku = jeho zv\u00fdrazn\u011bn\u00ed\n    layer.setStyle({\n        weight: 5,\n        color: '#666',\n        dashArray: '',\n        fillOpacity: 0.7\n    });\n\n    layer.bringToFront();\n    info.update(layer.feature.properties); // Aktualizace info pop-upu p\u0159i v\u00fdb\u011bru prvku\n}\n\n// P\u0159ibl\u00ed\u017een\u00ed na vybran\u00fd polygon po kliknut\u00ed my\u0161\u00ed\nfunction zoomToFeature(e) {\n    map.fitBounds(e.target.getBounds());\n}\n\n// Resetov\u00e1n\u00ed stylu kartogramu po zru\u0161en\u00ed jeho v\u00fdb\u011bru my\u0161\u00ed\nfunction resetHighlight(e) {\n    ORPLayer.resetStyle(e.target);\n    info.update(); // Aktualizace info pop-upu p\u0159i v\u00fdb\u011bru prvku\n}\n\n// P\u0159\u00edstup k jednotliv\u00fdm polygon\u016f ve vrstv\u011b\nfunction onEachFeature(feature, layer) {\n    layer.on({\n        mouseover: highlightFeature,\n        mouseout: resetHighlight,\n        click: function(e) {\n            // zoomToFeature(e); // P\u0159ibli\u017eov\u00e1n\u00ed na prvek m\u016f\u017eeme nyn\u00ed vypnout\n            console.table(feature.properties); // V\u00fdpis atribut\u016f vybran\u00e9ho prvku do konzole\n            updateChart(feature.properties); // Propojen\u00ed s grafem\n        }\n    });\n}\n\n// Vytvo\u0159en\u00ed pop-upu s informacemi o vybran\u00e9m prvku v map\u011b\nvar info = L.control();\n\ninfo.onAdd = function (map) {\n    this._div = L.DomUtil.create('div', 'info'); // Vytvo\u0159\u00ed div s t\u0159\u00eddou \"info\"\n    this.update();\n    return this._div;\n};\n\n// Funkce pro aktualizaci po-upu na z\u00e1klad\u011b p\u0159edan\u00fdch vlastnost\u00ed prvku\ninfo.update = function (props) {\n    this._div.innerHTML = '&lt;h4&gt;Hustota obyvatel&lt;/h4&gt;' +  (props ?\n        '&lt;b&gt;' + props.nazev + '&lt;/b&gt;&lt;br /&gt;' + props.hustota.toFixed(2) + ' obyv. / km&lt;sup&gt;2&lt;/sup&gt;'\n        : 'Vyber ORP'); // V\u00fdpis, pokud nen\u00ed vybran\u00fd prvek\n};\n\n// Vlo\u017een\u00ed info pop-upu do mapy\ninfo.addTo(map); \n\n// Vytvo\u0159en\u00ed legendy a nastaven\u00ed jej\u00ed pozice\nvar legend = L.control({position: 'bottomright'});\n\nlegend.onAdd = function (map) {\n\n    var div = L.DomUtil.create('div', 'info legend'),\n        grades = [0, 20, 50, 100, 200, 500, 1000], // Hranice interval\u016f - stejn\u00e9 jako v nastaven\u00ed stylu kartogramu\n        labels = [];\n\n    div.innerHTML += '&lt;h4&gt;Hustota obyvatel&lt;/h4&gt;' + 'obyv. / km&lt;sup&gt;2&lt;/sup&gt;&lt;br /&gt;'; // Nadpis legendy\n\n    // Proch\u00e1zen\u00ed interval\u016f hustoty - pro ka\u017ed\u00fd interval se vygeneruje \u0161t\u00edtek s barevn\u00fdm \u010dtvercem.\n    for (var i = 0; i &lt; grades.length; i++) {\n        div.innerHTML +=\n            '&lt;i style=\"background:' + getColor(grades[i] + 1) + '\"&gt;&lt;/i&gt; ' +\n            grades[i] + (grades[i + 1] ? '&amp;ndash;' + grades[i + 1] + '&lt;br&gt;' : '+');\n    }\n\n    return div;\n};\n\n// P\u0159id\u00e1n\u00ed legendy do mapy\nlegend.addTo(map);\n\n// Na\u010dten\u00ed GeoJSONu s polygony ORP do mapy\nvar ORPLayer = L.geoJSON(ORP,{\n    style: kartogram, \n    onEachFeature: onEachFeature\n}).addTo(map);\n\n// Prom\u011bnn\u00e1 uchov\u00e1vaj\u00edc\u00ed podkladov\u00e9 mapy, mezi kter\u00fdmi chceme p\u0159ep\u00ednat\nvar baseMaps = {\n    \"OpenStreetMap\": osm, // \"popis mapy\": nazevPromenne\n    \"OpenTopoMap\": otm,\n    \"Ortofoto \u010cR\": ortofoto\n};\n\n// Prom\u011bnn\u00e1 uchov\u00e1vaj\u00edc\u00ed mapov\u00e9 vrstvy, kter\u00e9 chceme zobrazovat a skr\u00fdvat\nvar overlayMaps = {\n    \"Hustota obyvatelstva\": ORPLayer\n};\n\n// Grafick\u00e9 p\u0159ep\u00edn\u00e1n\u00ed podkladov\u00fdch map\nvar layerControl = L.control.layers(baseMaps, overlayMaps, {collapsed: false}).addTo(map);\n</code></pre> <pre><code>// Ur\u010den\u00ed velikosti grafu a jeho okraj\u016f\nconst width = 800;\nconst height = 450;\nconst marginTop = 50;\nconst marginRight = 20;\nconst marginBottom = 40;\nconst marginLeft = 40;\n\n// P\u0159\u00edprava jednotliv\u00fdch vykreslovan\u00fdch atribut\u016f na ose x\nconst yearKeys = [\n    { label: \"p\u0159ed 1919\", key: \"vystavba_pred1919\" },\n    { label: \"1920\u20131945\", key: \"vystavba_1920_1945\" },\n    { label: \"1946\u20131970\", key: \"vystavba_1946_1970\" },\n    { label: \"1971\u20131980\", key: \"vystavba_1971_1980\" },\n    { label: \"1981\u20131990\", key: \"vystavba_1981_1990\" },\n    { label: \"1991\u20132000\", key: \"vystavba_1991_2000\" },\n    { label: \"2001\u20132010\", key: \"vystavba_2001_2010\" },\n    { label: \"2011\u20132015\", key: \"vystavba_2011_2015\" },\n    { label: \"po 2016\", key: \"vystavba_po2016\" }\n];\n\n// Definice osy x\nconst x = d3.scaleBand()\n    .domain(yearKeys.map(d =&gt; d.label)) // Hodnoty na ose x\n    .range([marginLeft, width - marginRight]) // \u0160\u00ed\u0159ka osy p\u0159i vykreslen\u00ed grafu\n    .padding(0.1); // Mezera mezi jednotliv\u00fdmi sloupci grafu\n\n// Definice osy y\nconst y = d3.scaleLinear()\n    .range([height - marginBottom, marginTop]); // V\u00fd\u0161ka osy p\u0159i vykreslen\u00ed grafu\n\n// Vytvo\u0159en\u00ed SVG, do kter\u00e9ho se graf vykresl\u00ed\nconst svg = d3.create(\"svg\")\n    .attr(\"width\", width)\n    .attr(\"height\", height);\n\n// P\u0159id\u00e1n\u00ed n\u00e1zvu grafu\nsvg.append(\"text\")\n    .attr(\"class\", \"title\")\n    .attr(\"x\", width / 2) // x-ov\u00e1 pozice \n    .attr(\"y\", 30) // y-ov\u00e1 pozice\n    .style(\"font-size\", \"24px\") // Velikost fontu\n    .style(\"font-weight\", \"bold\") // Typ fontu\n    .style(\"font-family\", \"sans-serif\") // Typ fontu\n    .attr(\"text-anchor\", \"middle\") // Vzta\u017en\u00fd bod\n    .text(\"V\u00fdvoj v\u00fdstavby v \u010cesku od roku 1919 do sou\u010dasnosti\"); // Text nadpisu\n\n// P\u0159id\u00e1n\u00ed zdroje dat\nsvg.append(\"text\")\n    .attr(\"class\", \"source-credit\")\n    .attr(\"x\", width/2)\n    .attr(\"y\", height)\n    .style(\"font-size\", \"9px\")\n    .style(\"font-family\", \"sans-serif\")\n    .text(\"Zdroj dat: Arc\u010cR 4.3\");\n\n// P\u0159id\u00e1n\u00ed osy x do grafu (= vykreslen\u00ed do SVG)\nsvg.append(\"g\")\n    .attr(\"transform\", `translate(0,${height - marginBottom})`)\n    .call(d3.axisBottom(x));\n\n// P\u0159id\u00e1n\u00ed osy y do grafu (= vykreslen\u00ed do SVG)\nsvg.append(\"g\")\n    .attr(\"transform\", `translate(${marginLeft},0)`)\n    .attr(\"class\", \"y-axis\")\n    .call(d3.axisLeft(y));\n\n// Na\u010dten\u00ed informac\u00ed o vybran\u00e9m polygonu pro jejich vykreslen\u00ed do grafu\nfunction extractBuildingData(properties) {\n    return yearKeys.map(d =&gt; ({\n        label: d.label,\n        value: properties[d.key] || 0 // Pokud atribut neexistuje, zobraz\u00ed se jako 0\n    }));\n}\n\n// Aktualizace grafu na z\u00e1klad\u011b vybran\u00e9ho polygonu ORP\nfunction updateChart(properties) {\n    const data = extractBuildingData(properties); // Z\u00edsk\u00e1n\u00ed na\u010dten\u00fdch dat\n    const maxValue = d3.max(data, d =&gt; d.value); // Nalezen\u00ed maxim\u00e1ln\u00ed hodnoty pro vykreslen\u00ed hodnot na ose y\n    y.domain([0, maxValue]); // Nastaven\u00ed rozsahu osy y\n\n    // Animovan\u00fd p\u0159epo\u010det hodnot na ose y p\u0159i zm\u011bn\u011b vybran\u00e9ho polygonu\n    svg.select(\".y-axis\")\n    .transition()\n    .duration(500)\n    .call(d3.axisLeft(y));\n\n    //  Zm\u011bna nadpisu grafu podle n\u00e1zvu ORP\n    svg.select(\".title\")\n        .text(`V\u00fdvoj v\u00fdstavby v ORP ${properties.nazev}`);\n\n    // V\u00fdb\u011br v\u0161ech sloupc\u016f pro vykreslen\u00ed hodnot v\u00fdstavby\n    const bars = svg.selectAll(\".bar\")\n    .data(data, d =&gt; d.label);\n\n    // P\u0159id\u00e1n\u00ed nov\u00fdch sloupc\u016f do grafu (pokud je\u0161t\u011b nejsou vykresleny)\n    bars.enter()\n    .append(\"rect\")\n    .attr(\"class\", \"bar\")\n    .attr(\"x\", d =&gt; x(d.label))\n    .attr(\"y\", y(0))\n    .attr(\"width\", x.bandwidth())\n    .attr(\"height\", 0)\n    .attr(\"fill\", \"#3182bd\") // Barevn\u00e1 v\u00fdpl\u0148 v\u0161ech sloupc\u016f\n    .transition()\n    .duration(500)\n    .attr(\"y\", d =&gt; y(d.value))\n    .attr(\"height\", d =&gt; y(0) - y(d.value));\n\n    // Aktualizace existuj\u00edc\u00edch sloupc\u016f v grafu\n    bars.transition()\n    .duration(500)\n    .attr(\"x\", d =&gt; x(d.label))\n    .attr(\"y\", d =&gt; y(d.value))\n    .attr(\"height\", d =&gt; y(0) - y(d.value));\n\n    // Odstran\u011bn\u00ed nepot\u0159ebn\u00fdch sloupc\u016f z p\u0159edchoz\u00edho vybran\u00e9ho polygonu\n    bars.exit()\n    .transition()\n    .duration(500)\n    .attr(\"y\", y(0))\n    .attr(\"height\", 0)\n    .remove();\n}\n\n// Umo\u017en\u011bn\u00ed p\u0159\u00edstupu k aktualizaci grafu z jin\u00fdch skript\u016f\nwindow.updateChart = updateChart;\n\n\n// P\u0159ipojen\u00ed prvu SVG (= vykreslen\u00ed ve webov\u00e9 str\u00e1nce)\ncontainerChart.append(svg.node());\n</code></pre> <pre><code>/* Rozd\u011blen\u00ed str\u00e1nky */\n#container {\n    display: flex;\n    width: 100%;\n}\n\n\n/* Velikost mapov\u00e9ho okna */\n#map {\n    height: 800px;\n    width: 60%;\n}\n\n/* Velikost divu pro graf a jeho vycentrov\u00e1n\u00ed */\n#containerChart {\n    width: 40%;\n    justify-content: center;\n    align-items: center;\n    display: flex;\n}\n\n/* Div t\u0159\u00eddy info */\n.info {\n    padding: 6px 8px;\n    font: 14px/16px Arial, Helvetica, sans-serif;\n    background: white;\n    background: rgba(255,255,255,0.8);\n    box-shadow: 0 0 15px rgba(0,0,0,0.2);\n    border-radius: 5px;\n}\n\n/* Nadpis v divu info */\n.info h4 {\n    margin: 0 0 5px;\n    color: #777;\n}\n\n/* \u00daprava stylu legendy*/\n.legend {\n    line-height: 18px;\n    color: #555;\n}\n\n/* Zobrazen\u00ed \u010dtverc\u016f s barvou stylu ka\u017ed\u00e9ho atributu */\n.legend i {\n    width: 18px;\n    height: 18px;\n    float: left;\n    margin-right: 8px;\n    opacity: 0.7;\n}\n</code></pre> <p> U\u017eite\u010dn\u00e9 odkazy</p> <ul> <li>Leaflet + D3 popup: https://gist.github.com/Andrew-Reid/11602fac1ea66c2a6d7f78067b2deddb#file-thumbnail-png</li> <li>D3 + Leaflet: https://observablehq.com/@sfu-iat355/intro-to-leaflet-d3-interactivity</li> </ul>"},{"location":"cviceni/cviceni7/","title":"Webov\u00fd server ve Windows","text":"<p>IIS (neboli Internet Information Services) je webov\u00fd server vyvinut\u00fd spole\u010dnost\u00ed Microsoft, kter\u00fd slou\u017e\u00ed k hostov\u00e1n\u00ed webov\u00fdch str\u00e1nek a aplikac\u00ed na serverech s opera\u010dn\u00edm syst\u00e9mem Windows. Jeho hlavn\u00edm \u00fakolem je p\u0159ij\u00edmat po\u017eadavky od klient\u016f (webov\u00fdch prohl\u00ed\u017ee\u010d\u016f) a odes\u00edlat jim po\u017eadovan\u00fd obsah. IIS podporuje r\u016fzn\u00e9 webov\u00e9 protokoly, v\u010detn\u011b HTTP, HTTPS, FTP a SMTP, co\u017e z n\u011bj \u010din\u00ed univerz\u00e1ln\u00ed n\u00e1stroj pro webov\u00e9 publikov\u00e1n\u00ed. Krom\u011b statick\u00fdch webov\u00fdch str\u00e1nek (HTML, CSS, JavaScript) umo\u017e\u0148uje IIS hostovat i dynamick\u00e9 webov\u00e9 aplikace zalo\u017een\u00e9 na technologi\u00edch jako ASP.NET, PHP nebo Node.js. D\u00edky sv\u00e9 integraci s opera\u010dn\u00edm syst\u00e9mem Windows a \u0161irok\u00e9 \u0161k\u00e1le funkc\u00ed je IIS obl\u00edbenou volbou pro webov\u00e9 v\u00fdvoj\u00e1\u0159e a administr\u00e1tory, kte\u0159\u00ed pracuj\u00ed s platformou Microsoft.</p>"},{"location":"cviceni/cviceni7/#vychozi-slozka-inetpub-a-jeji-vyznam","title":"V\u00fdchoz\u00ed slo\u017eka inetpub a jej\u00ed v\u00fdznam","text":"<p>Po instalaci IIS se ve v\u00fdchoz\u00edm nastaven\u00ed vytv\u00e1\u0159\u00ed slo\u017eka inetpub v ko\u0159enov\u00e9m adres\u00e1\u0159i disku C:. Tato slo\u017eka slou\u017e\u00ed jako centr\u00e1ln\u00ed \u00falo\u017ei\u0161t\u011b pro soubory webov\u00fdch str\u00e1nek a aplikac\u00ed. Obsahuje n\u011bkolik podslo\u017eek, z nich\u017e nejd\u016fle\u017eit\u011bj\u0161\u00ed je wwwroot. Tato slo\u017eka je ko\u0159enov\u00fdm adres\u00e1\u0159em pro v\u00fdchoz\u00ed webovou str\u00e1nku. Do n\u00ed se umis\u0165uj\u00ed soubory, kter\u00e9 maj\u00ed b\u00fdt dostupn\u00e9 z webov\u00e9ho serveru. Krom\u011b wwwroot obsahuje slo\u017eka inetpub i dal\u0161\u00ed podslo\u017eky, jako je ftproot pro FTP server, mailroot pro SMTP server a logs pro ukl\u00e1d\u00e1n\u00ed protokol\u016f. Spr\u00e1vn\u00e9 um\u00edst\u011bn\u00ed soubor\u016f do t\u011bchto slo\u017eek je d\u016fle\u017eit\u00e9 pro spr\u00e1vn\u00e9 fungov\u00e1n\u00ed webov\u00e9ho serveru.</p>"},{"location":"cviceni/cviceni7/#weby-a-jejich-definice-v-iis","title":"Weby a jejich definice v IIS","text":"<p>V IIS se weby definuj\u00ed pomoc\u00ed tzv. \"webov\u00fdch str\u00e1nek\" (websites). Ka\u017ed\u00e1 webov\u00e1 str\u00e1nka m\u00e1 sv\u016fj jedine\u010dn\u00fd n\u00e1zev, fyzickou cestu (obvykle do slo\u017eky wwwroot nebo jej\u00ed podslo\u017eky) a nastaven\u00ed pro p\u0159\u00edstup (nap\u0159. port, IP adresa). Fyzick\u00e1 cesta ur\u010duje, kde se nach\u00e1zej\u00ed soubory webov\u00e9 str\u00e1nky na disku serveru. Nastaven\u00ed pro p\u0159\u00edstup ur\u010duje, jak\u00fdm zp\u016fsobem se klienti mohou k webov\u00e9 str\u00e1nce p\u0159ipojit. IIS umo\u017e\u0148uje hostovat v\u00edce webov\u00fdch str\u00e1nek na jednom serveru, p\u0159i\u010dem\u017e ka\u017ed\u00e1 webov\u00e1 str\u00e1nka m\u00e1 vlastn\u00ed konfiguraci. To umo\u017e\u0148uje flexibiln\u00ed spr\u00e1vu webov\u00fdch aplikac\u00ed a jejich izolaci.</p>"},{"location":"cviceni/cviceni7/#defaultni-soubory-a-jejich-role","title":"Defaultn\u00ed soubory a jejich role","text":"<p>Kdy\u017e u\u017eivatel zad\u00e1 do prohl\u00ed\u017ee\u010de adresu webov\u00e9 str\u00e1nky bez specifikace konkr\u00e9tn\u00edho souboru (nap\u0159. <code>http://www.stranka.cz</code>), IIS hled\u00e1 v ko\u0159enov\u00e9m adres\u00e1\u0159i webu tzv. \"defaultn\u00ed soubory\" (default documents). To jsou soubory, kter\u00e9 se automaticky na\u010dtou a zobraz\u00ed u\u017eivateli. Mezi nej\u010dast\u011bj\u0161\u00ed defaultn\u00ed soubory pat\u0159\u00ed <code>index.html</code>, <code>default.aspx</code> a <code>default.php</code>. Seznam defaultn\u00edch soubor\u016f lze v IIS konfigurovat, co\u017e umo\u017e\u0148uje p\u0159izp\u016fsobit chov\u00e1n\u00ed webov\u00e9ho serveru podle pot\u0159eb konkr\u00e9tn\u00ed webov\u00e9 aplikace.</p>"},{"location":"cviceni/cviceni7/#povoleni-prochazeni-webu-a-jeho-bezpecnostni-aspekty","title":"Povolen\u00ed proch\u00e1zen\u00ed webu a jeho bezpe\u010dnostn\u00ed aspekty","text":"<p>Ve v\u00fdchoz\u00edm nastaven\u00ed je proch\u00e1zen\u00ed adres\u00e1\u0159\u016f webu zak\u00e1z\u00e1no z bezpe\u010dnostn\u00edch d\u016fvod\u016f. To znamen\u00e1, \u017ee u\u017eivatel\u00e9 nemohou zobrazit seznam soubor\u016f a slo\u017eek v adres\u00e1\u0159i, pokud nen\u00ed v adrese specifikov\u00e1n konkr\u00e9tn\u00ed soubor. Povolen\u00ed proch\u00e1zen\u00ed webu m\u016f\u017ee v\u00e9st k odhalen\u00ed citliv\u00fdch informac\u00ed a zranitelnosti webov\u00e9 aplikace. Pro v\u00fdvojov\u00e9 \u00fa\u010dely m\u016f\u017ee b\u00fdt u\u017eite\u010dn\u00e9 toto nastaven\u00ed do\u010dasn\u011b povolit, ale v produk\u010dn\u00edm prost\u0159ed\u00ed se d\u016frazn\u011b nedoporu\u010duje.</p>"},{"location":"cviceni/cviceni7/#certifikaty-ssltls-a-zabezpeceni-komunikace","title":"Certifik\u00e1ty SSL/TLS a zabezpe\u010den\u00ed komunikace","text":"<p>Pro zabezpe\u010den\u00ed komunikace mezi webov\u00fdm serverem a u\u017eivateli se pou\u017e\u00edvaj\u00ed certifik\u00e1ty SSL/TLS (Secure Sockets Layer / Transport Layer Security). Tyto certifik\u00e1ty \u0161ifruj\u00ed data a ov\u011b\u0159uj\u00ed identitu webov\u00e9ho serveru, \u010d\u00edm\u017e chr\u00e1n\u00ed citliv\u00e9 informace, jako jsou hesla nebo platebn\u00ed \u00fadaje. IIS umo\u017e\u0148uje snadnou instalaci a spr\u00e1vu SSL/TLS certifik\u00e1t\u016f. Pro z\u00edsk\u00e1n\u00ed certifik\u00e1tu je nutn\u00e9 po\u017e\u00e1dat certifika\u010dn\u00ed autoritu (CA). Po instalaci certifik\u00e1tu je nutn\u00e9 nakonfigurovat IIS tak, aby pou\u017e\u00edval protokol HTTPS (Hypertext Transfer Protocol Secure) pro zabezpe\u010denou komunikaci.</p>"},{"location":"cviceni/cviceni7/#sprava-mime-typu-a-jejich-vyznam-pro-webove-aplikace","title":"Spr\u00e1va MIME typ\u016f a jejich v\u00fdznam pro webov\u00e9 aplikace","text":"<p>MIME typy (Multipurpose Internet Mail Extensions) ur\u010duj\u00ed, jak m\u00e1 webov\u00fd prohl\u00ed\u017ee\u010d zpracovat r\u016fzn\u00e9 typy soubor\u016f (nap\u0159. HTML, CSS, JavaScript, obr\u00e1zky). IIS umo\u017e\u0148uje p\u0159id\u00e1vat a upravovat MIME typy, co\u017e je d\u016fle\u017eit\u00e9 pro spr\u00e1vn\u00e9 fungov\u00e1n\u00ed webov\u00fdch aplikac\u00ed. Pokud nen\u00ed MIME typ pro konkr\u00e9tn\u00ed typ souboru spr\u00e1vn\u011b nastaven, m\u016f\u017ee doj\u00edt k chybn\u00e9mu zobrazen\u00ed obsahu v prohl\u00ed\u017ee\u010di. Nap\u0159\u00edklad, pokud nen\u00ed pro soubory JavaScript nastaven MIME typ application/javascript, prohl\u00ed\u017ee\u010d je m\u016f\u017ee interpretovat jako textov\u00e9 soubory a nespustit je.</p>"},{"location":"cviceni/cviceni7/#protokolovani","title":"Protokolov\u00e1n\u00ed","text":"<p>IIS zaznamen\u00e1v\u00e1 informace o p\u0159\u00edstupech k webov\u00e9mu serveru do protokol\u016f (log\u016f). Tyto protokoly mohou b\u00fdt u\u017eite\u010dn\u00e9 pro sledov\u00e1n\u00ed n\u00e1v\u0161t\u011bvnosti webu, diagnostiku probl\u00e9m\u016f a anal\u00fdzu chov\u00e1n\u00ed u\u017eivatel\u016f.</p>"},{"location":"cviceni/cviceni7/#overovani","title":"Ov\u011b\u0159ov\u00e1n\u00ed","text":"<p>IIS podporuje r\u016fzn\u00e9 metody ov\u011b\u0159ov\u00e1n\u00ed u\u017eivatel\u016f, jako je anonymn\u00ed ov\u011b\u0159ov\u00e1n\u00ed, ov\u011b\u0159ov\u00e1n\u00ed pomoc\u00ed Windows, ov\u011b\u0159ov\u00e1n\u00ed pomoc\u00ed formul\u00e1\u0159\u016f atd.</p>"},{"location":"cviceni/cviceni7/#isapi-filtry-a-rozsireni","title":"ISAPI filtry a roz\u0161\u00ed\u0159en\u00ed","text":"<p>ISAPI (Internet Server Application Programming Interface) filtry a roz\u0161\u00ed\u0159en\u00ed umo\u017e\u0148uj\u00ed roz\u0161i\u0159ovat funkcionalitu IIS. Filtry slou\u017e\u00ed k \u00faprav\u011b po\u017eadavk\u016f a odpov\u011bd\u00ed, zat\u00edmco roz\u0161\u00ed\u0159en\u00ed slou\u017e\u00ed k zpracov\u00e1n\u00ed konkr\u00e9tn\u00edch typ\u016f po\u017eadavk\u016f.</p>"},{"location":"cviceni/cviceni7/#fondy-aplikaci-application-pools","title":"Fondy aplikac\u00ed (Application Pools)","text":"<p>Fondy aplikac\u00ed jsou kl\u00ed\u010dovou sou\u010d\u00e1st\u00ed IIS, kter\u00e1 umo\u017e\u0148uje izolovat webov\u00e9 aplikace od sebe navz\u00e1jem. Ka\u017ed\u00e1 webov\u00e1 aplikace m\u016f\u017ee m\u00edt sv\u016fj vlastn\u00ed fond aplikac\u00ed s vlastn\u00edmi nastaven\u00edmi, jako je verze .NET Framework, identita procesu a nastaven\u00ed recyklace. To zaji\u0161\u0165uje, \u017ee pokud jedna aplikace sel\u017ee, neovlivn\u00ed to ostatn\u00ed aplikace na serveru.</p>"},{"location":"cviceni/cviceni7/#moduly-a-obsluzne-rutiny-modules-and-handlers","title":"Moduly a obslu\u017en\u00e9 rutiny (Modules and Handlers)","text":"<p>IIS pou\u017e\u00edv\u00e1 moduly a obslu\u017en\u00e9 rutiny k zpracov\u00e1n\u00ed po\u017eadavk\u016f. Moduly jsou komponenty, kter\u00e9 prov\u00e1d\u011bj\u00ed r\u016fzn\u00e9 \u00fakoly, jako je ov\u011b\u0159ov\u00e1n\u00ed, autorizace a protokolov\u00e1n\u00ed. Obslu\u017en\u00e9 rutiny zpracov\u00e1vaj\u00ed po\u017eadavky na konkr\u00e9tn\u00ed typy soubor\u016f, jako jsou <code>.aspx</code>, <code>.php</code> nebo <code>.html</code>. Moduly a obslu\u017en\u00e9 rutiny jsou d\u016fle\u017eit\u00e9 pro konfiguraci IIS pro r\u016fzn\u00e9 typy webov\u00fdch aplikac\u00ed.</p>"},{"location":"cviceni/cviceni7/#prepisovani-adres-url-url-rewriting","title":"P\u0159episov\u00e1n\u00ed adres URL (URL Rewriting)","text":"<p>P\u0159episov\u00e1n\u00ed adres URL je technika, kter\u00e1 umo\u017e\u0148uje upravovat adresy URL, kter\u00e9 u\u017eivatel\u00e9 vid\u00ed v prohl\u00ed\u017ee\u010di, ani\u017e by se zm\u011bnila skute\u010dn\u00e1 adresa, na kterou se server dotazuje. To znamen\u00e1, \u017ee webov\u00fd server m\u016f\u017ee p\u0159ijmout po\u017eadavek na jednu adresu URL a intern\u011b ho p\u0159esm\u011brovat na jinou. Tato technika se \u010dasto pou\u017e\u00edv\u00e1 k zlep\u0161en\u00ed SEO (optimalizace pro vyhled\u00e1va\u010de), zjednodu\u0161en\u00ed adres URL pro u\u017eivatele a k implementaci r\u016fzn\u00fdch funkc\u00ed webov\u00e9 aplikace.</p>"},{"location":"cviceni/cviceni7/#hlavni-duvody-pro-pouziti-prepisovani-adres-url","title":"Hlavn\u00ed d\u016fvody pro pou\u017eit\u00ed p\u0159episov\u00e1n\u00ed adres URL","text":"<ul> <li> <p>SEO (Optimalizace pro vyhled\u00e1va\u010de)  P\u0159episov\u00e1n\u00ed adres URL umo\u017e\u0148uje vytv\u00e1\u0159et adresy URL, kter\u00e9 jsou pro vyhled\u00e1va\u010de srozumiteln\u011bj\u0161\u00ed a obsahuj\u00ed kl\u00ed\u010dov\u00e1 slova. Nap\u0159\u00edklad, m\u00edsto adresy URL <code>www.mujserver.cz/product.php?id=1236</code> lze pou\u017e\u00edt adresu URL <code>www.mujserver.cz/produkty/1236-nazev-produktu</code>. To zlep\u0161uje pozici webov\u00e9 str\u00e1nky ve v\u00fdsledc\u00edch vyhled\u00e1v\u00e1n\u00ed.</p> </li> <li> <p>Zjednodu\u0161en\u00ed adres URL pro u\u017eivatele  P\u0159episov\u00e1n\u00ed adres URL umo\u017e\u0148uje vytv\u00e1\u0159et kr\u00e1tk\u00e9 a srozumiteln\u00e9 adresy URL, kter\u00e9 si u\u017eivatel\u00e9 snadn\u011bji zapamatuj\u00ed a sd\u00edlej\u00ed. To zlep\u0161uje u\u017eivatelskou zku\u0161enost a usnad\u0148uje navigaci na webov\u00e9 str\u00e1nce.</p> </li> <li> <p>Implementace funkc\u00ed webov\u00e9 aplikace  P\u0159episov\u00e1n\u00ed adres URL lze pou\u017e\u00edt k implementaci r\u016fzn\u00fdch funkc\u00ed webov\u00e9 aplikace, jako je sm\u011brov\u00e1n\u00ed po\u017eadavk\u016f na r\u016fzn\u00e9 skripty, zpracov\u00e1n\u00ed chyb a implementace REST API. Nap\u0159\u00edklad lze pou\u017e\u00edt p\u0159episov\u00e1n\u00ed adres URL k p\u0159esm\u011brov\u00e1n\u00ed po\u017eadavk\u016f na r\u016fzn\u00e9 kontrolery na z\u00e1klad\u011b adresy URL.</p> </li> <li> <p>Zabezpe\u010den\u00ed  P\u0159episov\u00e1n\u00ed URL m\u016f\u017ee slou\u017eit i k maskov\u00e1n\u00ed skute\u010dn\u00fdch cest k soubor\u016fm na serveru, co\u017e m\u016f\u017ee zv\u00fd\u0161it bezpe\u010dnost.</p> </li> </ul>"},{"location":"cviceni/cviceni7/#jak-rewriting-funguje","title":"Jak Rewriting funguje","text":"<p>IIS nab\u00edz\u00ed modul pro p\u0159episov\u00e1n\u00ed adres URL, kter\u00fd umo\u017e\u0148uje definovat pravidla pro p\u0159episov\u00e1n\u00ed adres URL. Tato pravidla se obvykle definuj\u00ed pomoc\u00ed regul\u00e1rn\u00edch v\u00fdraz\u016f, kter\u00e9 se pou\u017e\u00edvaj\u00ed k porovn\u00e1n\u00ed adres URL. Pokud adresa URL odpov\u00edd\u00e1 pravidlu, server ji p\u0159ep\u00ed\u0161e na novou adresu URL. D\u016fle\u017eit\u00e9 je si uv\u011bdomit rozd\u00edl mezi p\u0159esm\u011brov\u00e1n\u00edm a p\u0159eps\u00e1n\u00edm adresy.</p> <ul> <li>P\u0159esm\u011brov\u00e1n\u00ed (redirect) znamen\u00e1, \u017ee u\u017eivatel je p\u0159esm\u011brov\u00e1n na novou adresu a tato adresa se zobraz\u00ed v adresn\u00edm \u0159\u00e1dku prohl\u00ed\u017ee\u010de.</li> <li>P\u0159eps\u00e1n\u00ed (rewrite) znamen\u00e1, \u017ee adresa je p\u0159eps\u00e1na pouze intern\u011b na serveru a u\u017eivatel vid\u00ed v adresn\u00edm \u0159\u00e1dku p\u016fvodn\u00ed adresu.</li> </ul>"},{"location":"cviceni/cviceni7/#prakticke-vyuziti","title":"Praktick\u00e9 vyu\u017eit\u00ed","text":"<p>P\u0159episov\u00e1n\u00ed adres URL se \u010dasto pou\u017e\u00edv\u00e1 k implementaci REST API, kde se adresy URL pou\u017e\u00edvaj\u00ed k identifikaci zdroj\u016f dat. Lze ho tak\u00e9 pou\u017e\u00edt k implementaci v\u00edcejazy\u010dn\u00fdch webov\u00fdch str\u00e1nek, kde se adresy URL pou\u017e\u00edvaj\u00ed k identifikaci jazyka nebo nap\u0159. pro implementaci takzvan\u00fdch \"hezk\u00fdch URL\" v redak\u010dn\u00edch syst\u00e9mech.</p>"},{"location":"cviceni/cviceni7/#zabezpeceni-security","title":"Zabezpe\u010den\u00ed (Security)","text":"<p>Zabezpe\u010den\u00ed je kl\u00ed\u010dov\u00fdm aspektem spr\u00e1vy webov\u00e9ho serveru. Existuj\u00ed dobr\u00e9 techniky zabezpe\u010den\u00ed webov\u00fdch aplikac\u00ed, jako je prevence \u00fatok\u016f SQL injection, cross-site scripting (XSS) a cross-site request forgery (CSRF). IIS nab\u00edz\u00ed r\u016fzn\u00e9 funkce pro zabezpe\u010den\u00ed webov\u00fdch aplikac\u00ed, jako je ov\u011b\u0159ov\u00e1n\u00ed, autorizace a filtrov\u00e1n\u00ed po\u017eadavk\u016f, ov\u0161em hlavn\u00ed t\u00edha zabezpe\u010den\u00ed serveru proti zm\u00edn\u011bn\u00fdm \u00fatok\u016fm le\u017e\u00ed p\u0159edev\u0161\u00edm na aplikaci samotn\u00e9.</p>"},{"location":"cviceni/cviceni7/#sql-injection-sqli","title":"SQL Injection (SQLI)","text":"<ul> <li>Princip \u00fatoku  \u00dato\u010dn\u00edk vkl\u00e1d\u00e1 \u0161kodliv\u00fd SQL k\u00f3d do vstupn\u00edch pol\u00ed aplikace, co\u017e m\u016f\u017ee v\u00e9st k neopr\u00e1vn\u011bn\u00e9mu p\u0159\u00edstupu k datab\u00e1zi.</li> <li>Techniky obrany Prepared Statements (Parametrizovan\u00e9 dotazy) \u2013 odd\u011bluj\u00ed SQL k\u00f3d od dat, co\u017e znemo\u017e\u0148uje interpretaci u\u017eivatelsk\u00e9ho vstupu jako SQL k\u00f3du. Validace a sanitizace vstup\u016f \u2013 kontrola a \u010di\u0161t\u011bn\u00ed u\u017eivatelsk\u00fdch vstup\u016f p\u0159ed jejich pou\u017eit\u00edm v SQL dotazech. Omezen\u00ed pr\u00e1v datab\u00e1zov\u00e9ho u\u017eivatele \u2013 ud\u011blov\u00e1n\u00ed minim\u00e1ln\u00edch nutn\u00fdch pr\u00e1v datab\u00e1zov\u00e9mu u\u017eivateli, kter\u00fd pou\u017e\u00edv\u00e1 webov\u00e1 aplikace.</li> </ul> <p>Zabezpe\u010den\u00ed webov\u00fdch aplikac\u00ed je komplexn\u00ed probl\u00e9m, kter\u00fd vy\u017eaduje v\u00edcevrstv\u00fd p\u0159\u00edstup. IIS m\u016f\u017ee poskytnout ur\u010dit\u00e9 z\u00e1kladn\u00ed bezpe\u010dnostn\u00ed funkce, ale hlavn\u00ed odpov\u011bdnost za ochranu proti XSS a CSRF \u00fatok\u016fm spo\u010d\u00edv\u00e1 na v\u00fdvoj\u00e1\u0159\u00edch webov\u00fdch aplikac\u00ed. Je d\u016fle\u017eit\u00e9 pravideln\u011b aktualizovat IIS a opera\u010dn\u00ed syst\u00e9m Windows, aby se opravily zn\u00e1m\u00e9 zranitelnosti.</p>"},{"location":"cviceni/cviceni7/#cross-site-scripting-xss","title":"Cross-site scripting (XSS)","text":"<ul> <li>Princip \u00fatoku \u00dato\u010dn\u00edk vkl\u00e1d\u00e1 \u0161kodliv\u00fd JavaScript k\u00f3d do webov\u00e9 str\u00e1nky, kter\u00fd se spust\u00ed v prohl\u00ed\u017ee\u010di jin\u00e9ho u\u017eivatele.</li> <li>Techniky obrany Sanitizace v\u00fdstup\u016f \u2013 O\u0161et\u0159en\u00ed dat, kter\u00e1 se zobrazuj\u00ed na webov\u00e9 str\u00e1nce, aby se zabr\u00e1nilo spu\u0161t\u011bn\u00ed \u0161kodliv\u00e9ho k\u00f3du. Content Security Policy (CSP) \u2013 definov\u00e1n\u00ed pravidel, kter\u00e1 ur\u010duj\u00ed, odkud se mohou na\u010d\u00edtat zdroje (JavaScript, CSS, obr\u00e1zky). Omezuje spou\u0161t\u011bn\u00ed skript\u016f z ned\u016fv\u011bryhodn\u00fdch zdroj\u016f. HTTP-only cookies \u2013 nastaven\u00ed cookies tak, aby k nim nem\u011bl p\u0159\u00edstup JavaScript. Chr\u00e1n\u00ed cookies p\u0159ed kr\u00e1de\u017e\u00ed pomoc\u00ed XSS. Ov\u011b\u0159ov\u00e1n\u00ed vstup\u016f \u2013 stejn\u011b jako u SQLI je nutn\u00e9 ov\u011b\u0159ovat vstupy u\u017eivatel\u016f.</li> </ul>"},{"location":"cviceni/cviceni7/#cross-site-request-forgery-csrf","title":"Cross-Site Request Forgery (CSRF)","text":"<ul> <li>Princip \u00fatoku \u00dato\u010dn\u00edk p\u0159im\u011bje ob\u011b\u0165, kter\u00e1 je p\u0159ihl\u00e1\u0161ena k webov\u00e9 aplikaci, aby provedla necht\u011bnou akci na t\u00e9to aplikaci.</li> <li>Techniky obrany CSRF tokeny \u2013 generov\u00e1n\u00ed n\u00e1hodn\u00fdch token\u016f, kter\u00e9 se odes\u00edlaj\u00ed s formul\u00e1\u0159i. Server ov\u011b\u0159uje, zda se token shoduje s tokenem ulo\u017een\u00fdm v relaci u\u017eivatele. SameSite cookies \u2013 nastaven\u00ed cookies tak, aby se odes\u00edlaly pouze p\u0159i po\u017eadavc\u00edch ze stejn\u00e9 dom\u00e9ny. Omezuje mo\u017enost zneu\u017eit\u00ed cookies p\u0159i CSRF \u00fatoku. Ov\u011b\u0159ov\u00e1n\u00ed hlavi\u010dky Referer \u2013 kontrola hlavi\u010dky Referer, kter\u00e1 ud\u00e1v\u00e1, odkud byl po\u017eadavek odesl\u00e1n. Je to ov\u0161em slab\u00e1 ochrana, proto\u017ee hlavi\u010dka Referer m\u016f\u017ee b\u00fdt podvr\u017eena. Dvojit\u00e1 ochrana cookies \u2013 tato metoda zahrnuje odesl\u00e1n\u00ed CSRF tokenu jako cookie a tak\u00e9 jako hodnotu formul\u00e1\u0159e. Server pak ov\u011b\u0159uje, zda se ob\u011b hodnoty shoduj\u00ed.</li> </ul>"},{"location":"cviceni/cviceni7/#rozdily-na-linuxu","title":"Rozd\u00edly na Linuxu","text":"<p>Na Linuxu se pro hostov\u00e1n\u00ed webov\u00fdch str\u00e1nek nej\u010dast\u011bji pou\u017e\u00edv\u00e1 webov\u00fd server Apache nebo Nginx. Konfigurace t\u011bchto server\u016f se v\u00fdznamn\u011b li\u0161\u00ed od IIS. M\u00edsto grafick\u00e9ho rozhran\u00ed se pou\u017e\u00edvaj\u00ed konfigura\u010dn\u00ed soubory (nap\u0159. httpd.conf pro Apache, nginx.conf pro Nginx). IIS ve Windows je v z\u00e1sad\u011b tak\u00e9 mo\u017eno konfigurovat pomoc\u00ed bash soubor\u016f spou\u0161t\u011bn\u00fdch p\u0159es PowerShell (a webov\u00ed administr\u00e1to\u0159i touto cestou spravuj\u00ed zpravidla v\u011bt\u0161\u00ed mno\u017estv\u00ed stanic s obdobnou z\u00e1kladn\u00ed konfigurac\u00ed), ale nen\u00ed to b\u011b\u017en\u011b roz\u0161\u00ed\u0159en\u00fd p\u0159\u00edstup.</p> <p>Na Linuxu se pro spr\u00e1vu certifik\u00e1t\u016f SSL/TLS obvykle pou\u017e\u00edv\u00e1 n\u00e1stroj Certbot. Pro ov\u011b\u0159ov\u00e1n\u00ed u\u017eivatel\u016f se pou\u017e\u00edvaj\u00ed moduly jako mod_auth_basic pro Apache nebo ngx_http_auth_basic_module pro Nginx. Protokoly se ukl\u00e1daj\u00ed do textov\u00fdch soubor\u016f, kter\u00e9 se nach\u00e1zej\u00ed v adres\u00e1\u0159i /var/log.</p> <p>Linux nab\u00edz\u00ed v\u011bt\u0161\u00ed flexibilitu a kontrolu nad konfigurac\u00ed webov\u00e9ho serveru, ale vy\u017eaduje hlub\u0161\u00ed znalosti p\u0159\u00edkazov\u00e9ho \u0159\u00e1dku a konfigura\u010dn\u00edch soubor\u016f. IIS je na druhou stranu u\u017eivatelsky p\u0159\u00edv\u011btiv\u011bj\u0161\u00ed a snadn\u011bji se spravuje pomoc\u00ed grafick\u00e9ho rozhran\u00ed, co\u017e ov\u0161em m\u016f\u017ee n\u011bkomu p\u0159ij\u00edt jako ve v\u00fdsledku m\u00e9n\u011b komfortn\u00ed zp\u016fsob vy\u017eaduj\u00edc\u00ed mno\u017estv\u00ed \u010dasu a klik\u00e1n\u00ed v mnoha navz\u00e1jem odli\u0161n\u00fdch menu.</p> <p></p>"},{"location":"cviceni/cviceni7/#dns-sprava-domen","title":"DNS \u2013 spr\u00e1va dom\u00e9n","text":"<p>DNS (Domain Name System) je decentralizovan\u00fd syst\u00e9m dom\u00e9nov\u00fdch jmen, kter\u00fd p\u0159ev\u00e1d\u00ed lidsky srozumiteln\u00e9 dom\u00e9nov\u00e9 n\u00e1zvy (nap\u0159. <code>www.google.com</code>) na IP adresy (nap\u0159. <code>172.217.168.196</code>), kter\u00e9 po\u010d\u00edta\u010de pou\u017e\u00edvaj\u00ed ke komunikaci. V\u0161e si lze p\u0159edstavit jako telefonn\u00ed seznam internetu. Kdy\u017e zad\u00e1me dom\u00e9nov\u00fd n\u00e1zev do webov\u00e9ho prohl\u00ed\u017ee\u010de, po\u010d\u00edta\u010d ode\u0161le dotaz na DNS server, kter\u00fd vyhled\u00e1 odpov\u00eddaj\u00edc\u00ed IP adresu a vr\u00e1t\u00ed ji zp\u011bt. Bez DNS by musel u\u017eivatel zad\u00e1vat slo\u017eit\u00e9 IP adresy, co\u017e by bylo pro praktick\u00e9 pou\u017e\u00edv\u00e1n\u00ed webu velmi ne\u0161ikovn\u00e9.</p> <p>V hierarchii DNS hraj\u00ed kl\u00ed\u010dovou roli t\u0159i typy server\u016f: ko\u0159enov\u00e9, autoritativn\u00ed a rekurzivn\u00ed. Ko\u0159enov\u00e9 servery stoj\u00ed na sam\u00e9m vrcholu a slou\u017e\u00ed jako v\u00fdchoz\u00ed bod pro p\u0159eklad dom\u00e9nov\u00fdch jmen, sm\u011bruj\u00ed dotazy na autoritativn\u00ed servery pro dom\u00e9ny nejvy\u0161\u0161\u00ed \u00farovn\u011b (TLD), jako jsou <code>.com</code> nebo <code>.cz</code>. Autoritativn\u00ed servery uchov\u00e1vaj\u00ed definitivn\u00ed informace o konkr\u00e9tn\u00edch dom\u00e9n\u00e1ch a jejich subdom\u00e9n\u00e1ch, poskytuj\u00ed IP adresy a dal\u0161\u00ed z\u00e1znamy pro dan\u00e9 dom\u00e9nov\u00e9 jm\u00e9no. Rekurzivn\u00ed servery funguj\u00ed jako prost\u0159edn\u00edci mezi u\u017eivateli a autoritativn\u00edmi servery, p\u0159ij\u00edmaj\u00ed dotazy od u\u017eivatel\u016f, proch\u00e1zej\u00ed hierarchii DNS a ukl\u00e1daj\u00ed v\u00fdsledky do mezipam\u011bti (cache), \u010d\u00edm\u017e urychluj\u00ed budouc\u00ed dotazy na stejn\u00e1 dom\u00e9nov\u00e1 jm\u00e9na. Tyto t\u0159i typy server\u016f spolupracuj\u00ed, aby zajistily efektivn\u00ed a spolehliv\u00fd p\u0159eklad dom\u00e9nov\u00fdch jmen na IP adresy, co\u017e je nezbytn\u00e9 pro fungov\u00e1n\u00ed internetu. </p>"},{"location":"cviceni/cviceni7/#prubeh-prekladu-domenoveho-jmena-na-ip-adresu","title":"Pr\u016fb\u011bh p\u0159ekladu dom\u00e9nov\u00e9ho jm\u00e9na na IP adresu","text":"<ul> <li>U\u017eivatel zad\u00e1 dom\u00e9nov\u00fd n\u00e1zev do webov\u00e9ho prohl\u00ed\u017ee\u010de.</li> <li>Po\u010d\u00edta\u010d u\u017eivatele ode\u0161le dotaz na rekurzivn\u00ed DNS server.</li> <li>Rekurzivn\u00ed DNS server se dot\u00e1\u017ee ko\u0159enov\u00fdch DNS server\u016f.</li> <li>Ko\u0159enov\u00e9 DNS servery vr\u00e1t\u00ed adresu autoritativn\u00edch DNS server\u016f pro dom\u00e9nu nejvy\u0161\u0161\u00ed \u00farovn\u011b (nap\u0159. .com).</li> <li>Rekurzivn\u00ed DNS server se dot\u00e1\u017ee autoritativn\u00edch DNS server\u016f pro dom\u00e9nu nejvy\u0161\u0161\u00ed \u00farovn\u011b.</li> <li>Autoritativn\u00ed DNS servery vr\u00e1t\u00ed adresu autoritativn\u00edch DNS server\u016f pro danou dom\u00e9nu.</li> <li>Rekurzivn\u00ed DNS server se dot\u00e1\u017ee autoritativn\u00edch DNS server\u016f pro danou dom\u00e9nu.</li> <li>Autoritativn\u00ed DNS servery vr\u00e1t\u00ed IP adresu odpov\u00eddaj\u00edc\u00ed dom\u00e9nov\u00e9mu n\u00e1zvu.</li> <li>Rekurzivn\u00ed DNS server vr\u00e1t\u00ed IP adresu po\u010d\u00edta\u010di u\u017eivatele.</li> <li>Po\u010d\u00edta\u010d u\u017eivatele se p\u0159ipoj\u00ed k webov\u00e9mu serveru pomoc\u00ed IP adresy.</li> </ul> <p>DNS syst\u00e9m s\u00e1m o sob\u011b nen\u00ed koncipov\u00e1n jako n\u011bjak\u00fd bezpe\u010dnostn\u00ed mechanismus, a proto nen\u00ed automaticky chr\u00e1n\u011bn proti v\u0161em zranitelnostem. Nicm\u00e9n\u011b, existuj\u00ed bezpe\u010dnostn\u00ed roz\u0161\u00ed\u0159en\u00ed a postupy, kter\u00e9 zvy\u0161uj\u00ed jeho odolnost.</p>"},{"location":"cviceni/cviceni7/#zranitelnosti-dns","title":"Zranitelnosti DNS","text":"<p>DNS spoofing/cache poisoning   \u00dato\u010dn\u00edk podvrhne fale\u0161n\u00e9 DNS z\u00e1znamy, kter\u00e9 se ulo\u017e\u00ed do mezipam\u011bti DNS serveru. To m\u016f\u017ee v\u00e9st k p\u0159esm\u011brov\u00e1n\u00ed u\u017eivatel\u016f na \u0161kodliv\u00e9 webov\u00e9 str\u00e1nky.</p> <p>\u00datoky typu Man-in-the-middle (MitM) \u00dato\u010dn\u00edk zachyt\u00ed komunikaci mezi u\u017eivatelem a DNS serverem a manipuluje s n\u00ed.</p> <p>DDoS \u00fatoky (Distributed Denial of Service) \u00dato\u010dn\u00edk zahlt\u00ed DNS servery velk\u00fdm mno\u017estv\u00edm po\u017eadavk\u016f, \u010d\u00edm\u017e je znep\u0159\u00edstupn\u00ed.</p>"},{"location":"cviceni/cviceni7/#bezpecnostni-opatreni","title":"Bezpe\u010dnostn\u00ed opat\u0159en\u00ed","text":"<p>DNSSEC (DNS Security Extensions) Roz\u0161\u00ed\u0159en\u00ed DNS protokolu, kter\u00e9 p\u0159id\u00e1v\u00e1 digit\u00e1ln\u00ed podpisy k DNS z\u00e1znam\u016fm. To umo\u017e\u0148uje ov\u011b\u0159it integritu a autenticitu DNS dat.</p> <p>DNS over HTTPS (DoH) a DNS over TLS (DoT) Protokoly, kter\u00e9 \u0161ifruj\u00ed komunikaci mezi u\u017eivatelem a DNS serverem, \u010d\u00edm\u017e chr\u00e1n\u00ed p\u0159ed \u00fatoky typu MitM.</p> <p>D\u00e1le nap\u0159. Ov\u011b\u0159ov\u00e1n\u00ed certifik\u00e1t\u016f U\u017eivatel\u00e9 by m\u011bli ov\u011b\u0159ovat certifik\u00e1ty webov\u00fdch str\u00e1nek, aby se ujistili, \u017ee se p\u0159ipojuj\u00ed k legitimn\u00edm server\u016fm.</p> <p>Pou\u017e\u00edv\u00e1n\u00ed VPN Virtu\u00e1ln\u00ed priv\u00e1tn\u00ed s\u00edt\u011b (VPN) mohou \u0161ifrovat komunikaci a maskovat IP adresu u\u017eivatele, \u010d\u00edm\u017e zvy\u0161uj\u00ed bezpe\u010dnost.</p>"},{"location":"cviceni/cviceni7/#dns-zaznamy","title":"DNS z\u00e1znamy","text":"<p>DNS z\u00e1znamy jsou sekvence ulo\u017een\u00e9 na DNS serverech, kter\u00e9 obsahuj\u00ed informace o dom\u00e9nov\u00fdch n\u00e1zvech a jejich odpov\u00eddaj\u00edc\u00edch IP adres\u00e1ch. Existuje n\u011bkolik typ\u016f DNS z\u00e1znam\u016f, z nich\u017e ka\u017ed\u00fd slou\u017e\u00ed k jin\u00e9mu \u00fa\u010delu:</p> Typ z\u00e1znamu Popis P\u0159\u00edklad pou\u017eit\u00ed A Mapuje dom\u00e9nov\u00fd n\u00e1zev na IPv4 adresu <code>www.mujserver.cz. A 155.112.159.74</code> AAAA Mapuje dom\u00e9nov\u00fd n\u00e1zev na IPv6 adresu <code>www.mujserver.cz. AAAA 2001:0db8:85a3:0000:0000:8a2e:0370:7334</code> CNAME Vytvo\u0159\u00ed alias pro dom\u00e9nov\u00fd n\u00e1zev <code>www.mujserver.cz. CNAME mujserver.cz.</code> MX Ur\u010duje po\u0161tovn\u00ed server pro e-maily <code>mujserver.cz. MX 10 mail.mujserver.cz.</code> NS Ur\u010duje autoritativn\u00ed DNS servery <code>mujserver.cz. NS ns1.forpsi.cz.</code> TXT Ukl\u00e1d\u00e1 libovoln\u00fd textov\u00fd \u0159et\u011bzec <code>mujserver.cz. TXT \"v=spf1 mx ~all\"</code> SRV Ur\u010duje um\u00edst\u011bn\u00ed server\u016f pro slu\u017eby <code>_sip._tcp.mujserver.cz. SRV 0 5 5060 sip.mujserver.cz.</code> TLSA Ov\u011b\u0159uje certifik\u00e1ty TLS/SSL <code>_443._tcp.mujserver.cz. TLSA 3 0 1 ...</code>"},{"location":"cviceni/cviceni8/","title":"ArcGIS for JavaScript \u2013 z\u00e1klady","text":""},{"location":"cviceni/cviceni8/#arcgis-api-for-javascript-zaklady","title":"ArcGIS API for JavaScript \u2013 z\u00e1klady","text":"<p>ArcGIS API for JavaScript je v\u00fdkonn\u00fd n\u00e1stroj pro vytv\u00e1\u0159en\u00ed interaktivn\u00edch webov\u00fdch mapov\u00fdch aplikac\u00ed. V dal\u0161\u00edch cvi\u010den\u00edch se nau\u010d\u00edme z\u00e1klady pr\u00e1ce s t\u00edmto API, od vytvo\u0159en\u00ed jednoduch\u00e9 mapy a vlo\u017een\u00ed do HTML str\u00e1nky a\u017e po pokro\u010dilej\u0161\u00ed customizace.</p> <p>\u00davod \u2013 pot\u0159ebn\u00e9 str\u00e1nky</p> <ul> <li>Za\u010dneme vytvo\u0159en\u00edm z\u00e1kladn\u00ed HTML str\u00e1nky (soubor <code>index.html</code>), do kter\u00e9 chceme vlo\u017eit mapu.</li> <li>Vytvo\u0159\u00edme <code>&lt;div&gt;</code> element s identifik\u00e1torem \"mapDiv\", kter\u00fd bude slou\u017eit jako kontejner pro mapu.</li> <li>P\u0159id\u00e1me JavaScript k\u00f3d, kter\u00fd vytvo\u0159\u00ed mapu.</li> <li>Pou\u017eijeme modul esri/Map k vytvo\u0159en\u00ed instance mapy.</li> <li>Nastav\u00edme z\u00e1kladn\u00ed mapu (basemap) pomoc\u00ed vlastnosti basemap.</li> <li>Vytvo\u0159\u00edme instanci esri/views/MapView a nastav\u00edme kontejner mapy pomoc\u00ed vlastnosti container.</li> <li>Nastav\u00edme st\u0159ed mapy (center) a \u00farove\u0148 p\u0159ibl\u00ed\u017een\u00ed (zoom).</li> <li>Vlo\u017e\u00edme JavaScript k\u00f3d do souboru <code>script.js</code>.</li> <li>P\u0159id\u00e1me odkaz na ArcGIS API for JavaScript a na soubor se skriptem v <code>&lt;head&gt;</code> elementu HTML str\u00e1nky.</li> </ul> <p>Po otev\u0159en\u00ed HTML souboru ve webov\u00e9m prohl\u00ed\u017ee\u010di se zobraz\u00ed interaktivn\u00ed mapa.</p> Stav k\u00f3du po vlo\u017een\u00ed mapy do str\u00e1nky a jej\u00ed inicializaci  index.htmlscript.js <pre><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n    &lt;meta charset=\"utf-8\" /&gt;\n    &lt;title&gt;P\u011bkn\u00e1 mapa \u010d. I&lt;/title&gt;\n    &lt;link rel=\"stylesheet\" href=\"https://js.arcgis.com/4.28/esri/themes/light/main.css\"&gt;\n    &lt;script src=\"https://js.arcgis.com/4.28/\"&gt;&lt;/script&gt;     &lt;!-- odkaz na knihovny a skripty Esri   --&gt;\n    &lt;script src=\"script.js\"&gt;&lt;/script&gt;\n    &lt;style&gt;\n        #mapDiv {\n            width: 60%;\n            height: 600px;\n\n        }\n    &lt;/style&gt;\n\n&lt;/head&gt;\n&lt;body&gt;\n    &lt;h1&gt;Prvn\u00ed mapa vytvo\u0159en\u00e1 v ArcGIS API for JavaScript&lt;/h1&gt;\n    &lt;div id=\"mapDiv\"&gt;&lt;/div&gt;\n\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre> <pre><code>require([\"esri/Map\", \"esri/views/MapView\"], function(Map, MapView) {\n    const map = new Map({\n        basemap: \"streets\"      // rastrov\u00e1 basemapa, lze jinak volit nap\u0159. topo, satellite, hybrid, gray, oceans atd.\n                                // nebo vektorov\u00e9 nap\u0159. streets-vector, topo-vector, gray-vector apod.\n    });\n    const view = new MapView({\n        container: \"mapDiv\",\n        map: map,\n        center: [14.42, 50.09], // sou\u0159adnice Prahy\n        zoom: 10\n    });\n});\n</code></pre> <p>Tento k\u00f3d vytvo\u0159\u00ed jednoduchou mapu s podkladovou mapou streets a zobraz\u00ed Prahu.</p> <p>Pod\u00edvejme se nyn\u00ed na sekci require. Zde jsou b\u011b\u017en\u011b definov\u00e1ny moduly, kter\u00e9 mapov\u00e1 aplikace vy\u017eaduje ke sv\u00e9mu b\u011bhu. Mezi d\u016fle\u017eit\u00e9 moduly pat\u0159\u00ed nap\u0159.:</p> Modul Popis P\u0159\u00edklad pou\u017eit\u00ed <code>esri/Map</code> Vytvo\u0159en\u00ed mapy <code>var map = new Map({ basemap: \"streets\" });</code> <code>esri/views/MapView</code> Zobrazen\u00ed 2D mapy <code>var view = new MapView({ container: \"viewDiv\", map: map });</code> <code>esri/views/SceneView</code> Zobrazen\u00ed 3D sc\u00e9ny <code>var view = new SceneView({ container: \"viewDiv\", map: map });</code> <code>esri/layers/FeatureLayer</code> Zobrazen\u00ed vektorov\u00e9 vrstvy prvk\u016f <code>var layer = new FeatureLayer({ url: \"https://.../FeatureServer/0\" });</code> <code>esri/layers/MapImageLayer</code> Zobrazen\u00ed dynamick\u00e9 mapov\u00e9 slu\u017eby <code>var layer = new MapImageLayer({ url: \"https://.../MapServer\" });</code> <code>esri/layers/ImageryLayer</code> Zobrazen\u00ed rastrov\u00e9 vrstvy sn\u00edmk\u016f <code>var layer = new ImageryLayer({ url: \"https://.../ImageServer\" });</code> <code>esri/layers/GraphicsLayer</code> Zobrazen\u00ed grafick\u00fdch prvk\u016f <code>var layer = new GraphicsLayer();</code> <code>esri/geometry/*</code> Pr\u00e1ce s geometriemi (body, linie, polygony) <code>var point = new Point({ x: 10, y: 20 });</code> <code>esri/symbols/*</code> Nastaven\u00ed symbol\u016f pro prvky <code>var symbol = new SimpleMarkerSymbol({ color: \"red\" });</code> <code>esri/widgets/*</code> P\u0159id\u00e1n\u00ed widget\u016f pro ovl\u00e1d\u00e1n\u00ed mapy <code>var legend = new Legend({ view: view });</code> <code>esri/tasks/*</code> Geoprocessingov\u00e9 \u00falohy <code>var task = new GeoprocessingTask({ url: \"https://.../GPServer/Buffer\" });</code> <code>esri/Graphic</code> Vytvo\u0159en\u00ed grafick\u00e9ho prvku <code>var graphic = new Graphic({ geometry: point, symbol: symbol });</code> <code>esri/PopupTemplate</code> Vytvo\u0159en\u00ed popup okna <code>var template = new PopupTemplate({ title: \"Atributy\", content: \"{*}\" });</code> <code>esri/core/watchUtils</code> Sledov\u00e1n\u00ed zm\u011bn vlastnost\u00ed objekt\u016f <code>watchUtils.when(view, \"stationary\", function() { ... });</code> <code>dojo/domReady!</code> Zajist\u00ed, \u017ee se k\u00f3d spust\u00ed a\u017e kompletn\u00edm na\u010dten\u00ed DOM \u2013\u2013"},{"location":"cviceni/cviceni8/#pridani-rastrove-vrstvy","title":"P\u0159id\u00e1n\u00ed rastrov\u00e9 vrstvy","text":"<p>P\u0159id\u00e1n\u00ed vrstvy do mapy:</p> <p>V JavaScriptov\u00e9m k\u00f3du aplikace pou\u017e\u00edv\u00e1me modul <code>esri/layers/MapImageLayer</code> pro na\u010dten\u00ed dynamick\u00e9 mapov\u00e9 slu\u017eby nebo modul <code>esri/layers/FeatureLayer</code> pro na\u010dten\u00ed vektorov\u00e9 vrstvy prvk\u016f.</p> <p>Zde je p\u0159\u00edklad k\u00f3du pro na\u010dten\u00ed dynamick\u00e9 mapov\u00e9 slu\u017eby ortofota \u010c\u00daZK:</p> Vlo\u017een\u00ed dynamick\u00e9 rastrov\u00e9 vrstvy script.js <pre><code>require([\n\"esri/Map\",\n\"esri/views/MapView\",\n\"esri/layers/MapImageLayer\",\n\n], function(Map, MapView, MapImageLayer) {\n\nvar map = new Map({\n    basemap: \"streets\"     // rastrov\u00e1 basemapa, lze jinak volit nap\u0159. topo, satellite, hybrid, gray, oceans atd.\n                           // nebo vektorov\u00e9 nap\u0159. streets-vector, topo-vector, gray-vector apod.\n});\n\nvar view = new MapView({\n    container: \"viewDiv\",\n    map: map,\n    center: [14.42, 50.09], // sou\u0159adnice Prahy\n    zoom: 12\n});\n\nvar Ortofoto = new MapImageLayer({\n    url: \"https://ags.cuzk.cz/arcgis1/rest/services/ORTOFOTO_WM/MapServer\"\n});\n\nmap.add(Ortofoto);          // p\u0159id\u00e1n\u00ed k vykreslen\u00ed do mapy\n});\n</code></pre> <p>Nyn\u00ed bychom r\u00e1di vytvo\u0159ili mapu, kter\u00e1 bude obsahovat jako basemap vrstvu ortofota nap\u0159. s obcemi z Arc\u010cR. M\u016f\u017eeme vyu\u017e\u00edt toho, \u017ee lze v aplikac\u00edch pracovat i s vrstvami v ArccGIS Online nebo Portal for ArcGIS. Tyto vrstvy vol\u00e1me pomoc\u00ed tzv. Portal ID, kter\u00e9 lze zjistit p\u0159es REST rozhran\u00ed dan\u00e9 vrstvy.</p> <p>K\u00f3d bude vypadat n\u00e1sledovn\u011b:</p> Vlo\u017een\u00ed vlastn\u00ed basemapy script.js <pre><code>require([\n\"esri/Map\",\n\"esri/views/MapView\",\n\"esri/layers/MapImageLayer\",\n\"esri/layers/FeatureLayer\", //nov\u011b: importujeme vektorovou vrstvu\n\"esri/Basemap\", // nov\u011b: importujeme Basemap\n\"esri/portal/PortalItem\" //nov\u011b: importujeme polo\u017eku z ArcGIS Online\n], function(Map, MapView, MapImageLayer, FeatureLayer, Basemap) {\n\n// Vytvo\u0159en\u00ed rastrov\u00e9 vrstvy pro ortofoto\nconst ortofoto = new MapImageLayer({\n    url: \"https://ags.cuzk.cz/arcgis1/rest/services/ORTOFOTO_WM/MapServer\",\n    title: \"Ortofoto \u010cR\"\n});\n\n// Vytvo\u0159en\u00ed vektorov\u00e9 vrstvy obc\u00ed pomoc\u00ed ItemID\nconst obce = new FeatureLayer({\n    portalItem: {\n    id: \"1838754f565b47658477ab75ea2eced0\"\n    },\n    title: \"Obce \u010cR\"\n});\n\n// Vytvo\u0159en\u00ed vlastn\u00ed basemapy\nconst vlastniBasemap = new Basemap({\n    baseLayers: [ortofoto, obce], // Vlo\u017e\u00edme ob\u011b vrstvy do baseLayers\n    title: \"Ortofoto + hranice obc\u00ed\", // N\u00e1zev na\u0161\u00ed vlastn\u00ed basemapy\n    id: \"ortofoto-obce\" // Unik\u00e1tn\u00ed ID basemapy\n});\n\n// Vytvo\u0159en\u00ed mapy a nastaven\u00ed vlastn\u00ed basemapy\nconst map = new Map({\n    basemap: vlastniBasemap // Pou\u017eijeme na\u0161i vlastn\u00ed basemapu\n});\n\nvar view = new MapView({\n    container: \"mapDiv\",\n    map: map,\n    center: [14.42, 50.09], // sou\u0159adnice Prahy\n    zoom: 12\n});\n\n});\n</code></pre> <p>Abychom u\u017eivateli umo\u017enili si podkladovou mapu p\u0159epnout na jinou, ne\u017e jsme mu pr\u00e1v\u011b na\u010detli, je mo\u017en\u00e9 vlo\u017eit kus k\u00f3du pro p\u0159ep\u00edna\u010d basemap.</p> <pre><code>\"esri/widgets/BasemapGallery\"\n\n...\n\n// Vytvo\u0159en\u00ed instance BasemapGallery\nconst basemapGallery = new BasemapGallery({\n    view: view,\n        source: [ // nastaven\u00ed zdroje basemap \u2013 m\u016f\u017eeme p\u0159idat na\u0161i vlastn\u00ed\n        vlastniBasemap,\n        \"topo-vector\",\n        \"satellite\",\n        \"streets\"\n        // m\u016f\u017eete p\u0159idat dal\u0161\u00ed p\u0159eddefinovan\u00e9 basemapy nebo instance Basemap\n    ]\n  });\n\n  // p\u0159id\u00e1n\u00ed BasemapGallery widgetu do zobrazen\u00ed (nap\u0159\u00edklad do prav\u00e9ho horn\u00edho rohu)\n  view.ui.add(basemapGallery, {\n    position: \"top-right\"\n  });\n</code></pre> <p>P\u0159\u00edpadn\u011b pokud chceme vyu\u017e\u00edt v\u00fdchoz\u00ed galerii basemap, sta\u010d\u00ed deklarovat jen </p> <pre><code>\"esri/widgets/BasemapGallery\"\n\n...\n\n// Vytvo\u0159en\u00ed instance BasemapGallery\nconst basemapGallery = new BasemapGallery({\n    view: view\n    });\n\n  // p\u0159id\u00e1n\u00ed BasemapGallery widgetu do zobrazen\u00ed (nap\u0159\u00edklad do prav\u00e9ho horn\u00edho rohu)\n    view.ui.add(basemapGallery, {\n    position: \"top-right\"\n    });\n</code></pre>"},{"location":"cviceni/cviceni8/#grafika-v-mape","title":"Grafika v map\u011b","text":"<p>Poj\u010fme nyn\u00ed zkusit do mapy p\u0159idat p\u00e1r stacion\u00e1rn\u00edch bod\u016f, nad kter\u00fdmi se zobraz\u00ed n\u011bjak\u00fd z\u00e1kladn\u00ed bodov\u00fd symbol.</p> <p>Budeme pot\u0159ebovat dal\u0161\u00ed moduly, a to <code>esri/Graphic</code>, <code>esri/layers/GraphicsLayer</code> a <code>esri/symbols/SimpleMarkerSymbol</code>. N\u00e1sleduj\u00edc\u00ed kus k\u00f3du p\u0159id\u00e1 do mapy n\u011bkolik bod\u016f definovan\u00fdch v poli <code>coordinates</code> \u2013 n\u011bkolik m\u011bst:</p> <pre><code>// Vytvo\u0159en\u00ed vrstvy pro grafiku (body)\n  const graphicsLayer = new GraphicsLayer();\n  map.add(graphicsLayer);\n\n  // Definov\u00e1n\u00ed symbolu pro body\n  const pointSymbol = new SimpleMarkerSymbol({\n    color: [0, 0, 255], // Modr\u00e1 barva\n    outline: {\n      color: [255, 255, 255], // B\u00edl\u00e1 obrys\n      width: 1\n    },\n    size: 8\n  });\n\n  // pole sou\u0159adnic bod\u016f (longitude, latitude)\n  const coordinates = [\n    [14.42, 50.09],   // Praha\n    [16.61, 49.20],   // Brno\n    [18.21, 49.59],   // Ostrava\n    [15.77, 49.09],   // Jihlava\n    [12.91, 50.08]    // Plze\u0148\n  ];\n\n  // iterov\u00e1n\u00ed pole sou\u0159adnic a vytvo\u0159en\u00ed grafick\u00fdch objekt\u016f\n  coordinates.forEach(function(coords) {\n    // vytvo\u0159en\u00ed geometrie bodu\n    const point = {\n      type: \"point\",\n      longitude: coords[0],\n      latitude: coords[1]\n    };\n\n    // vytvo\u0159en\u00ed grafick\u00e9ho objektu\n    const pointGraphic = new Graphic({\n      geometry: point,\n      symbol: pointSymbol\n    });\n\n    // p\u0159id\u00e1n\u00ed grafick\u00e9ho objektu do vrstvy grafiky\n    graphicsLayer.add(pointGraphic);\n  });\n</code></pre>"},{"location":"cviceni/cviceni8/#pridani-vrstev-z-arcgis-serveru","title":"P\u0159id\u00e1n\u00ed vrstev z ArcGIS Serveru","text":"<p>M\u016f\u017eeme p\u0159id\u00e1vat jako obsah samoz\u0159ejm\u011b nejen vrstvy ArcGIS Online, ale i z ArcGIS Serveru, dostupn\u00e9 p\u0159es REST rozhran\u00ed.</p> <p>Zde je p\u0159\u00edklad s vrstvou silnic z DATA50 p\u0159idanou do mapy:</p> <pre><code>    const silnice = new FeatureLayer({\n    url: \"https://ags.cuzk.cz/arcgis/rest/services/DATA50/MapServer/41\"  // vrstva silnic z DATA50\n    });\n\n    // p\u0159id\u00e1n\u00ed vrstvy z ArcGIS Serveru do mapy\n    map.add(silnice);\n</code></pre> <p>Vyzkou\u0161ejte si pr\u00e1ci s r\u016fzn\u00fdmi druhy vrstev (rastrov\u00e9, vektorov\u00e9; z ArcGIS Online, ze serveru). </p>"},{"location":"cviceni/cviceni8/#dalsi-kroky","title":"Dal\u0161\u00ed kroky","text":"<ul> <li>Nau\u010d\u00edme se p\u0159id\u00e1vat interaktivn\u00ed prvky do mapy \u2013 nap\u0159. popup okna.</li> <li>P\u0159id\u00e1me kompozi\u010dn\u00ed prvky (legendu, galerii podkladov\u00fdch map apod.).</li> <li>Nau\u010d\u00edme se pracovat s geometriemi a symboly pro vizualizaci dat na map\u011b.</li> <li>P\u0159id\u00e1me geoprocessingov\u00e9 n\u00e1stroje pro anal\u00fdzu dat na map\u011b.</li> <li>Funkcionalitu mapov\u00e9 aplikace roz\u0161\u00ed\u0159\u00edme pomoc\u00ed widget\u016f.</li> </ul>"},{"location":"cviceni/cviceni9/","title":"Pr\u00e1ce s WebMap v prost\u0159ed\u00ed ArcGIS API for JavaScript","text":""},{"location":"cviceni/cviceni9/#webmap-jako-zakladni-prvek-interakce-s-mapovou-aplikaci","title":"WebMap jako z\u00e1kladn\u00ed prvek interakce s mapovou aplikac\u00ed","text":"<p>Pr\u00e1ce s webov\u00fdmi mapami je pro efektivn\u00ed vyu\u017eit\u00ed ArcGIS JavaScript API d\u016fle\u017eit\u00e1 a usnad\u0148uje mnoho nastaven\u00ed a konfigurace. Webov\u00e9 mapy ulo\u017een\u00e9 na ArcGIS Online nebo ArcGIS Enterprise v sob\u011b nesou nejen definici vrstev, ale tak\u00e9 jejich symboliku, rozsah mapy, z\u00e1lo\u017eky a dal\u0161\u00ed nastaven\u00ed. D\u00edky tomu lze ve sv\u00e9 aplikaci snadno vyu\u017e\u00edt ji\u017e p\u0159ipraven\u00fd obsah.</p>"},{"location":"cviceni/cviceni9/#nacteni-webove-mapy-do-aplikace","title":"Na\u010dten\u00ed webov\u00e9 mapy do aplikace","text":""},{"location":"cviceni/cviceni9/#pouziti-tridy-webmap","title":"Pou\u017eit\u00ed t\u0159\u00eddy WebMap","text":"<p>Z\u00e1kladn\u00edm n\u00e1strojem pro pr\u00e1ci s webov\u00fdmi mapami je t\u0159\u00edda WebMap z modulu <code>esri/WebMap</code>. ID webov\u00e9 mapy: K na\u010dten\u00ed konkr\u00e9tn\u00ed webov\u00e9 mapy pot\u0159ebujete jej\u00ed unik\u00e1tn\u00ed ID. Toto ID je 32znakov\u00fd \u0159et\u011bzec, kter\u00fd najdete v URL adrese webov\u00e9 mapy na ArcGIS Online nebo ArcGIS Enterprise (nap\u0159. <code>https://www.server.cz/arcgis/webmap/viewer.html?webmap=57f61c36146aa98995d68cd2b17b39ec</code>). V k\u00f3du aplikace lze vytvo\u0159it instanci t\u0159\u00eddy WebMap a jako parametr j\u00ed p\u0159edat ID po\u017eadovan\u00e9 webov\u00e9 mapy. N\u00e1sledn\u011b tuto instanci WebMap p\u0159i\u0159ad\u00edme do mapy instance MapView.</p>"},{"location":"cviceni/cviceni9/#pouziti-konstrukce-viewwhen","title":"Pou\u017eit\u00ed konstrukce view.when()","text":"<p><code>view.when()</code> p\u0159edstavuje d\u016fle\u017eitou metodu v ArcGIS JavaScript API, kter\u00e1 slou\u017e\u00ed k asynchronn\u00edmu zpracov\u00e1n\u00ed ud\u00e1lost\u00ed souvisej\u00edc\u00edch s na\u010d\u00edt\u00e1n\u00edm a inicializac\u00ed mapov\u00e9ho pohledu (MapView nebo SceneView). Vrac\u00ed Promise, kter\u00e1 se vy\u0159e\u0161\u00ed (resolves) v moment\u011b, kdy je pohled pln\u011b inicializov\u00e1n a p\u0159ipraven k interakci.</p> <p>P\u0159i na\u010d\u00edt\u00e1n\u00ed webov\u00e9 aplikace s mapou se d\u011bje mnoho v\u011bc\u00ed na pozad\u00ed \u2013 na\u010d\u00edtaj\u00ed se data podkladov\u00e9 mapy a v\u0161ech p\u0159idan\u00fdch vrstev, co\u017e m\u016f\u017ee v z\u00e1vislosti na objemu a rychlosti p\u0159ipojen\u00ed trvat r\u016fzn\u011b dlouho. Prohl\u00ed\u017ee\u010d mus\u00ed tato data zpracovat a vykreslit mapu na displej. Samotn\u00fd MapView nebo SceneView pot\u0159ebuje \u010das na svou vnit\u0159n\u00ed inicializaci, nastaven\u00ed po\u010d\u00e1te\u010dn\u00edho rozsahu, na\u010dten\u00ed prostorov\u00e9ho referen\u010dn\u00edho syst\u00e9mu atd. Pokud bychom se pokusili manipulovat s pohledem (nap\u0159\u00edklad p\u0159id\u00e1vat grafiku, registrovat ud\u00e1losti kliknut\u00ed, m\u011bnit rozsah) d\u0159\u00edve, ne\u017e je pln\u011b inicializov\u00e1n, mohlo by doj\u00edt k chyb\u00e1m, proto\u017ee n\u011bkter\u00e9 jeho intern\u00ed struktury a zdroje je\u0161t\u011b nemus\u00ed b\u00fdt dostupn\u00e9.</p> <p>V takov\u00e9m p\u0159\u00edpad\u011b <code>view.when()</code> n\u00e1m umo\u017e\u0148uje bezpe\u010dn\u011b spustit k\u00f3d, kter\u00fd z\u00e1vis\u00ed na pln\u011b inicializovan\u00e9m pohledu. Poskytuje elegantn\u00ed zp\u016fsob, jak zajistit, \u017ee k\u00f3d bude proveden a\u017e pot\u00e9, co je mapa p\u0159ipravena.</p> <p>M\u016f\u017eete vyu\u017e\u00edt JS soubor z minula nebo si (l\u00e9pe) zalo\u017eit aplikaci novou. Budeme pot\u0159ebovat nov\u00fd modul: <code>\"esri/WebMap\"</code> pro pr\u00e1ci s webov\u00fdmi mapami.</p> <pre><code>    require([\n    \"esri/Map\",\n    \"esri/views/MapView\",\n    \"esri/layers/MapImageLayer\",\n    \"esri/layers/FeatureLayer\",\n    \"esri/widgets/LayerList\",\n    \"esri/widgets/Legend\",\n    \"esri/Basemap\",\n    \"esri/widgets/Expand\",\n    \"esri/widgets/BasemapGallery\",\n    \"esri/WebMap\"\n    ], function(Map, MapView, MapImageLayer, FeatureLayer, LayerList, Legend, Basemap, Expand, BasemapGallery, Webmap) {\n\n\n    const webmap = new Webmap({\n    portalItem: {\n        id: \"id_webmapy\" // nahradit skute\u010dn\u00fdm ID webov\u00e9 mapy\n    }\n    });\n\n    const view = new MapView({\n        container: \"mapDiv\", \n        map: webmap\n      });\n\n      // K\u00f3d, kter\u00fd z\u00e1vis\u00ed na pln\u011b na\u010dten\u00e9 map\u011b, by m\u011bl b\u00fdt n\u00ed\u017ee\n    view.when(function() {\n        console.log(\"Webov\u00e1 mapa byla \u00fasp\u011b\u0161n\u011b na\u010dtena a zobrazena.\");\n        // Zde lze prov\u00e1d\u011bt dal\u0161\u00ed operace s mapou nebo jej\u00edmi vrstvami\n      }, function(error) {\n        console.error(\"Chyba p\u0159i na\u010d\u00edt\u00e1n\u00ed webov\u00e9 mapy:\", error);\n      });\n    });\n</code></pre> <p>Pro dal\u0161\u00ed pr\u00e1ci m\u016f\u017eete pou\u017e\u00edt WebMapu s id <code>38b56df5741748d29bc1f7761590962b</code>, jedn\u00e1 se o ORP v \u00dasteck\u00e9m kraji se zobrazen\u00edm vybran\u00fdch s\u00eddel. Webmapa je sd\u00edlena jako everyone a m\u016f\u017eete ji pou\u017e\u00edt. Kdyby nap\u0159. byla sd\u00edlena jen s organizac\u00ed, bude t\u0159eba se p\u0159ihl\u00e1sit.</p> <p>V\u0161imn\u011bte si, \u017ee se p\u0159evezmou v\u0161echna nastaven\u00ed webmapy, jako nap\u0159.</p> <ul> <li>po\u0159ad\u00ed vrstev;</li> <li>styl, symbolika;</li> <li>barevnost, pr\u016fhlednost;</li> <li>nastaven\u00ed popisu v\u010detn\u011b m\u011b\u0159\u00edtkov\u00e9ho omezen\u00ed;</li> <li>nastaven\u00ed pop-upu (on/off a jeho polo\u017eky) a dal\u0161\u00ed.</li> </ul>"},{"location":"cviceni/cviceni9/#prace-s-webmapou","title":"Pr\u00e1ce s webmapou","text":""},{"location":"cviceni/cviceni9/#zobrazeni-legendy-pro-viditelne-vrstvy","title":"Zobrazen\u00ed legendy pro viditeln\u00e9 vrstvy","text":"<p>Je mo\u017en\u00e9 dynamicky aktualizovat legendu podle viditelnosti vrstev. Vytvo\u0159\u00edme prvek na str\u00e1nce, kter\u00fd zobraz\u00ed legendu pouze pro aktu\u00e1ln\u011b viditeln\u00e9 vrstvy z webov\u00e9 mapy. Kdy\u017e u\u017eivatel p\u0159epne viditelnost vrstvy  pomoc\u00ed p\u0159ep\u00edna\u010de, legenda by se m\u011bla aktualizovat a zobrazit symboly pouze pro viditeln\u00e9 vrstvy. Vyzkou\u0161\u00edme si tak\u00e9 zobrazen\u00ed mapov\u00fdch kompozi\u010dn\u00edch prvk\u016f mimo samotn\u00e9 mapov\u00e9 pole. Pro tyto \u00fa\u010dely si rozd\u011bl\u00edme obrazovku na p\u011btiny, kde lev\u00e9 4/5 budou p\u0159edstavovat mapov\u00e9 okno, zbyl\u00e1 p\u011btina vpravo ovl\u00e1dac\u00ed prvky typu legenda a p\u0159ep\u00edna\u010d vrstev. </p> <p>V HTML souboru je t\u0159eba p\u0159idat definici pohledu: <code>&lt;meta name=\"viewport\" content=\"initial-scale=1, maximum-scale=1, user-scalable=no\"&gt;</code></p> <p>a pot\u00e9 definovat nov\u00e9 divy \u2013 pro legendu a p\u0159ep\u00edna\u010d vrstev. Kompletn\u00ed k\u00f3d pro HTML je n\u00ed\u017ee:</p> <pre><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n  &lt;meta charset=\"utf-8\"&gt;\n  &lt;meta name=\"viewport\" content=\"initial-scale=1, maximum-scale=1, user-scalable=no\"&gt;\n  &lt;title&gt;Dynamick\u00e1 legenda pro viditeln\u00e9 vrstvy&lt;/title&gt;\n  &lt;link rel=\"stylesheet\" href=\"https://js.arcgis.com/4.29/esri/themes/light/main.css\"&gt;\n  &lt;script src=\"https://js.arcgis.com/4.31/\"&gt;&lt;/script&gt;\n  &lt;script src=\"script9.js\"&gt;&lt;/script&gt;\n  &lt;style&gt;\n    html, body, #mapDiv {\n      padding: 0;\n      margin: 0;\n      height: 100%;\n      width: 80%; /* mapa zab\u00edr\u00e1 v\u011bt\u0161inu \u0161\u00ed\u0159ky */\n      float: left;\n    }\n    #panelDiv { /* nov\u00fd kontejner pro legendu a LayerList */\n      width: 20%;\n      height: 100%;\n      float: left;\n      padding: 10px;\n      box-sizing: border-box;\n      overflow-y: auto; /* v p\u0159\u00edpad\u011b dlouh\u00e9 legendy p\u016fjde rolovat */\n    }\n    #legDiv {\n      padding: 10px;\n      margin-bottom: 10px; /* mezera mezi legendou a LayerList */\n      border: 1px solid #ccc; /* ohrani\u010den\u00ed pro vizu\u00e1ln\u00ed odd\u011blen\u00ed */\n    }\n    #layerListDiv {\n      padding: 10px;\n      border: 1px solid #ccc; /* ohrani\u010den\u00ed */\n      background-color: #f9f9f9; /* jemn\u00e9 pozad\u00ed */\n    }\n  &lt;/style&gt;\n&lt;/head&gt;\n&lt;body&gt;\n  &lt;div id=\"mapDiv\"&gt;&lt;/div&gt;\n  &lt;div id=\"panelDiv\"&gt;\n    &lt;div id=\"legDiv\"&gt;&lt;/div&gt;\n    &lt;div id=\"layerListDiv\"&gt;&lt;/div&gt;\n  &lt;/div&gt;\n\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre> <p>V javascriptov\u00e9m souboru bude t\u0159eba iterovat p\u0159es <code>webmap.layers</code>, zkontrolovat vlastnost visible a n\u00e1sledn\u011b pou\u017e\u00edt t\u0159\u00eddu Legend a jej\u00ed vlastnost layerInfos pro konfiguraci zobrazen\u00fdch vrstev.</p> <p>Podrobn\u011bji:</p> <p>Vytvo\u0159\u00edme instanci Legend:</p> <ul> <li><code>const legend = new Legend(...)</code> </li> <li><code>container: \"legDiv\"</code> ur\u010duje, kam se m\u00e1 legenda vykreslit (do legDiv);</li> <li><code>layerInfos: []</code> \u2013 inicializujeme layerInfos jako pr\u00e1zdn\u00e9 pole. Toto pole bude dynamicky aktualizov\u00e1no;</li> </ul> <p>Funkce <code>updateLegendLayerInfos()</code>:</p> <p>Tato funkce je zodpov\u011bdn\u00e1 za aktualizaci obsahu legendy.</p> <ul> <li><code>webmap.layers.toArray()</code> p\u0159evede kolekci vrstev webov\u00e9 mapy na pole;</li> <li><code>.map(layer =&gt; ({ layer: layer, title: layer.title }))</code> \u2013 pro ka\u017edou vrstvu vytvo\u0159\u00ed objekt s vlastnostmi layer (samotn\u00e1 vrstva) a title (n\u00e1zev vrstvy, kter\u00fd se zobraz\u00ed v legend\u011b);</li> <li><code>.filter(info =&gt; info.layer.visible)</code> \u2013 tento krok filtruje pole tak, aby obsahovalo pouze informace o vrstv\u00e1ch, jejich\u017e vlastnost visible je true;</li> <li><code>legend.layerInfos = ...</code> nastav\u00ed aktualizovan\u00e9 pole layerInfos widgetu Legend, \u010d\u00edm\u017e se legenda dynamicky p\u0159ekresl\u00ed pouze pro viditeln\u00e9 vrstvy.</li> <li> <p>Inicializace a reakce na zm\u011bny viditelnosti</p> </li> <li> <p><code>view.when(() =&gt; { ... });</code> (viz v\u00fd\u0161e) \u2013 zaji\u0161\u0165uje, \u017ee k\u00f3d uvnit\u0159 se spust\u00ed a\u017e po na\u010dten\u00ed mapy;</p> </li> <li><code>updateLegendLayerInfos()</code> \u2013 prvn\u00ed zavol\u00e1n\u00ed funkce pro zobrazen\u00ed po\u010d\u00e1te\u010dn\u00ed legendy po na\u010dten\u00ed mapy;</li> <li><code>webmap.layers.on(\"change\", () =&gt; { ... });</code>  p\u0159id\u00e1v\u00e1 poslucha\u010de ud\u00e1losti <code>change</code> na kolekci <code>webmap.layers</code>. Tato ud\u00e1lost se spou\u0161t\u00ed, kdy\u017e se zm\u011bn\u00ed jak\u00e1koli vlastnost kter\u00e9koli vrstvy v kolekci (v\u010detn\u011b viditelnosti). P\u0159i ka\u017ed\u00e9 zm\u011bn\u011b se znovu vol\u00e1 <code>updateLegendLayerInfos()</code>, aby se legenda aktualizovala.</li> </ul> <p>Vlastn\u00ed k\u00f3d je zde: <pre><code>require([\n    \"esri/Map\",\n    \"esri/views/MapView\",\n    \"esri/WebMap\",\n    \"esri/widgets/Legend\",\n    \"esri/widgets/LayerList\"\n    ], function(Map, MapView, Webmap, Legend, LayerList) {\n\n    const webmapId = \"38b56df5741748d29bc1f7761590962b\"; \n\n    const webmap = new Webmap({\n      portalItem: {\n        id: webmapId\n      }\n    });\n\n    const view = new MapView({\n      container: \"mapDiv\",\n      map: webmap\n    });\n\n    const legend = new Legend({\n      view: view,\n      container: \"legDiv\",\n      layerInfos: [] // inicializujeme pr\u00e1zdn\u00e9 layerInfos\n    });\n\n    const layerList = new LayerList({\n      view: view,\n      container: \"layerListDiv\"\n    });\n\n    view.when(() =&gt; {\n      // funkce pro aktualizaci layerInfos legendy na z\u00e1klad\u011b viditeln\u00fdch vrstev\n      function updateLegendLayerInfos() {\n        legend.layerInfos = webmap.layers.toArray().map(layer =&gt; ({\n          layer: layer,\n          title: layer.title // pou\u017eijeme n\u00e1zev vrstvy jako titulek v legend\u011b\n        })).filter(info =&gt; info.layer.visible); // filtrujeme pouze viditeln\u00e9 vrstvy\n      }\n\n      // inicializace legendy po na\u010dten\u00ed mapy\n      updateLegendLayerInfos();\n\n      // reakce na zm\u011bnu viditelnosti kter\u00e9koli vrstvy v map\u011b\n      webmap.layers.on(\"change\", () =&gt; {\n        updateLegendLayerInfos();\n        });\n      });\n    });\n</code></pre></p> <p>\u00dakol: Vytvo\u0159te si vlastn\u00ed webmapu. Voliteln\u011b nastavte basemap a do webmapy ulo\u017ete kombinaci rastrov\u00fdch vrstev a vektorov\u00fdch vrstev takto: na pozad\u00ed budou rastrov\u00e9 vrstvy ortofota (\u010c\u00daZK) a III. vojensk\u00e9ho mapov\u00e1n\u00ed (TLS slu\u017eba p\u0159\u00edstupn\u00e1 p\u0159es <code>https://www.chartae-antiquae.cz/TMS/Military3/{z}/{x}/{y}</code>) a nad t\u00edm vrstvy les\u016f, vodn\u00edch ploch, vodn\u00edch tok\u016f a leti\u0161\u0165 z DATA50 (<code>https://ags.cuzk.cz/arcgis/rest/services/DATA50/MapServer</code>).</p> <p>Zobrazen\u00ed atributov\u00e9 tabulky pro vybranou vektorovou vrstvu</p> <p>Vyzkou\u0161ejte si pr\u00e1ci s atributy vektorov\u00fdch vrstev a jejich zobrazen\u00edm v tabulkov\u00e9 form\u011b. U\u017eivatel si m\u016f\u017ee vybrat vybrat jednu z vektorov\u00fdch vrstev z rozbalovac\u00edho seznamu. Po v\u00fdb\u011bru by se m\u011bla zobrazit atributov\u00e1 tabulka pro tuto vrstvu s jej\u00edmi poli a z\u00e1znamy. Budete muset z\u00edskat vybranou FeatureLayer z <code>webmap.layers</code>. Pro zobrazen\u00ed atributov\u00e9 tabulky m\u016f\u017eete pou\u017e\u00edt bu\u010f hotov\u00fd widget FeatureTable z <code>esri/widgets/FeatureTable</code> nebo si m\u016f\u017eete data na\u010d\u00edst pomoc\u00ed <code>layer.queryFeatures()</code> a dynamicky vytvo\u0159it HTML tabulku.</p> <p>K\u00f3d m\u016f\u017ee vypadat nap\u0159. takto, je t\u0159eba p\u0159idat p\u0159\u00edslu\u0161n\u00e9 elementy i do HTML str\u00e1nky:</p> Note script.jsindex.html <pre><code>require([\n\"esri/views/MapView\",\n\"esri/WebMap\",\n\"esri/widgets/FeatureTable\"\n], function(MapView, WebMap, FeatureTable) {\nconst webmapId = \"38b56df5741748d29bc1f7761590962b\"; // ID webmapy\nconst layerSelect = document.getElementById(\"layerSelect\");\nconst tableDiv = document.getElementById(\"tableDiv\");\nlet featureTable;\n\nconst webmapa = new WebMap({\n  portalItem: {\n    id: webmapId\n  }\n});\n\nconst view = new MapView({\n  container: \"mapDiv\",\n  map: webmapa\n});\n\nview.when(function() {\n  // napln\u011bn\u00ed select elementu vektorov\u00fdmi vrstvami\n  webmapa.layers.forEach(layer =&gt; {\n    if (layer.type === \"feature\") {\n      const option = document.createElement(\"option\");\n      option.value = layer.id;\n      option.text = layer.title;\n      layerSelect.appendChild(option);\n    }\n  });\n\n  // zobrazen\u00ed atributov\u00e9 tabulky pro vybranou vrstvu\n  function showAttributes(layerId) {\n    const selectedLayer = webmapa.layers.find(layer =&gt;\n      layer.id === layerId &amp;&amp; layer.type === \"feature\"\n    );\n\n    if (selectedLayer) {\n      // pokud atributov\u00e1 tabulka ji\u017e existuje, zlikvidujeme\n      if (featureTable) {\n        featureTable.destroy();\n      }\n\n      featureTable = new FeatureTable({\n        view: view,\n        layer: selectedLayer,\n        container: tableDiv\n      });\n    } else {\n      tableDiv.innerHTML = \"&lt;p&gt;Vybran\u00e1 vrstva neobsahuje atributy nebo nen\u00ed vektorov\u00e1.&lt;/p&gt;\";\n    }\n  }\n\n  // zm\u011bna v select elementu pomoc\u00ed standardn\u00ed ud\u00e1losti\n  layerSelect.addEventListener(\"change\", (event) =&gt; {\n    const selectedLayerId = event.target.value;\n    showAttributes(selectedLayerId);\n  });\n\n  // zobraz\u00edme atributovou tabulku pro prvn\u00ed vektorovou vrstvu po na\u010dten\u00ed mapy\n  const firstFeatureLayer = webmapa.layers.find(layer =&gt; layer.type === \"feature\");\n  if (firstFeatureLayer) {\n    showAttributes(firstFeatureLayer.id);\n    layerSelect.value = firstFeatureLayer.id; // Nastav\u00edme select na prvn\u00ed vrstvu\n  } else {\n    tableDiv.innerHTML = \"&lt;p&gt;Webov\u00e1 mapa neobsahuje \u017e\u00e1dn\u00e9 vektorov\u00e9 vrstvy.&lt;/p&gt;\";\n  }\n\n}, function(error) {\n  console.error(\"Chyba p\u0159i na\u010d\u00edt\u00e1n\u00ed webov\u00e9 mapy:\", error);\n});\n});\n</code></pre> <pre><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n  &lt;meta charset=\"utf-8\"&gt;\n  &lt;meta name=\"viewport\" content=\"initial-scale=1, maximum-scale=1, user-scalable=no\"&gt;\n  &lt;title&gt;Dynamick\u00e1 legenda pro viditeln\u00e9 vrstvy&lt;/title&gt;\n  &lt;link rel=\"stylesheet\" href=\"https://js.arcgis.com/4.29/esri/themes/light/main.css\"&gt;\n  &lt;script src=\"https://js.arcgis.com/4.29/\"&gt;&lt;/script&gt;\n  &lt;script src=\"script9b.js\"&gt;&lt;/script&gt;\n  &lt;style&gt;\n    html, body, #mapDiv {\n      padding: 0;\n      margin: 0;\n      height: 70%;\n      width: 100%;\n    }\n    #tableDiv {\n      height: 30%;\n      width: 100%;\n      overflow: auto;\n    }\n    #layerSelect {\n      margin-bottom: 10px;\n    }\n  &lt;/style&gt;\n&lt;/head&gt;\n&lt;body&gt;\n    &lt;div id=\"mapDiv\"&gt;&lt;/div&gt;\n    &lt;div&gt;\n      &lt;select id=\"layerSelect\"&gt;\n        &lt;option value=\"\"&gt;Vyberte vektorovou vrstvu ...&lt;/option&gt;\n      &lt;/select&gt;\n    &lt;/div&gt;\n    &lt;div id=\"tableDiv\"&gt;&lt;/div&gt;\n  &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>"}]}